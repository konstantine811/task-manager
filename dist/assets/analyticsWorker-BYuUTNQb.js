const l=u=>{const n={},e={};return{rangeTasks:u.map(c=>{const{date:s,items:a}=c,t=I(a,n,e);return{date:s,data:t}}),categoryEntity:n,rangeTaskEntity:e}},I=(u,n,e)=>{let m=0,c=0;return u.forEach(({title:s,tasks:a})=>{n[s]||(n[s]={time:0,countDone:0,countDoneTime:0,taskDone:[],taskNoDone:[]}),a.forEach(t=>{const{title:o,isDone:T,isDetermined:f,isPlanned:d,time:i,timeDone:D}=t;e[o]||(e[o]={countIsDone:0,countIsNotDone:0,countTime:0,countDoneTime:0}),f||d?(n[s].time+=D,e[o].countTime+=D,T?(e[o].countIsDone+=1,e[o].countDoneTime+=D,m+=D,n[s].countDoneTime+=D):(e[o].countIsNotDone+=1,c+=D,n[s].taskNoDone.push(o))):(n[s].time+=i,e[o].countTime+=i,T?(e[o].countIsDone+=1,e[o].countDoneTime+=D,m+=D,n[s].countDoneTime+=D):(e[o].countIsNotDone+=1,c+=i))})}),{countTimeDone:m,countNotTimeDone:c}};self.onmessage=u=>{const n=u.data;postMessage(l(n))};
