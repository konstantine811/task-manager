import{r as c,j as w}from"./index-I-f6NN0M.js";import{g as _,h as K,i as N,J as q,M as I,j as z,u as b,P as Q,k as T,l as v,L as Z,f as O,n as ee,o as L}from"./headerSizeStore-82m5FhoW.js";function te(...e){const n=!Array.isArray(e[0]),t=n?0:-1,s=e[0+t],o=e[1+t],i=e[2+t],r=e[3+t],a=_(o,i,r);return n?a(s):a}function ne(e,n,t={}){const s=e.get();let o=null,i=s,r;const a=typeof s=="string"?s.replace(/[\d.-]/g,""):void 0,p=()=>{o&&(o.stop(),o=null)},y=()=>{p();const f=H(e.get()),h=H(i);f!==h&&(o=new q({keyframes:[f,h],velocity:e.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...t,onUpdate:r}))};if(e.attach((f,h)=>{i=f,r=u=>h(D(u,a)),K.postRender(()=>{var u;y(),(u=e.events.animationStart)==null||u.notify(),o==null||o.then(()=>{var d;(d=e.events.animationComplete)==null||d.notify()})})},p),N(n)){const f=n.on("change",u=>e.set(D(u,a))),h=e.on("destroy",f);return()=>{f(),h()}}return p}function D(e,n){return n?e+n:e}function H(e){return typeof e=="number"?e:parseFloat(e)}function U(e,n){if(typeof e=="function")return e(n);e!=null&&(e.current=n)}function se(...e){return n=>{let t=!1;const s=e.map(o=>{const i=U(o,n);return!t&&typeof i=="function"&&(t=!0),i});if(t)return()=>{for(let o=0;o<s.length;o++){const i=s[o];typeof i=="function"?i():U(e[o],null)}}}}function oe(...e){return c.useCallback(se(...e),e)}class re extends c.Component{getSnapshotBeforeUpdate(n){const t=this.props.childRef.current;if(t&&n.isPresent&&!this.props.isPresent&&this.props.pop!==!1){const s=t.offsetParent,o=z(s)&&s.offsetWidth||0,i=z(s)&&s.offsetHeight||0,r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft,r.right=o-r.width-r.left,r.bottom=i-r.height-r.top}return null}componentDidUpdate(){}render(){return this.props.children}}function ie({children:e,isPresent:n,anchorX:t,anchorY:s,root:o,pop:i}){var u;const r=c.useId(),a=c.useRef(null),p=c.useRef({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:y}=c.useContext(I),f=((u=e.props)==null?void 0:u.ref)??(e==null?void 0:e.ref),h=oe(a,f);return c.useInsertionEffect(()=>{const{width:d,height:m,top:E,left:V,right:R,bottom:M}=p.current;if(n||i===!1||!a.current||!d||!m)return;const P=t==="left"?`left: ${V}`:`right: ${R}`,g=s==="bottom"?`bottom: ${M}`:`top: ${E}`;a.current.dataset.motionPopId=r;const x=document.createElement("style");y&&(x.nonce=y);const A=o??document.head;return A.appendChild(x),x.sheet&&x.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${m}px !important;
            ${P}px !important;
            ${g}px !important;
          }
        `),()=>{A.contains(x)&&A.removeChild(x)}},[n]),w.jsx(re,{isPresent:n,childRef:a,sizeRef:p,pop:i,children:i===!1?e:c.cloneElement(e,{ref:h})})}const ce=({children:e,initial:n,isPresent:t,onExitComplete:s,custom:o,presenceAffectsLayout:i,mode:r,anchorX:a,anchorY:p,root:y})=>{const f=b(ue),h=c.useId();let u=!0,d=c.useMemo(()=>(u=!1,{id:h,initial:n,isPresent:t,custom:o,onExitComplete:m=>{f.set(m,!0);for(const E of f.values())if(!E)return;s&&s()},register:m=>(f.set(m,!1),()=>f.delete(m))}),[t,f,s]);return i&&u&&(d={...d}),c.useMemo(()=>{f.forEach((m,E)=>f.set(E,!1))},[t]),c.useEffect(()=>{!t&&!f.size&&s&&s()},[t]),e=w.jsx(ie,{pop:r==="popLayout",isPresent:t,anchorX:a,anchorY:p,root:y,children:e}),w.jsx(Q.Provider,{value:d,children:e})};function ue(){return new Map}const k=e=>e.key||"";function J(e){const n=[];return c.Children.forEach(e,t=>{c.isValidElement(t)&&n.push(t)}),n}const he=({children:e,custom:n,initial:t=!0,onExitComplete:s,presenceAffectsLayout:o=!0,mode:i="sync",propagate:r=!1,anchorX:a="left",anchorY:p="top",root:y})=>{const[f,h]=T(r),u=c.useMemo(()=>J(e),[e]),d=r&&!f?[]:u.map(k),m=c.useRef(!0),E=c.useRef(u),V=b(()=>new Map),R=c.useRef(new Set),[M,P]=c.useState(u),[g,x]=c.useState(u);v(()=>{m.current=!1,E.current=u;for(let C=0;C<g.length;C++){const l=k(g[C]);d.includes(l)?(V.delete(l),R.current.delete(l)):V.get(l)!==!0&&V.set(l,!1)}},[g,d.length,d.join("-")]);const A=[];if(u!==M){let C=[...u];for(let l=0;l<g.length;l++){const S=g[l],$=k(S);d.includes($)||(C.splice(l,0,S),A.push(S))}return i==="wait"&&A.length&&(C=A),x(J(C)),P(u),null}const{forceRender:j}=c.useContext(Z);return w.jsx(w.Fragment,{children:g.map(C=>{const l=k(C),S=r&&!f?!1:u===g||d.includes(l),$=()=>{if(R.current.has(l))return;if(R.current.add(l),V.has(l))V.set(l,!0);else return;let F=!0;V.forEach(Y=>{Y||(F=!1)}),F&&(j==null||j(),x(E.current),r&&(h==null||h()),s&&s())};return w.jsx(ce,{isPresent:S,initial:!m.current||t?void 0:!1,custom:n,presenceAffectsLayout:o,mode:i,root:y,onExitComplete:S?void 0:$,anchorX:a,anchorY:p,children:C},l)})})};function B(e){const n=b(()=>O(e)),{isStatic:t}=c.useContext(I);if(t){const[,s]=c.useState(e);c.useEffect(()=>n.on("change",s),[])}return n}function G(e,n){const t=B(n()),s=()=>t.set(n());return s(),v(()=>{const o=()=>K.preRender(s,!1,!0),i=e.map(r=>r.on("change",o));return()=>{i.forEach(r=>r()),ee(s)}}),t}function fe(e){L.current=[],e();const n=G(L.current,e);return L.current=void 0,n}function X(e,n,t,s){if(typeof e=="function")return fe(e);if(t!==void 0&&!Array.isArray(t)&&typeof n!="function")return ae(e,n,t,s);const r=typeof n=="function"?n:te(n,t,s),a=Array.isArray(e)?W(e,r):W([e],([y])=>r(y)),p=Array.isArray(e)?void 0:e.accelerate;return p&&!p.isTransformed&&typeof n!="function"&&Array.isArray(t)&&(s==null?void 0:s.clamp)!==!1&&(a.accelerate={...p,times:n,keyframes:t,isTransformed:!0}),a}function W(e,n){const t=b(()=>[]);return G(e,()=>{t.length=0;const s=e.length;for(let o=0;o<s;o++)t[o]=e[o].get();return n(t)})}function ae(e,n,t,s){const o=b(()=>Object.keys(t)),i=b(()=>({}));for(const r of o)i[r]=X(e,n,t[r],s);return i}function le(e,n={}){const{isStatic:t}=c.useContext(I),s=()=>N(e)?e.get():e;if(t)return X(s);const o=B(s());return c.useInsertionEffect(()=>ne(o,e,n),[o,JSON.stringify(n)]),o}function me(e,n={}){return le(e,{type:"spring",...n})}export{he as A,B as a,me as b,X as u};
