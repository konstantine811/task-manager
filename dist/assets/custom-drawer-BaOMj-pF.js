import{r as g,g as D,h as kt,j as m,i as ol,k as Yd,t as rr,l as Kd}from"./index-I-f6NN0M.js";import{L as Ue,P as fe,D as X,A as Po,M as Xe,N as tt,F as tn,O as rl,Q as il,R as sl,T as al,U as ll,V as ul,W as cl,X as Xd,Y as vt,Z as Qd,_ as Zd,S as we,B as ve,$ as jd,h as Ne,g as Do,H as Me,a0 as Jr,a1 as Wr,a2 as Yr,a3 as Kr,p as dl,j as ef,k as tf,m as nf,n as of,o as rf,q as sf,r as af,a4 as lf,a5 as uf,E as Xr,a6 as ht,a7 as cf,a8 as df,a9 as ff,aa as fl,ab as pf,ac as hf,ad as pl,ae as mf,af as gf,ag as vf}from"./touch-inspect-CKXOG-wf.js";import{d as ye,b as xn,e as yf,f as Ef,c as Qr}from"./headerSizeStore-82m5FhoW.js";import{c as Ie,u as Ye}from"./addLeadingZeros-Cf7AxCAV.js";import{T as Tf,P as Cf,a as Sf}from"./trending-up-DJX-bNRx.js";import{U as wf}from"./users-NoHdSWef.js";import{b as _f,u as xf,A as hl}from"./use-spring-cNoCArSl.js";import{C as ml}from"./check-Cv3J71aq.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const If=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Rf=Ie("briefcase",If);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Af=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],bf=Ie("circle",Af);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nf=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],Mf=Ie("coffee",Nf);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pf=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],io=Ie("grip-vertical",Pf);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Df=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M3.22 12H9.5l.5-1 2 4.5 2-7 1.5 3.5h5.27",key:"1uw2ng"}]],kf=Ie("heart-pulse",Df);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lf=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Gi=Ie("loader-circle",Lf);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uf=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Ff=Ie("message-circle-question",Uf);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vf=[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]],Gf=Ie("palette",Vf);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Of=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"m9 16 3-3 3 3",key:"1idcnm"}]],Hf=Ie("panel-top-close",Of);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $f=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"m15 14-3 3-3-3",key:"g215vf"}]],Bf=Ie("panel-top-open",$f);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qf=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],gl=Ie("pause",qf);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zf=[["path",{d:"m10 10-6.157 6.162a2 2 0 0 0-.5.833l-1.322 4.36a.5.5 0 0 0 .622.624l4.358-1.323a2 2 0 0 0 .83-.5L14 13.982",key:"bjo8r8"}],["path",{d:"m12.829 7.172 4.359-4.346a1 1 0 1 1 3.986 3.986l-4.353 4.353",key:"16h5ne"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Jf=Ie("pen-off",zf);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wf=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Yf=Ie("pen",Wf);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kf=[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]],Xf=Ie("sliders-horizontal",Kf);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qf=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],Zf=Ie("smile",Qf);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jf=[["path",{d:"M20 9V6a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v3",key:"1dgpiv"}],["path",{d:"M2 16a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a2 2 0 0 0-4 0v1.5a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5V11a2 2 0 0 0-4 0z",key:"xacw8m"}],["path",{d:"M4 18v2",key:"jwo5n2"}],["path",{d:"M20 18v2",key:"1ar1qi"}],["path",{d:"M12 4v9",key:"oqhhn3"}]],ep=Ie("sofa",jf);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tp=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],so=Ie("sparkles",tp);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const np=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 8h10",key:"1jw688"}],["path",{d:"M7 12h10",key:"b7w52i"}],["path",{d:"M7 16h10",key:"wp8him"}]],op=Ie("square-menu",np);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rp=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],ip=Ie("trash-2",rp);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sp=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],ap=Ie("wallet",sp);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lp=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],vl=Ie("x",lp);function up(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return g.useMemo(()=>o=>{t.forEach(r=>r(o))},t)}const ko=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function nn(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function Zr(e){return"nodeType"in e}function Be(e){var t,n;return e?nn(e)?e:Zr(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function jr(e){const{Document:t}=Be(e);return e instanceof t}function Mn(e){return nn(e)?!1:e instanceof Be(e).HTMLElement}function yl(e){return e instanceof Be(e).SVGElement}function on(e){return e?nn(e)?e.document:Zr(e)?jr(e)?e:Mn(e)||yl(e)?e.ownerDocument:document:document:document}const lt=ko?g.useLayoutEffect:g.useEffect;function Lo(e){const t=g.useRef(e);return lt(()=>{t.current=e}),g.useCallback(function(){for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return t.current==null?void 0:t.current(...o)},[])}function cp(){const e=g.useRef(null),t=g.useCallback((o,r)=>{e.current=setInterval(o,r)},[]),n=g.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function In(e,t){t===void 0&&(t=[e]);const n=g.useRef(e);return lt(()=>{n.current!==e&&(n.current=e)},t),n}function Pn(e,t){const n=g.useRef();return g.useMemo(()=>{const o=e(n.current);return n.current=o,o},[...t])}function ao(e){const t=Lo(e),n=g.useRef(null),o=g.useCallback(r=>{r!==n.current&&(t==null||t(r,n.current)),n.current=r},[]);return[n,o]}function lo(e){const t=g.useRef();return g.useEffect(()=>{t.current=e},[e]),t.current}let ir={};function Dn(e,t){return g.useMemo(()=>{if(t)return t;const n=ir[e]==null?0:ir[e]+1;return ir[e]=n,e+"-"+n},[e,t])}function El(e){return function(t){for(var n=arguments.length,o=new Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];return o.reduce((i,s)=>{const l=Object.entries(s);for(const[d,c]of l){const f=i[d];f!=null&&(i[d]=f+e*c)}return i},{...t})}}const Xt=El(1),uo=El(-1);function dp(e){return"clientX"in e&&"clientY"in e}function Uo(e){if(!e)return!1;const{KeyboardEvent:t}=Be(e.target);return t&&e instanceof t}function fp(e){if(!e)return!1;const{TouchEvent:t}=Be(e.target);return t&&e instanceof t}function co(e){if(fp(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return dp(e)?{x:e.clientX,y:e.clientY}:null}const At=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[At.Translate.toString(e),At.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:o}=e;return t+" "+n+"ms "+o}}}),Oi="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function pp(e){return e.matches(Oi)?e:e.querySelector(Oi)}const hp={display:"none"};function mp(e){let{id:t,value:n}=e;return D.createElement("div",{id:t,style:hp},n)}function gp(e){let{id:t,announcement:n,ariaLiveType:o="assertive"}=e;const r={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return D.createElement("div",{id:t,style:r,role:"status","aria-live":o,"aria-atomic":!0},n)}function vp(){const[e,t]=g.useState("");return{announce:g.useCallback(o=>{o!=null&&t(o)},[]),announcement:e}}const Tl=g.createContext(null);function yp(e){const t=g.useContext(Tl);g.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function Ep(){const[e]=g.useState(()=>new Set),t=g.useCallback(o=>(e.add(o),()=>e.delete(o)),[e]);return[g.useCallback(o=>{let{type:r,event:i}=o;e.forEach(s=>{var l;return(l=s[r])==null?void 0:l.call(s,i)})},[e]),t]}const Tp={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Cp={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function Sp(e){let{announcements:t=Cp,container:n,hiddenTextDescribedById:o,screenReaderInstructions:r=Tp}=e;const{announce:i,announcement:s}=vp(),l=Dn("DndLiveRegion"),[d,c]=g.useState(!1);if(g.useEffect(()=>{c(!0)},[]),yp(g.useMemo(()=>({onDragStart(p){let{active:h}=p;i(t.onDragStart({active:h}))},onDragMove(p){let{active:h,over:v}=p;t.onDragMove&&i(t.onDragMove({active:h,over:v}))},onDragOver(p){let{active:h,over:v}=p;i(t.onDragOver({active:h,over:v}))},onDragEnd(p){let{active:h,over:v}=p;i(t.onDragEnd({active:h,over:v}))},onDragCancel(p){let{active:h,over:v}=p;i(t.onDragCancel({active:h,over:v}))}}),[i,t])),!d)return null;const f=D.createElement(D.Fragment,null,D.createElement(mp,{id:o,value:r.draggable}),D.createElement(gp,{id:l,announcement:s}));return n?kt.createPortal(f,n):f}var be;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(be||(be={}));function fo(){}function sr(e,t){return g.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function wp(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return g.useMemo(()=>[...t].filter(o=>o!=null),[...t])}const ut=Object.freeze({x:0,y:0});function ei(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function _p(e,t){const n=co(e);if(!n)return"0 0";const o={x:(n.x-t.left)/t.width*100,y:(n.y-t.top)/t.height*100};return o.x+"% "+o.y+"%"}function ti(e,t){let{data:{value:n}}=e,{data:{value:o}}=t;return n-o}function xp(e,t){let{data:{value:n}}=e,{data:{value:o}}=t;return o-n}function Cr(e){let{left:t,top:n,height:o,width:r}=e;return[{x:t,y:n},{x:t+r,y:n},{x:t,y:n+o},{x:t+r,y:n+o}]}function ni(e,t){if(!e||e.length===0)return null;const[n]=e;return t?n[t]:n}function Hi(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const $i=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:o}=e;const r=Hi(t,t.left,t.top),i=[];for(const s of o){const{id:l}=s,d=n.get(l);if(d){const c=ei(Hi(d),r);i.push({id:l,data:{droppableContainer:s,value:c}})}}return i.sort(ti)},Ip=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:o}=e;const r=Cr(t),i=[];for(const s of o){const{id:l}=s,d=n.get(l);if(d){const c=Cr(d),f=r.reduce((h,v,y)=>h+ei(c[y],v),0),p=Number((f/4).toFixed(4));i.push({id:l,data:{droppableContainer:s,value:p}})}}return i.sort(ti)};function Rp(e,t){const n=Math.max(t.top,e.top),o=Math.max(t.left,e.left),r=Math.min(t.left+t.width,e.left+e.width),i=Math.min(t.top+t.height,e.top+e.height),s=r-o,l=i-n;if(o<r&&n<i){const d=t.width*t.height,c=e.width*e.height,f=s*l,p=f/(d+c-f);return Number(p.toFixed(4))}return 0}const Cl=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:o}=e;const r=[];for(const i of o){const{id:s}=i,l=n.get(s);if(l){const d=Rp(l,t);d>0&&r.push({id:s,data:{droppableContainer:i,value:d}})}}return r.sort(xp)};function Ap(e,t){const{top:n,left:o,bottom:r,right:i}=t;return n<=e.y&&e.y<=r&&o<=e.x&&e.x<=i}const bp=e=>{let{droppableContainers:t,droppableRects:n,pointerCoordinates:o}=e;if(!o)return[];const r=[];for(const i of t){const{id:s}=i,l=n.get(s);if(l&&Ap(o,l)){const c=Cr(l).reduce((p,h)=>p+ei(o,h),0),f=Number((c/4).toFixed(4));r.push({id:s,data:{droppableContainer:i,value:f}})}}return r.sort(ti)};function Np(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function Sl(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:ut}function Mp(e){return function(n){for(var o=arguments.length,r=new Array(o>1?o-1:0),i=1;i<o;i++)r[i-1]=arguments[i];return r.reduce((s,l)=>({...s,top:s.top+e*l.y,bottom:s.bottom+e*l.y,left:s.left+e*l.x,right:s.right+e*l.x}),{...n})}}const Pp=Mp(1);function wl(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function Dp(e,t,n){const o=wl(t);if(!o)return e;const{scaleX:r,scaleY:i,x:s,y:l}=o,d=e.left-s-(1-r)*parseFloat(n),c=e.top-l-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),f=r?e.width/r:e.width,p=i?e.height/i:e.height;return{width:f,height:p,top:c,right:d+f,bottom:c+p,left:d}}const kp={ignoreTransform:!1};function rn(e,t){t===void 0&&(t=kp);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:c,transformOrigin:f}=Be(e).getComputedStyle(e);c&&(n=Dp(n,c,f))}const{top:o,left:r,width:i,height:s,bottom:l,right:d}=n;return{top:o,left:r,width:i,height:s,bottom:l,right:d}}function Bi(e){return rn(e,{ignoreTransform:!0})}function Lp(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function Up(e,t){return t===void 0&&(t=Be(e).getComputedStyle(e)),t.position==="fixed"}function Fp(e,t){t===void 0&&(t=Be(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(r=>{const i=t[r];return typeof i=="string"?n.test(i):!1})}function oi(e,t){const n=[];function o(r){if(t!=null&&n.length>=t||!r)return n;if(jr(r)&&r.scrollingElement!=null&&!n.includes(r.scrollingElement))return n.push(r.scrollingElement),n;if(!Mn(r)||yl(r)||n.includes(r))return n;const i=Be(e).getComputedStyle(r);return r!==e&&Fp(r,i)&&n.push(r),Up(r,i)?n:o(r.parentNode)}return e?o(e):n}function _l(e){const[t]=oi(e,1);return t??null}function ar(e){return!ko||!e?null:nn(e)?e:Zr(e)?jr(e)||e===on(e).scrollingElement?window:Mn(e)?e:null:null}function xl(e){return nn(e)?e.scrollX:e.scrollLeft}function Il(e){return nn(e)?e.scrollY:e.scrollTop}function Sr(e){return{x:xl(e),y:Il(e)}}var De;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(De||(De={}));function Rl(e){return!ko||!e?!1:e===document.scrollingElement}function Al(e){const t={x:0,y:0},n=Rl(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},o={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},r=e.scrollTop<=t.y,i=e.scrollLeft<=t.x,s=e.scrollTop>=o.y,l=e.scrollLeft>=o.x;return{isTop:r,isLeft:i,isBottom:s,isRight:l,maxScroll:o,minScroll:t}}const Vp={x:.2,y:.2};function Gp(e,t,n,o,r){let{top:i,left:s,right:l,bottom:d}=n;o===void 0&&(o=10),r===void 0&&(r=Vp);const{isTop:c,isBottom:f,isLeft:p,isRight:h}=Al(e),v={x:0,y:0},y={x:0,y:0},E={height:t.height*r.y,width:t.width*r.x};return!c&&i<=t.top+E.height?(v.y=De.Backward,y.y=o*Math.abs((t.top+E.height-i)/E.height)):!f&&d>=t.bottom-E.height&&(v.y=De.Forward,y.y=o*Math.abs((t.bottom-E.height-d)/E.height)),!h&&l>=t.right-E.width?(v.x=De.Forward,y.x=o*Math.abs((t.right-E.width-l)/E.width)):!p&&s<=t.left+E.width&&(v.x=De.Backward,y.x=o*Math.abs((t.left+E.width-s)/E.width)),{direction:v,speed:y}}function Op(e){if(e===document.scrollingElement){const{innerWidth:i,innerHeight:s}=window;return{top:0,left:0,right:i,bottom:s,width:i,height:s}}const{top:t,left:n,right:o,bottom:r}=e.getBoundingClientRect();return{top:t,left:n,right:o,bottom:r,width:e.clientWidth,height:e.clientHeight}}function bl(e){return e.reduce((t,n)=>Xt(t,Sr(n)),ut)}function Hp(e){return e.reduce((t,n)=>t+xl(n),0)}function $p(e){return e.reduce((t,n)=>t+Il(n),0)}function Nl(e,t){if(t===void 0&&(t=rn),!e)return;const{top:n,left:o,bottom:r,right:i}=t(e);_l(e)&&(r<=0||i<=0||n>=window.innerHeight||o>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const Bp=[["x",["left","right"],Hp],["y",["top","bottom"],$p]];class ri{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const o=oi(n),r=bl(o);this.rect={...t},this.width=t.width,this.height=t.height;for(const[i,s,l]of Bp)for(const d of s)Object.defineProperty(this,d,{get:()=>{const c=l(o),f=r[i]-c;return this.rect[d]+f},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Tn{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var o;return(o=this.target)==null?void 0:o.removeEventListener(...n)})},this.target=t}add(t,n,o){var r;(r=this.target)==null||r.addEventListener(t,n,o),this.listeners.push([t,n,o])}}function qp(e){const{EventTarget:t}=Be(e);return e instanceof t?e:on(e)}function lr(e,t){const n=Math.abs(e.x),o=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+o**2)>t:"x"in t&&"y"in t?n>t.x&&o>t.y:"x"in t?n>t.x:"y"in t?o>t.y:!1}var Ke;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Ke||(Ke={}));function qi(e){e.preventDefault()}function zp(e){e.stopPropagation()}var ne;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(ne||(ne={}));const Ml={start:[ne.Space,ne.Enter],cancel:[ne.Esc],end:[ne.Space,ne.Enter,ne.Tab]},Jp=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case ne.Right:return{...n,x:n.x+25};case ne.Left:return{...n,x:n.x-25};case ne.Down:return{...n,y:n.y+25};case ne.Up:return{...n,y:n.y-25}}};class ii{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new Tn(on(n)),this.windowListeners=new Tn(Be(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Ke.Resize,this.handleCancel),this.windowListeners.add(Ke.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Ke.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,o=t.node.current;o&&Nl(o),n(ut)}handleKeyDown(t){if(Uo(t)){const{active:n,context:o,options:r}=this.props,{keyboardCodes:i=Ml,coordinateGetter:s=Jp,scrollBehavior:l="smooth"}=r,{code:d}=t;if(i.end.includes(d)){this.handleEnd(t);return}if(i.cancel.includes(d)){this.handleCancel(t);return}const{collisionRect:c}=o.current,f=c?{x:c.left,y:c.top}:ut;this.referenceCoordinates||(this.referenceCoordinates=f);const p=s(t,{active:n,context:o.current,currentCoordinates:f});if(p){const h=uo(p,f),v={x:0,y:0},{scrollableAncestors:y}=o.current;for(const E of y){const T=t.code,{isTop:C,isRight:x,isLeft:_,isBottom:w,maxScroll:R,minScroll:S}=Al(E),I=Op(E),b={x:Math.min(T===ne.Right?I.right-I.width/2:I.right,Math.max(T===ne.Right?I.left:I.left+I.width/2,p.x)),y:Math.min(T===ne.Down?I.bottom-I.height/2:I.bottom,Math.max(T===ne.Down?I.top:I.top+I.height/2,p.y))},A=T===ne.Right&&!x||T===ne.Left&&!_,N=T===ne.Down&&!w||T===ne.Up&&!C;if(A&&b.x!==p.x){const P=E.scrollLeft+h.x,O=T===ne.Right&&P<=R.x||T===ne.Left&&P>=S.x;if(O&&!h.y){E.scrollTo({left:P,behavior:l});return}O?v.x=E.scrollLeft-P:v.x=T===ne.Right?E.scrollLeft-R.x:E.scrollLeft-S.x,v.x&&E.scrollBy({left:-v.x,behavior:l});break}else if(N&&b.y!==p.y){const P=E.scrollTop+h.y,O=T===ne.Down&&P<=R.y||T===ne.Up&&P>=S.y;if(O&&!h.x){E.scrollTo({top:P,behavior:l});return}O?v.y=E.scrollTop-P:v.y=T===ne.Down?E.scrollTop-R.y:E.scrollTop-S.y,v.y&&E.scrollBy({top:-v.y,behavior:l});break}}this.handleMove(t,Xt(uo(p,this.referenceCoordinates),v))}}}handleMove(t,n){const{onMove:o}=this.props;t.preventDefault(),o(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}ii.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:o=Ml,onActivation:r}=t,{active:i}=n;const{code:s}=e.nativeEvent;if(o.start.includes(s)){const l=i.activatorNode.current;return l&&e.target!==l?!1:(e.preventDefault(),r==null||r({event:e.nativeEvent}),!0)}return!1}}];function zi(e){return!!(e&&"distance"in e)}function Ji(e){return!!(e&&"delay"in e)}class si{constructor(t,n,o){var r;o===void 0&&(o=qp(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:i}=t,{target:s}=i;this.props=t,this.events=n,this.document=on(s),this.documentListeners=new Tn(this.document),this.listeners=new Tn(o),this.windowListeners=new Tn(Be(s)),this.initialCoordinates=(r=co(i))!=null?r:ut,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:o}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(Ke.Resize,this.handleCancel),this.windowListeners.add(Ke.DragStart,qi),this.windowListeners.add(Ke.VisibilityChange,this.handleCancel),this.windowListeners.add(Ke.ContextMenu,qi),this.documentListeners.add(Ke.Keydown,this.handleKeydown),n){if(o!=null&&o({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Ji(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(zi(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:o,onPending:r}=this.props;r(o,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(Ke.Click,zp,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Ke.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:o,initialCoordinates:r,props:i}=this,{onMove:s,options:{activationConstraint:l}}=i;if(!r)return;const d=(n=co(t))!=null?n:ut,c=uo(r,d);if(!o&&l){if(zi(l)){if(l.tolerance!=null&&lr(c,l.tolerance))return this.handleCancel();if(lr(c,l.distance))return this.handleStart()}if(Ji(l)&&lr(c,l.tolerance))return this.handleCancel();this.handlePending(l,c);return}t.cancelable&&t.preventDefault(),s(d)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===ne.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const Wp={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Pl extends si{constructor(t){const{event:n}=t,o=on(n.target);super(t,Wp,o)}}Pl.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:o}=t;return!n.isPrimary||n.button!==0?!1:(o==null||o({event:n}),!0)}}];const Yp={move:{name:"mousemove"},end:{name:"mouseup"}};var wr;(function(e){e[e.RightClick=2]="RightClick"})(wr||(wr={}));class Dl extends si{constructor(t){super(t,Yp,on(t.event.target))}}Dl.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:o}=t;return n.button===wr.RightClick?!1:(o==null||o({event:n}),!0)}}];const ur={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class kl extends si{constructor(t){super(t,ur)}static setup(){return window.addEventListener(ur.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(ur.move.name,t)};function t(){}}}kl.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:o}=t;const{touches:r}=n;return r.length>1?!1:(o==null||o({event:n}),!0)}}];var Cn;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Cn||(Cn={}));var po;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(po||(po={}));function Kp(e){let{acceleration:t,activator:n=Cn.Pointer,canScroll:o,draggingRect:r,enabled:i,interval:s=5,order:l=po.TreeOrder,pointerCoordinates:d,scrollableAncestors:c,scrollableAncestorRects:f,delta:p,threshold:h}=e;const v=Qp({delta:p,disabled:!i}),[y,E]=cp(),T=g.useRef({x:0,y:0}),C=g.useRef({x:0,y:0}),x=g.useMemo(()=>{switch(n){case Cn.Pointer:return d?{top:d.y,bottom:d.y,left:d.x,right:d.x}:null;case Cn.DraggableRect:return r}},[n,r,d]),_=g.useRef(null),w=g.useCallback(()=>{const S=_.current;if(!S)return;const I=T.current.x*C.current.x,b=T.current.y*C.current.y;S.scrollBy(I,b)},[]),R=g.useMemo(()=>l===po.TreeOrder?[...c].reverse():c,[l,c]);g.useEffect(()=>{if(!i||!c.length||!x){E();return}for(const S of R){if((o==null?void 0:o(S))===!1)continue;const I=c.indexOf(S),b=f[I];if(!b)continue;const{direction:A,speed:N}=Gp(S,b,x,t,h);for(const P of["x","y"])v[P][A[P]]||(N[P]=0,A[P]=0);if(N.x>0||N.y>0){E(),_.current=S,y(w,s),T.current=N,C.current=A;return}}T.current={x:0,y:0},C.current={x:0,y:0},E()},[t,w,o,E,i,s,JSON.stringify(x),JSON.stringify(v),y,c,R,f,JSON.stringify(h)])}const Xp={x:{[De.Backward]:!1,[De.Forward]:!1},y:{[De.Backward]:!1,[De.Forward]:!1}};function Qp(e){let{delta:t,disabled:n}=e;const o=lo(t);return Pn(r=>{if(n||!o||!r)return Xp;const i={x:Math.sign(t.x-o.x),y:Math.sign(t.y-o.y)};return{x:{[De.Backward]:r.x[De.Backward]||i.x===-1,[De.Forward]:r.x[De.Forward]||i.x===1},y:{[De.Backward]:r.y[De.Backward]||i.y===-1,[De.Forward]:r.y[De.Forward]||i.y===1}}},[n,t,o])}function Zp(e,t){const n=t!=null?e.get(t):void 0,o=n?n.node.current:null;return Pn(r=>{var i;return t==null?null:(i=o??r)!=null?i:null},[o,t])}function jp(e,t){return g.useMemo(()=>e.reduce((n,o)=>{const{sensor:r}=o,i=r.activators.map(s=>({eventName:s.eventName,handler:t(s.handler,o)}));return[...n,...i]},[]),[e,t])}var jt;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(jt||(jt={}));var _r;(function(e){e.Optimized="optimized"})(_r||(_r={}));const Wi=new Map;function eh(e,t){let{dragging:n,dependencies:o,config:r}=t;const[i,s]=g.useState(null),{frequency:l,measure:d,strategy:c}=r,f=g.useRef(e),p=T(),h=In(p),v=g.useCallback(function(C){C===void 0&&(C=[]),!h.current&&s(x=>x===null?C:x.concat(C.filter(_=>!x.includes(_))))},[h]),y=g.useRef(null),E=Pn(C=>{if(p&&!n)return Wi;if(!C||C===Wi||f.current!==e||i!=null){const x=new Map;for(let _ of e){if(!_)continue;if(i&&i.length>0&&!i.includes(_.id)&&_.rect.current){x.set(_.id,_.rect.current);continue}const w=_.node.current,R=w?new ri(d(w),w):null;_.rect.current=R,R&&x.set(_.id,R)}return x}return C},[e,i,n,p,d]);return g.useEffect(()=>{f.current=e},[e]),g.useEffect(()=>{p||v()},[n,p]),g.useEffect(()=>{i&&i.length>0&&s(null)},[JSON.stringify(i)]),g.useEffect(()=>{p||typeof l!="number"||y.current!==null||(y.current=setTimeout(()=>{v(),y.current=null},l))},[l,p,v,...o]),{droppableRects:E,measureDroppableContainers:v,measuringScheduled:i!=null};function T(){switch(c){case jt.Always:return!1;case jt.BeforeDragging:return n;default:return!n}}}function ai(e,t){return Pn(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function th(e,t){return ai(e,t)}function nh(e){let{callback:t,disabled:n}=e;const o=Lo(t),r=g.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(o)},[o,n]);return g.useEffect(()=>()=>r==null?void 0:r.disconnect(),[r]),r}function Fo(e){let{callback:t,disabled:n}=e;const o=Lo(t),r=g.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(o)},[n]);return g.useEffect(()=>()=>r==null?void 0:r.disconnect(),[r]),r}function oh(e){return new ri(rn(e),e)}function Yi(e,t,n){t===void 0&&(t=oh);const[o,r]=g.useState(null);function i(){r(d=>{if(!e)return null;if(e.isConnected===!1){var c;return(c=d??n)!=null?c:null}const f=t(e);return JSON.stringify(d)===JSON.stringify(f)?d:f})}const s=nh({callback(d){if(e)for(const c of d){const{type:f,target:p}=c;if(f==="childList"&&p instanceof HTMLElement&&p.contains(e)){i();break}}}}),l=Fo({callback:i});return lt(()=>{i(),e?(l==null||l.observe(e),s==null||s.observe(document.body,{childList:!0,subtree:!0})):(l==null||l.disconnect(),s==null||s.disconnect())},[e]),o}function rh(e){const t=ai(e);return Sl(e,t)}const Ki=[];function ih(e){const t=g.useRef(e),n=Pn(o=>e?o&&o!==Ki&&e&&t.current&&e.parentNode===t.current.parentNode?o:oi(e):Ki,[e]);return g.useEffect(()=>{t.current=e},[e]),n}function sh(e){const[t,n]=g.useState(null),o=g.useRef(e),r=g.useCallback(i=>{const s=ar(i.target);s&&n(l=>l?(l.set(s,Sr(s)),new Map(l)):null)},[]);return g.useEffect(()=>{const i=o.current;if(e!==i){s(i);const l=e.map(d=>{const c=ar(d);return c?(c.addEventListener("scroll",r,{passive:!0}),[c,Sr(c)]):null}).filter(d=>d!=null);n(l.length?new Map(l):null),o.current=e}return()=>{s(e),s(i)};function s(l){l.forEach(d=>{const c=ar(d);c==null||c.removeEventListener("scroll",r)})}},[r,e]),g.useMemo(()=>e.length?t?Array.from(t.values()).reduce((i,s)=>Xt(i,s),ut):bl(e):ut,[e,t])}function Xi(e,t){t===void 0&&(t=[]);const n=g.useRef(null);return g.useEffect(()=>{n.current=null},t),g.useEffect(()=>{const o=e!==ut;o&&!n.current&&(n.current=e),!o&&n.current&&(n.current=null)},[e]),n.current?uo(e,n.current):ut}function ah(e){g.useEffect(()=>{if(!ko)return;const t=e.map(n=>{let{sensor:o}=n;return o.setup==null?void 0:o.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function lh(e,t){return g.useMemo(()=>e.reduce((n,o)=>{let{eventName:r,handler:i}=o;return n[r]=s=>{i(s,t)},n},{}),[e,t])}function Ll(e){return g.useMemo(()=>e?Lp(e):null,[e])}const Qi=[];function uh(e,t){t===void 0&&(t=rn);const[n]=e,o=Ll(n?Be(n):null),[r,i]=g.useState(Qi);function s(){i(()=>e.length?e.map(d=>Rl(d)?o:new ri(t(d),d)):Qi)}const l=Fo({callback:s});return lt(()=>{l==null||l.disconnect(),s(),e.forEach(d=>l==null?void 0:l.observe(d))},[e]),r}function Ul(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Mn(t)?t:e}function ch(e){let{measure:t}=e;const[n,o]=g.useState(null),r=g.useCallback(c=>{for(const{target:f}of c)if(Mn(f)){o(p=>{const h=t(f);return p?{...p,width:h.width,height:h.height}:h});break}},[t]),i=Fo({callback:r}),s=g.useCallback(c=>{const f=Ul(c);i==null||i.disconnect(),f&&(i==null||i.observe(f)),o(f?t(f):null)},[t,i]),[l,d]=ao(s);return g.useMemo(()=>({nodeRef:l,rect:n,setRef:d}),[n,l,d])}const dh=[{sensor:Pl,options:{}},{sensor:ii,options:{}}],fh={current:{}},no={draggable:{measure:Bi},droppable:{measure:Bi,strategy:jt.WhileDragging,frequency:_r.Optimized},dragOverlay:{measure:rn}};class Sn extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,o;return(n=(o=this.get(t))==null?void 0:o.node.current)!=null?n:void 0}}const ph={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Sn,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:fo},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:no,measureDroppableContainers:fo,windowRect:null,measuringScheduled:!1},Fl={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:fo,draggableNodes:new Map,over:null,measureDroppableContainers:fo},kn=g.createContext(Fl),Vl=g.createContext(ph);function hh(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Sn}}}function mh(e,t){switch(t.type){case be.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case be.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case be.DragEnd:case be.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case be.RegisterDroppable:{const{element:n}=t,{id:o}=n,r=new Sn(e.droppable.containers);return r.set(o,n),{...e,droppable:{...e.droppable,containers:r}}}case be.SetDroppableDisabled:{const{id:n,key:o,disabled:r}=t,i=e.droppable.containers.get(n);if(!i||o!==i.key)return e;const s=new Sn(e.droppable.containers);return s.set(n,{...i,disabled:r}),{...e,droppable:{...e.droppable,containers:s}}}case be.UnregisterDroppable:{const{id:n,key:o}=t,r=e.droppable.containers.get(n);if(!r||o!==r.key)return e;const i=new Sn(e.droppable.containers);return i.delete(n),{...e,droppable:{...e.droppable,containers:i}}}default:return e}}function gh(e){let{disabled:t}=e;const{active:n,activatorEvent:o,draggableNodes:r}=g.useContext(kn),i=lo(o),s=lo(n==null?void 0:n.id);return g.useEffect(()=>{if(!t&&!o&&i&&s!=null){if(!Uo(i)||document.activeElement===i.target)return;const l=r.get(s);if(!l)return;const{activatorNode:d,node:c}=l;if(!d.current&&!c.current)return;requestAnimationFrame(()=>{for(const f of[d.current,c.current]){if(!f)continue;const p=pp(f);if(p){p.focus();break}}})}},[o,t,r,s,i]),null}function Gl(e,t){let{transform:n,...o}=t;return e!=null&&e.length?e.reduce((r,i)=>i({transform:r,...o}),n):n}function vh(e){return g.useMemo(()=>({draggable:{...no.draggable,...e==null?void 0:e.draggable},droppable:{...no.droppable,...e==null?void 0:e.droppable},dragOverlay:{...no.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function yh(e){let{activeNode:t,measure:n,initialRect:o,config:r=!0}=e;const i=g.useRef(!1),{x:s,y:l}=typeof r=="boolean"?{x:r,y:r}:r;lt(()=>{if(!s&&!l||!t){i.current=!1;return}if(i.current||!o)return;const c=t==null?void 0:t.node.current;if(!c||c.isConnected===!1)return;const f=n(c),p=Sl(f,o);if(s||(p.x=0),l||(p.y=0),i.current=!0,Math.abs(p.x)>0||Math.abs(p.y)>0){const h=_l(c);h&&h.scrollBy({top:p.y,left:p.x})}},[t,s,l,o,n])}const Vo=g.createContext({...ut,scaleX:1,scaleY:1});var xt;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(xt||(xt={}));const Eh=g.memo(function(t){var n,o,r,i;let{id:s,accessibility:l,autoScroll:d=!0,children:c,sensors:f=dh,collisionDetection:p=Cl,measuring:h,modifiers:v,...y}=t;const E=g.useReducer(mh,void 0,hh),[T,C]=E,[x,_]=Ep(),[w,R]=g.useState(xt.Uninitialized),S=w===xt.Initialized,{draggable:{active:I,nodes:b,translate:A},droppable:{containers:N}}=T,P=I!=null?b.get(I):null,O=g.useRef({initial:null,translated:null}),k=g.useMemo(()=>{var W;return I!=null?{id:I,data:(W=P==null?void 0:P.data)!=null?W:fh,rect:O}:null},[I,P]),G=g.useRef(null),[ee,te]=g.useState(null),[z,oe]=g.useState(null),U=In(y,Object.values(y)),ae=Dn("DndDescribedBy",s),Ee=g.useMemo(()=>N.getEnabled(),[N]),M=vh(h),{droppableRects:V,measureDroppableContainers:$,measuringScheduled:F}=eh(Ee,{dragging:S,dependencies:[A.x,A.y],config:M.droppable}),B=Zp(b,I),Q=g.useMemo(()=>z?co(z):null,[z]),ie=pe(),j=th(B,M.draggable.measure);yh({activeNode:I!=null?b.get(I):null,config:ie.layoutShiftCompensation,initialRect:j,measure:M.draggable.measure});const Z=Yi(B,M.draggable.measure,j),Ve=Yi(B?B.parentElement:null),Ge=g.useRef({activatorEvent:null,active:null,activeNode:B,collisionRect:null,collisions:null,droppableRects:V,draggableNodes:b,draggingNode:null,draggingNodeRect:null,droppableContainers:N,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),ot=N.getNodeFor((n=Ge.current.over)==null?void 0:n.id),q=ch({measure:M.dragOverlay.measure}),rt=(o=q.nodeRef.current)!=null?o:B,it=S?(r=q.rect)!=null?r:Z:null,Ct=!!(q.nodeRef.current&&q.rect),Ht=rh(Ct?null:Z),St=Ll(rt?Be(rt):null),Le=ih(S?ot??B:null),ft=uh(Le),wt=Gl(v,{transform:{x:A.x-Ht.x,y:A.y-Ht.y,scaleX:1,scaleY:1},activatorEvent:z,active:k,activeNodeRect:Z,containerNodeRect:Ve,draggingNodeRect:it,over:Ge.current.over,overlayNodeRect:q.rect,scrollableAncestors:Le,scrollableAncestorRects:ft,windowRect:St}),pt=Q?Xt(Q,A):null,$t=sh(Le),Bt=Xi($t),H=Xi($t,[Z]),Y=Xt(wt,Bt),le=it?Pp(it,wt):null,ue=k&&le?p({active:k,collisionRect:le,droppableRects:V,droppableContainers:Ee,pointerCoordinates:pt}):null,de=ni(ue,"id"),[_e,ze]=g.useState(null),On=Ct?wt:Xt(wt,H),tr=Np(On,(i=_e==null?void 0:_e.rect)!=null?i:null,Z),un=g.useRef(null),Hn=g.useCallback((W,re)=>{let{sensor:he,options:Te}=re;if(G.current==null)return;const xe=b.get(G.current);if(!xe)return;const ge=W.nativeEvent,Pe=new he({active:G.current,activeNode:xe,event:ge,options:Te,context:Ge,onAbort(me){if(!b.get(me))return;const{onDragAbort:We}=U.current,gt={id:me};We==null||We(gt),x({type:"onDragAbort",event:gt})},onPending(me,Je,We,gt){if(!b.get(me))return;const{onDragPending:dn}=U.current,_t={id:me,constraint:Je,initialCoordinates:We,offset:gt};dn==null||dn(_t),x({type:"onDragPending",event:_t})},onStart(me){const Je=G.current;if(Je==null)return;const We=b.get(Je);if(!We)return;const{onDragStart:gt}=U.current,cn={activatorEvent:ge,active:{id:Je,data:We.data,rect:O}};kt.unstable_batchedUpdates(()=>{gt==null||gt(cn),R(xt.Initializing),C({type:be.DragStart,initialCoordinates:me,active:Je}),x({type:"onDragStart",event:cn}),te(un.current),oe(ge)})},onMove(me){C({type:be.DragMove,coordinates:me})},onEnd:Oe(be.DragEnd),onCancel:Oe(be.DragCancel)});un.current=Pe;function Oe(me){return async function(){const{active:We,collisions:gt,over:cn,scrollAdjustedTranslate:dn}=Ge.current;let _t=null;if(We&&dn){const{cancelDrop:fn}=U.current;_t={activatorEvent:ge,active:We,collisions:gt,delta:dn,over:cn},me===be.DragEnd&&typeof fn=="function"&&await Promise.resolve(fn(_t))&&(me=be.DragCancel)}G.current=null,kt.unstable_batchedUpdates(()=>{C({type:me}),R(xt.Uninitialized),ze(null),te(null),oe(null),un.current=null;const fn=me===be.DragEnd?"onDragEnd":"onDragCancel";if(_t){const or=U.current[fn];or==null||or(_t),x({type:fn,event:_t})}})}}},[b]),nr=g.useCallback((W,re)=>(he,Te)=>{const xe=he.nativeEvent,ge=b.get(Te);if(G.current!==null||!ge||xe.dndKit||xe.defaultPrevented)return;const Pe={active:ge};W(he,re.options,Pe)===!0&&(xe.dndKit={capturedBy:re.sensor},G.current=Te,Hn(he,re))},[b,Hn]),$n=jp(f,nr);ah(f),lt(()=>{Z&&w===xt.Initializing&&R(xt.Initialized)},[Z,w]),g.useEffect(()=>{const{onDragMove:W}=U.current,{active:re,activatorEvent:he,collisions:Te,over:xe}=Ge.current;if(!re||!he)return;const ge={active:re,activatorEvent:he,collisions:Te,delta:{x:Y.x,y:Y.y},over:xe};kt.unstable_batchedUpdates(()=>{W==null||W(ge),x({type:"onDragMove",event:ge})})},[Y.x,Y.y]),g.useEffect(()=>{const{active:W,activatorEvent:re,collisions:he,droppableContainers:Te,scrollAdjustedTranslate:xe}=Ge.current;if(!W||G.current==null||!re||!xe)return;const{onDragOver:ge}=U.current,Pe=Te.get(de),Oe=Pe&&Pe.rect.current?{id:Pe.id,rect:Pe.rect.current,data:Pe.data,disabled:Pe.disabled}:null,me={active:W,activatorEvent:re,collisions:he,delta:{x:xe.x,y:xe.y},over:Oe};kt.unstable_batchedUpdates(()=>{ze(Oe),ge==null||ge(me),x({type:"onDragOver",event:me})})},[de]),lt(()=>{Ge.current={activatorEvent:z,active:k,activeNode:B,collisionRect:le,collisions:ue,droppableRects:V,draggableNodes:b,draggingNode:rt,draggingNodeRect:it,droppableContainers:N,over:_e,scrollableAncestors:Le,scrollAdjustedTranslate:Y},O.current={initial:it,translated:le}},[k,B,ue,le,b,rt,it,V,N,_e,Le,Y]),Kp({...ie,delta:A,draggingRect:le,pointerCoordinates:pt,scrollableAncestors:Le,scrollableAncestorRects:ft});const J=g.useMemo(()=>({active:k,activeNode:B,activeNodeRect:Z,activatorEvent:z,collisions:ue,containerNodeRect:Ve,dragOverlay:q,draggableNodes:b,droppableContainers:N,droppableRects:V,over:_e,measureDroppableContainers:$,scrollableAncestors:Le,scrollableAncestorRects:ft,measuringConfiguration:M,measuringScheduled:F,windowRect:St}),[k,B,Z,z,ue,Ve,q,b,N,V,_e,$,Le,ft,M,F,St]),ce=g.useMemo(()=>({activatorEvent:z,activators:$n,active:k,activeNodeRect:Z,ariaDescribedById:{draggable:ae},dispatch:C,draggableNodes:b,over:_e,measureDroppableContainers:$}),[z,$n,k,Z,C,ae,b,_e,$]);return D.createElement(Tl.Provider,{value:_},D.createElement(kn.Provider,{value:ce},D.createElement(Vl.Provider,{value:J},D.createElement(Vo.Provider,{value:tr},c)),D.createElement(gh,{disabled:(l==null?void 0:l.restoreFocus)===!1})),D.createElement(Sp,{...l,hiddenTextDescribedById:ae}));function pe(){const W=(ee==null?void 0:ee.autoScrollEnabled)===!1,re=typeof d=="object"?d.enabled===!1:d===!1,he=S&&!W&&!re;return typeof d=="object"?{...d,enabled:he}:{enabled:he}}}),Th=g.createContext(null),Zi="button",Ch="Draggable";function Sh(e){let{id:t,data:n,disabled:o=!1,attributes:r}=e;const i=Dn(Ch),{activators:s,activatorEvent:l,active:d,activeNodeRect:c,ariaDescribedById:f,draggableNodes:p,over:h}=g.useContext(kn),{role:v=Zi,roleDescription:y="draggable",tabIndex:E=0}=r??{},T=(d==null?void 0:d.id)===t,C=g.useContext(T?Vo:Th),[x,_]=ao(),[w,R]=ao(),S=lh(s,t),I=In(n);lt(()=>(p.set(t,{id:t,key:i,node:x,activatorNode:w,data:I}),()=>{const A=p.get(t);A&&A.key===i&&p.delete(t)}),[p,t]);const b=g.useMemo(()=>({role:v,tabIndex:E,"aria-disabled":o,"aria-pressed":T&&v===Zi?!0:void 0,"aria-roledescription":y,"aria-describedby":f.draggable}),[o,v,E,T,y,f.draggable]);return{active:d,activatorEvent:l,activeNodeRect:c,attributes:b,isDragging:T,listeners:o?void 0:S,node:x,over:h,setNodeRef:_,setActivatorNodeRef:R,transform:C}}function Ol(){return g.useContext(Vl)}const wh="Droppable",_h={timeout:25};function Hl(e){let{data:t,disabled:n=!1,id:o,resizeObserverConfig:r}=e;const i=Dn(wh),{active:s,dispatch:l,over:d,measureDroppableContainers:c}=g.useContext(kn),f=g.useRef({disabled:n}),p=g.useRef(!1),h=g.useRef(null),v=g.useRef(null),{disabled:y,updateMeasurementsFor:E,timeout:T}={..._h,...r},C=In(E??o),x=g.useCallback(()=>{if(!p.current){p.current=!0;return}v.current!=null&&clearTimeout(v.current),v.current=setTimeout(()=>{c(Array.isArray(C.current)?C.current:[C.current]),v.current=null},T)},[T]),_=Fo({callback:x,disabled:y||!s}),w=g.useCallback((b,A)=>{_&&(A&&(_.unobserve(A),p.current=!1),b&&_.observe(b))},[_]),[R,S]=ao(w),I=In(t);return g.useEffect(()=>{!_||!R.current||(_.disconnect(),p.current=!1,_.observe(R.current))},[R,_]),g.useEffect(()=>(l({type:be.RegisterDroppable,element:{id:o,key:i,disabled:n,node:R,rect:h,data:I}}),()=>l({type:be.UnregisterDroppable,key:i,id:o})),[o]),g.useEffect(()=>{n!==f.current.disabled&&(l({type:be.SetDroppableDisabled,id:o,key:i,disabled:n}),f.current.disabled=n)},[o,i,n,l]),{active:s,rect:h,isOver:(d==null?void 0:d.id)===o,node:R,over:d,setNodeRef:S}}function xh(e){let{animation:t,children:n}=e;const[o,r]=g.useState(null),[i,s]=g.useState(null),l=lo(n);return!n&&!o&&l&&r(l),lt(()=>{if(!i)return;const d=o==null?void 0:o.key,c=o==null?void 0:o.props.id;if(d==null||c==null){r(null);return}Promise.resolve(t(c,i)).then(()=>{r(null)})},[t,o,i]),D.createElement(D.Fragment,null,n,o?g.cloneElement(o,{ref:s}):null)}const Ih={x:0,y:0,scaleX:1,scaleY:1};function Rh(e){let{children:t}=e;return D.createElement(kn.Provider,{value:Fl},D.createElement(Vo.Provider,{value:Ih},t))}const Ah={position:"fixed",touchAction:"none"},bh=e=>Uo(e)?"transform 250ms ease":void 0,Nh=g.forwardRef((e,t)=>{let{as:n,activatorEvent:o,adjustScale:r,children:i,className:s,rect:l,style:d,transform:c,transition:f=bh}=e;if(!l)return null;const p=r?c:{...c,scaleX:1,scaleY:1},h={...Ah,width:l.width,height:l.height,top:l.top,left:l.left,transform:At.Transform.toString(p),transformOrigin:r&&o?_p(o,l):void 0,transition:typeof f=="function"?f(o):f,...d};return D.createElement(n,{className:s,style:h,ref:t},i)}),$l=e=>t=>{let{active:n,dragOverlay:o}=t;const r={},{styles:i,className:s}=e;if(i!=null&&i.active)for(const[l,d]of Object.entries(i.active))d!==void 0&&(r[l]=n.node.style.getPropertyValue(l),n.node.style.setProperty(l,d));if(i!=null&&i.dragOverlay)for(const[l,d]of Object.entries(i.dragOverlay))d!==void 0&&o.node.style.setProperty(l,d);return s!=null&&s.active&&n.node.classList.add(s.active),s!=null&&s.dragOverlay&&o.node.classList.add(s.dragOverlay),function(){for(const[d,c]of Object.entries(r))n.node.style.setProperty(d,c);s!=null&&s.active&&n.node.classList.remove(s.active)}},Mh=e=>{let{transform:{initial:t,final:n}}=e;return[{transform:At.Transform.toString(t)},{transform:At.Transform.toString(n)}]},Ph={duration:250,easing:"ease",keyframes:Mh,sideEffects:$l({styles:{active:{opacity:"0"}}})};function Dh(e){let{config:t,draggableNodes:n,droppableContainers:o,measuringConfiguration:r}=e;return Lo((i,s)=>{if(t===null)return;const l=n.get(i);if(!l)return;const d=l.node.current;if(!d)return;const c=Ul(s);if(!c)return;const{transform:f}=Be(s).getComputedStyle(s),p=wl(f);if(!p)return;const h=typeof t=="function"?t:kh(t);return Nl(d,r.draggable.measure),h({active:{id:i,data:l.data,node:d,rect:r.draggable.measure(d)},draggableNodes:n,dragOverlay:{node:s,rect:r.dragOverlay.measure(c)},droppableContainers:o,measuringConfiguration:r,transform:p})})}function kh(e){const{duration:t,easing:n,sideEffects:o,keyframes:r}={...Ph,...e};return i=>{let{active:s,dragOverlay:l,transform:d,...c}=i;if(!t)return;const f={x:l.rect.left-s.rect.left,y:l.rect.top-s.rect.top},p={scaleX:d.scaleX!==1?s.rect.width*d.scaleX/l.rect.width:1,scaleY:d.scaleY!==1?s.rect.height*d.scaleY/l.rect.height:1},h={x:d.x-f.x,y:d.y-f.y,...p},v=r({...c,active:s,dragOverlay:l,transform:{initial:d,final:h}}),[y]=v,E=v[v.length-1];if(JSON.stringify(y)===JSON.stringify(E))return;const T=o==null?void 0:o({active:s,dragOverlay:l,...c}),C=l.node.animate(v,{duration:t,easing:n,fill:"forwards"});return new Promise(x=>{C.onfinish=()=>{T==null||T(),x()}})}}let ji=0;function Lh(e){return g.useMemo(()=>{if(e!=null)return ji++,ji},[e])}const Uh=D.memo(e=>{let{adjustScale:t=!1,children:n,dropAnimation:o,style:r,transition:i,modifiers:s,wrapperElement:l="div",className:d,zIndex:c=999}=e;const{activatorEvent:f,active:p,activeNodeRect:h,containerNodeRect:v,draggableNodes:y,droppableContainers:E,dragOverlay:T,over:C,measuringConfiguration:x,scrollableAncestors:_,scrollableAncestorRects:w,windowRect:R}=Ol(),S=g.useContext(Vo),I=Lh(p==null?void 0:p.id),b=Gl(s,{activatorEvent:f,active:p,activeNodeRect:h,containerNodeRect:v,draggingNodeRect:T.rect,over:C,overlayNodeRect:T.rect,scrollableAncestors:_,scrollableAncestorRects:w,transform:S,windowRect:R}),A=ai(h),N=Dh({config:o,draggableNodes:y,droppableContainers:E,measuringConfiguration:x}),P=A?T.setRef:void 0;return D.createElement(Rh,null,D.createElement(xh,{animation:N},p&&I?D.createElement(Nh,{key:I,id:p.id,ref:P,as:l,activatorEvent:f,adjustScale:t,className:d,transition:i,rect:A,style:{zIndex:c,...r},transform:b},n):null))});function ho(e,t,n){const o=e.slice();return o.splice(n<0?o.length+n:n,0,o.splice(t,1)[0]),o}function Fh(e,t){return e.reduce((n,o,r)=>{const i=t.get(o);return i&&(n[r]=i),n},Array(e.length))}function Bn(e){return e!==null&&e>=0}function Vh(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Gh(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const qn={scaleX:1,scaleY:1},Oh=e=>{var t;let{rects:n,activeNodeRect:o,activeIndex:r,overIndex:i,index:s}=e;const l=(t=n[r])!=null?t:o;if(!l)return null;const d=Hh(n,s,r);if(s===r){const c=n[i];return c?{x:r<i?c.left+c.width-(l.left+l.width):c.left-l.left,y:0,...qn}:null}return s>r&&s<=i?{x:-l.width-d,y:0,...qn}:s<r&&s>=i?{x:l.width+d,y:0,...qn}:{x:0,y:0,...qn}};function Hh(e,t,n){const o=e[t],r=e[t-1],i=e[t+1];return!o||!r&&!i?0:n<t?r?o.left-(r.left+r.width):i.left-(o.left+o.width):i?i.left-(o.left+o.width):o.left-(r.left+r.width)}const Bl=e=>{let{rects:t,activeIndex:n,overIndex:o,index:r}=e;const i=ho(t,o,n),s=t[r],l=i[r];return!l||!s?null:{x:l.left-s.left,y:l.top-s.top,scaleX:l.width/s.width,scaleY:l.height/s.height}},zn={scaleX:1,scaleY:1},es=e=>{var t;let{activeIndex:n,activeNodeRect:o,index:r,rects:i,overIndex:s}=e;const l=(t=i[n])!=null?t:o;if(!l)return null;if(r===n){const c=i[s];return c?{x:0,y:n<s?c.top+c.height-(l.top+l.height):c.top-l.top,...zn}:null}const d=$h(i,r,n);return r>n&&r<=s?{x:0,y:-l.height-d,...zn}:r<n&&r>=s?{x:0,y:l.height+d,...zn}:{x:0,y:0,...zn}};function $h(e,t,n){const o=e[t],r=e[t-1],i=e[t+1];return o?n<t?r?o.top-(r.top+r.height):i?i.top-(o.top+o.height):0:i?i.top-(o.top+o.height):r?o.top-(r.top+r.height):0:0}const ql="Sortable",zl=D.createContext({activeIndex:-1,containerId:ql,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Bl,disabled:{draggable:!1,droppable:!1}});function ts(e){let{children:t,id:n,items:o,strategy:r=Bl,disabled:i=!1}=e;const{active:s,dragOverlay:l,droppableRects:d,over:c,measureDroppableContainers:f}=Ol(),p=Dn(ql,n),h=l.rect!==null,v=g.useMemo(()=>o.map(S=>typeof S=="object"&&"id"in S?S.id:S),[o]),y=s!=null,E=s?v.indexOf(s.id):-1,T=c?v.indexOf(c.id):-1,C=g.useRef(v),x=!Vh(v,C.current),_=T!==-1&&E===-1||x,w=Gh(i);lt(()=>{x&&y&&f(v)},[x,v,y,f]),g.useEffect(()=>{C.current=v},[v]);const R=g.useMemo(()=>({activeIndex:E,containerId:p,disabled:w,disableTransforms:_,items:v,overIndex:T,useDragOverlay:h,sortedRects:Fh(v,d),strategy:r}),[E,p,w.draggable,w.droppable,_,v,T,d,h,r]);return D.createElement(zl.Provider,{value:R},t)}const Bh=e=>{let{id:t,items:n,activeIndex:o,overIndex:r}=e;return ho(n,o,r).indexOf(t)},Jl=e=>{let{containerId:t,isSorting:n,wasDragging:o,index:r,items:i,newIndex:s,previousItems:l,previousContainerId:d,transition:c}=e;return!c||!o||l!==i&&r===s?!1:n?!0:s!==r&&t===d},qh={duration:200,easing:"ease"},Wl="transform",zh=At.Transition.toString({property:Wl,duration:0,easing:"linear"}),Jh={roleDescription:"sortable"};function Wh(e){let{disabled:t,index:n,node:o,rect:r}=e;const[i,s]=g.useState(null),l=g.useRef(n);return lt(()=>{if(!t&&n!==l.current&&o.current){const d=r.current;if(d){const c=rn(o.current,{ignoreTransform:!0}),f={x:d.left-c.left,y:d.top-c.top,scaleX:d.width/c.width,scaleY:d.height/c.height};(f.x||f.y)&&s(f)}}n!==l.current&&(l.current=n)},[t,n,o,r]),g.useEffect(()=>{i&&s(null)},[i]),i}function Yl(e){let{animateLayoutChanges:t=Jl,attributes:n,disabled:o,data:r,getNewIndex:i=Bh,id:s,strategy:l,resizeObserverConfig:d,transition:c=qh}=e;const{items:f,containerId:p,activeIndex:h,disabled:v,disableTransforms:y,sortedRects:E,overIndex:T,useDragOverlay:C,strategy:x}=g.useContext(zl),_=Yh(o,v),w=f.indexOf(s),R=g.useMemo(()=>({sortable:{containerId:p,index:w,items:f},...r}),[p,r,w,f]),S=g.useMemo(()=>f.slice(f.indexOf(s)),[f,s]),{rect:I,node:b,isOver:A,setNodeRef:N}=Hl({id:s,data:R,disabled:_.droppable,resizeObserverConfig:{updateMeasurementsFor:S,...d}}),{active:P,activatorEvent:O,activeNodeRect:k,attributes:G,setNodeRef:ee,listeners:te,isDragging:z,over:oe,setActivatorNodeRef:U,transform:ae}=Sh({id:s,data:R,attributes:{...Jh,...n},disabled:_.draggable}),Ee=up(N,ee),M=!!P,V=M&&!y&&Bn(h)&&Bn(T),$=!C&&z,F=$&&V?ae:null,Q=V?F??(l??x)({rects:E,activeNodeRect:k,activeIndex:h,overIndex:T,index:w}):null,ie=Bn(h)&&Bn(T)?i({id:s,items:f,activeIndex:h,overIndex:T}):w,j=P==null?void 0:P.id,Z=g.useRef({activeId:j,items:f,newIndex:ie,containerId:p}),Ve=f!==Z.current.items,Ge=t({active:P,containerId:p,isDragging:z,isSorting:M,id:s,index:w,items:f,newIndex:Z.current.newIndex,previousItems:Z.current.items,previousContainerId:Z.current.containerId,transition:c,wasDragging:Z.current.activeId!=null}),ot=Wh({disabled:!Ge,index:w,node:b,rect:I});return g.useEffect(()=>{M&&Z.current.newIndex!==ie&&(Z.current.newIndex=ie),p!==Z.current.containerId&&(Z.current.containerId=p),f!==Z.current.items&&(Z.current.items=f)},[M,ie,p,f]),g.useEffect(()=>{if(j===Z.current.activeId)return;if(j!=null&&Z.current.activeId==null){Z.current.activeId=j;return}const rt=setTimeout(()=>{Z.current.activeId=j},50);return()=>clearTimeout(rt)},[j]),{active:P,activeIndex:h,attributes:G,data:R,rect:I,index:w,newIndex:ie,items:f,isOver:A,isSorting:M,isDragging:z,listeners:te,node:b,overIndex:T,over:oe,setNodeRef:Ee,setActivatorNodeRef:U,setDroppableNodeRef:N,setDraggableNodeRef:ee,transform:ot??Q,transition:q()};function q(){if(ot||Ve&&Z.current.newIndex===w)return zh;if(!($&&!Uo(O)||!c)&&(M||Ge))return At.Transition.toString({...c,property:Wl})}}function Yh(e,t){var n,o;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(o=e==null?void 0:e.droppable)!=null?o:t.droppable}}ne.Down,ne.Right,ne.Up,ne.Left;const Kh=[ne.Down,ne.Right,ne.Up,ne.Left],Xh=(e,{context:{active:t,droppableRects:n,droppableContainers:o,collisionRect:r}})=>{var i;if(Kh.includes(e.code)){if(e.preventDefault(),!t||!r)return;const s=[];o.getEnabled().forEach(c=>{var h;if(!c||c!=null&&c.disabled)return;const f=n.get(c.id);if(!f)return;const p=c.data.current;if(p){const{type:v,children:y}=p;if(v==="container"&&(y==null?void 0:y.length)>0&&((h=t.data.current)==null?void 0:h.type)!=="container")return}switch(e.code){case ne.Down:r.top<f.top&&s.push(c);break;case ne.Up:r.top>f.top&&s.push(c);break;case ne.Left:r.left>=f.left+f.width&&s.push(c);break;case ne.Right:r.left+r.width<=f.left&&s.push(c);break}});const l=Ip({collisionRect:r,droppableRects:n,droppableContainers:s}),d=ni(l,"id");if(d!=null){const c=o.get(d),f=c==null?void 0:c.node.current,p=c==null?void 0:c.rect.current;if(f&&p)return c.id==="placeholder"?{x:p.left+(p.width-r.width)/2,y:p.top+(p.height-r.height)/2}:((i=c.data.current)==null?void 0:i.type)==="container"?{x:p.left+20,y:p.top+74}:{x:p.left,y:p.top}}}};var ns=1,Qh=.9,Zh=.8,jh=.17,cr=.1,dr=.999,em=.9999,tm=.99,nm=/[\\\/_+.#"@\[\(\{&]/,om=/[\\\/_+.#"@\[\(\{&]/g,rm=/[\s-]/,Kl=/[\s-]/g;function xr(e,t,n,o,r,i,s){if(i===t.length)return r===e.length?ns:tm;var l=`${r},${i}`;if(s[l]!==void 0)return s[l];for(var d=o.charAt(i),c=n.indexOf(d,r),f=0,p,h,v,y;c>=0;)p=xr(e,t,n,o,c+1,i+1,s),p>f&&(c===r?p*=ns:nm.test(e.charAt(c-1))?(p*=Zh,v=e.slice(r,c-1).match(om),v&&r>0&&(p*=Math.pow(dr,v.length))):rm.test(e.charAt(c-1))?(p*=Qh,y=e.slice(r,c-1).match(Kl),y&&r>0&&(p*=Math.pow(dr,y.length))):(p*=jh,r>0&&(p*=Math.pow(dr,c-r))),e.charAt(c)!==t.charAt(i)&&(p*=em)),(p<cr&&n.charAt(c-1)===o.charAt(i+1)||o.charAt(i+1)===o.charAt(i)&&n.charAt(c-1)!==o.charAt(i))&&(h=xr(e,t,n,o,c+1,i+2,s),h*cr>p&&(p=h*cr)),p>f&&(f=p),c=n.indexOf(d,c+1);return s[l]=f,f}function os(e){return e.toLowerCase().replace(Kl," ")}function im(e,t,n){return e=n&&n.length>0?`${e+" "+n.join(" ")}`:e,xr(e,t,os(e),os(t),0,0,{})}var Go="Dialog",[Xl]=tn(Go),[sm,ct]=Xl(Go),Ql=e=>{const{__scopeDialog:t,children:n,open:o,defaultOpen:r,onOpenChange:i,modal:s=!0}=e,l=g.useRef(null),d=g.useRef(null),[c,f]=Po({prop:o,defaultProp:r??!1,onChange:i,caller:Go});return m.jsx(sm,{scope:t,triggerRef:l,contentRef:d,contentId:Xe(),titleId:Xe(),descriptionId:Xe(),open:c,onOpenChange:f,onOpenToggle:g.useCallback(()=>f(p=>!p),[f]),modal:s,children:n})};Ql.displayName=Go;var Zl="DialogTrigger",jl=g.forwardRef((e,t)=>{const{__scopeDialog:n,...o}=e,r=ct(Zl,n),i=Ue(t,r.triggerRef);return m.jsx(fe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":ci(r.open),...o,ref:i,onClick:X(e.onClick,r.onOpenToggle)})});jl.displayName=Zl;var li="DialogPortal",[am,eu]=Xl(li,{forceMount:void 0}),tu=e=>{const{__scopeDialog:t,forceMount:n,children:o,container:r}=e,i=ct(li,t);return m.jsx(am,{scope:t,forceMount:n,children:g.Children.map(o,s=>m.jsx(tt,{present:n||i.open,children:m.jsx(rl,{asChild:!0,container:r,children:s})}))})};tu.displayName=li;var mo="DialogOverlay",nu=g.forwardRef((e,t)=>{const n=eu(mo,e.__scopeDialog),{forceMount:o=n.forceMount,...r}=e,i=ct(mo,e.__scopeDialog);return i.modal?m.jsx(tt,{present:o||i.open,children:m.jsx(um,{...r,ref:t})}):null});nu.displayName=mo;var lm=cl("DialogOverlay.RemoveScroll"),um=g.forwardRef((e,t)=>{const{__scopeDialog:n,...o}=e,r=ct(mo,n);return m.jsx(sl,{as:lm,allowPinchZoom:!0,shards:[r.contentRef],children:m.jsx(fe.div,{"data-state":ci(r.open),...o,ref:t,style:{pointerEvents:"auto",...o.style}})})}),Lt="DialogContent",ou=g.forwardRef((e,t)=>{const n=eu(Lt,e.__scopeDialog),{forceMount:o=n.forceMount,...r}=e,i=ct(Lt,e.__scopeDialog);return m.jsx(tt,{present:o||i.open,children:i.modal?m.jsx(cm,{...r,ref:t}):m.jsx(dm,{...r,ref:t})})});ou.displayName=Lt;var cm=g.forwardRef((e,t)=>{const n=ct(Lt,e.__scopeDialog),o=g.useRef(null),r=Ue(t,n.contentRef,o);return g.useEffect(()=>{const i=o.current;if(i)return il(i)},[]),m.jsx(ru,{...e,ref:r,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:X(e.onCloseAutoFocus,i=>{var s;i.preventDefault(),(s=n.triggerRef.current)==null||s.focus()}),onPointerDownOutside:X(e.onPointerDownOutside,i=>{const s=i.detail.originalEvent,l=s.button===0&&s.ctrlKey===!0;(s.button===2||l)&&i.preventDefault()}),onFocusOutside:X(e.onFocusOutside,i=>i.preventDefault())})}),dm=g.forwardRef((e,t)=>{const n=ct(Lt,e.__scopeDialog),o=g.useRef(!1),r=g.useRef(!1);return m.jsx(ru,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var s,l;(s=e.onCloseAutoFocus)==null||s.call(e,i),i.defaultPrevented||(o.current||(l=n.triggerRef.current)==null||l.focus(),i.preventDefault()),o.current=!1,r.current=!1},onInteractOutside:i=>{var d,c;(d=e.onInteractOutside)==null||d.call(e,i),i.defaultPrevented||(o.current=!0,i.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const s=i.target;((c=n.triggerRef.current)==null?void 0:c.contains(s))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&r.current&&i.preventDefault()}})}),ru=g.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:o,onOpenAutoFocus:r,onCloseAutoFocus:i,...s}=e,l=ct(Lt,n),d=g.useRef(null),c=Ue(t,d);return al(),m.jsxs(m.Fragment,{children:[m.jsx(ll,{asChild:!0,loop:!0,trapped:o,onMountAutoFocus:r,onUnmountAutoFocus:i,children:m.jsx(ul,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":ci(l.open),...s,ref:c,onDismiss:()=>l.onOpenChange(!1)})}),m.jsxs(m.Fragment,{children:[m.jsx(pm,{titleId:l.titleId}),m.jsx(mm,{contentRef:d,descriptionId:l.descriptionId})]})]})}),ui="DialogTitle",iu=g.forwardRef((e,t)=>{const{__scopeDialog:n,...o}=e,r=ct(ui,n);return m.jsx(fe.h2,{id:r.titleId,...o,ref:t})});iu.displayName=ui;var su="DialogDescription",au=g.forwardRef((e,t)=>{const{__scopeDialog:n,...o}=e,r=ct(su,n);return m.jsx(fe.p,{id:r.descriptionId,...o,ref:t})});au.displayName=su;var lu="DialogClose",fm=g.forwardRef((e,t)=>{const{__scopeDialog:n,...o}=e,r=ct(lu,n);return m.jsx(fe.button,{type:"button",...o,ref:t,onClick:X(e.onClick,()=>r.onOpenChange(!1))})});fm.displayName=lu;function ci(e){return e?"open":"closed"}var uu="DialogTitleWarning",[gI,cu]=Xd(uu,{contentName:Lt,titleName:ui,docsSlug:"dialog"}),pm=({titleId:e})=>{const t=cu(uu),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return g.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},hm="DialogDescriptionWarning",mm=({contentRef:e,descriptionId:t})=>{const o=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${cu(hm).contentName}}.`;return g.useEffect(()=>{var i;const r=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&r&&(document.getElementById(t)||console.warn(o))},[o,e,t]),null},du=Ql,gm=jl,fu=tu,pu=nu,hu=ou,vm=iu,ym=au,pn='[cmdk-group=""]',fr='[cmdk-group-items=""]',Em='[cmdk-group-heading=""]',mu='[cmdk-item=""]',rs=`${mu}:not([aria-disabled="true"])`,Ir="cmdk-item-select",zt="data-value",Tm=(e,t,n)=>im(e,t,n),gu=g.createContext(void 0),Ln=()=>g.useContext(gu),vu=g.createContext(void 0),di=()=>g.useContext(vu),yu=g.createContext(void 0),Eu=g.forwardRef((e,t)=>{let n=Jt(()=>{var M,V;return{search:"",value:(V=(M=e.value)!=null?M:e.defaultValue)!=null?V:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),o=Jt(()=>new Set),r=Jt(()=>new Map),i=Jt(()=>new Map),s=Jt(()=>new Set),l=Tu(e),{label:d,children:c,value:f,onValueChange:p,filter:h,shouldFilter:v,loop:y,disablePointerSelection:E=!1,vimBindings:T=!0,...C}=e,x=Xe(),_=Xe(),w=Xe(),R=g.useRef(null),S=Mm();Ut(()=>{if(f!==void 0){let M=f.trim();n.current.value=M,I.emit()}},[f]),Ut(()=>{S(6,k)},[]);let I=g.useMemo(()=>({subscribe:M=>(s.current.add(M),()=>s.current.delete(M)),snapshot:()=>n.current,setState:(M,V,$)=>{var F,B,Q,ie;if(!Object.is(n.current[M],V)){if(n.current[M]=V,M==="search")O(),N(),S(1,P);else if(M==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let j=document.getElementById(w);j?j.focus():(F=document.getElementById(x))==null||F.focus()}if(S(7,()=>{var j;n.current.selectedItemId=(j=G())==null?void 0:j.id,I.emit()}),$||S(5,k),((B=l.current)==null?void 0:B.value)!==void 0){let j=V??"";(ie=(Q=l.current).onValueChange)==null||ie.call(Q,j);return}}I.emit()}},emit:()=>{s.current.forEach(M=>M())}}),[]),b=g.useMemo(()=>({value:(M,V,$)=>{var F;V!==((F=i.current.get(M))==null?void 0:F.value)&&(i.current.set(M,{value:V,keywords:$}),n.current.filtered.items.set(M,A(V,$)),S(2,()=>{N(),I.emit()}))},item:(M,V)=>(o.current.add(M),V&&(r.current.has(V)?r.current.get(V).add(M):r.current.set(V,new Set([M]))),S(3,()=>{O(),N(),n.current.value||P(),I.emit()}),()=>{i.current.delete(M),o.current.delete(M),n.current.filtered.items.delete(M);let $=G();S(4,()=>{O(),($==null?void 0:$.getAttribute("id"))===M&&P(),I.emit()})}),group:M=>(r.current.has(M)||r.current.set(M,new Set),()=>{i.current.delete(M),r.current.delete(M)}),filter:()=>l.current.shouldFilter,label:d||e["aria-label"],getDisablePointerSelection:()=>l.current.disablePointerSelection,listId:x,inputId:w,labelId:_,listInnerRef:R}),[]);function A(M,V){var $,F;let B=(F=($=l.current)==null?void 0:$.filter)!=null?F:Tm;return M?B(M,n.current.search,V):0}function N(){if(!n.current.search||l.current.shouldFilter===!1)return;let M=n.current.filtered.items,V=[];n.current.filtered.groups.forEach(F=>{let B=r.current.get(F),Q=0;B.forEach(ie=>{let j=M.get(ie);Q=Math.max(j,Q)}),V.push([F,Q])});let $=R.current;ee().sort((F,B)=>{var Q,ie;let j=F.getAttribute("id"),Z=B.getAttribute("id");return((Q=M.get(Z))!=null?Q:0)-((ie=M.get(j))!=null?ie:0)}).forEach(F=>{let B=F.closest(fr);B?B.appendChild(F.parentElement===B?F:F.closest(`${fr} > *`)):$.appendChild(F.parentElement===$?F:F.closest(`${fr} > *`))}),V.sort((F,B)=>B[1]-F[1]).forEach(F=>{var B;let Q=(B=R.current)==null?void 0:B.querySelector(`${pn}[${zt}="${encodeURIComponent(F[0])}"]`);Q==null||Q.parentElement.appendChild(Q)})}function P(){let M=ee().find($=>$.getAttribute("aria-disabled")!=="true"),V=M==null?void 0:M.getAttribute(zt);I.setState("value",V||void 0)}function O(){var M,V,$,F;if(!n.current.search||l.current.shouldFilter===!1){n.current.filtered.count=o.current.size;return}n.current.filtered.groups=new Set;let B=0;for(let Q of o.current){let ie=(V=(M=i.current.get(Q))==null?void 0:M.value)!=null?V:"",j=(F=($=i.current.get(Q))==null?void 0:$.keywords)!=null?F:[],Z=A(ie,j);n.current.filtered.items.set(Q,Z),Z>0&&B++}for(let[Q,ie]of r.current)for(let j of ie)if(n.current.filtered.items.get(j)>0){n.current.filtered.groups.add(Q);break}n.current.filtered.count=B}function k(){var M,V,$;let F=G();F&&(((M=F.parentElement)==null?void 0:M.firstChild)===F&&(($=(V=F.closest(pn))==null?void 0:V.querySelector(Em))==null||$.scrollIntoView({block:"nearest"})),F.scrollIntoView({block:"nearest"}))}function G(){var M;return(M=R.current)==null?void 0:M.querySelector(`${mu}[aria-selected="true"]`)}function ee(){var M;return Array.from(((M=R.current)==null?void 0:M.querySelectorAll(rs))||[])}function te(M){let V=ee()[M];V&&I.setState("value",V.getAttribute(zt))}function z(M){var V;let $=G(),F=ee(),B=F.findIndex(ie=>ie===$),Q=F[B+M];(V=l.current)!=null&&V.loop&&(Q=B+M<0?F[F.length-1]:B+M===F.length?F[0]:F[B+M]),Q&&I.setState("value",Q.getAttribute(zt))}function oe(M){let V=G(),$=V==null?void 0:V.closest(pn),F;for(;$&&!F;)$=M>0?bm($,pn):Nm($,pn),F=$==null?void 0:$.querySelector(rs);F?I.setState("value",F.getAttribute(zt)):z(M)}let U=()=>te(ee().length-1),ae=M=>{M.preventDefault(),M.metaKey?U():M.altKey?oe(1):z(1)},Ee=M=>{M.preventDefault(),M.metaKey?te(0):M.altKey?oe(-1):z(-1)};return g.createElement(fe.div,{ref:t,tabIndex:-1,...C,"cmdk-root":"",onKeyDown:M=>{var V;(V=C.onKeyDown)==null||V.call(C,M);let $=M.nativeEvent.isComposing||M.keyCode===229;if(!(M.defaultPrevented||$))switch(M.key){case"n":case"j":{T&&M.ctrlKey&&ae(M);break}case"ArrowDown":{ae(M);break}case"p":case"k":{T&&M.ctrlKey&&Ee(M);break}case"ArrowUp":{Ee(M);break}case"Home":{M.preventDefault(),te(0);break}case"End":{M.preventDefault(),U();break}case"Enter":{M.preventDefault();let F=G();if(F){let B=new Event(Ir);F.dispatchEvent(B)}}}}},g.createElement("label",{"cmdk-label":"",htmlFor:b.inputId,id:b.labelId,style:Dm},d),Oo(e,M=>g.createElement(vu.Provider,{value:I},g.createElement(gu.Provider,{value:b},M))))}),Cm=g.forwardRef((e,t)=>{var n,o;let r=Xe(),i=g.useRef(null),s=g.useContext(yu),l=Ln(),d=Tu(e),c=(o=(n=d.current)==null?void 0:n.forceMount)!=null?o:s==null?void 0:s.forceMount;Ut(()=>{if(!c)return l.item(r,s==null?void 0:s.id)},[c]);let f=Cu(r,i,[e.value,e.children,i],e.keywords),p=di(),h=bt(S=>S.value&&S.value===f.current),v=bt(S=>c||l.filter()===!1?!0:S.search?S.filtered.items.get(r)>0:!0);g.useEffect(()=>{let S=i.current;if(!(!S||e.disabled))return S.addEventListener(Ir,y),()=>S.removeEventListener(Ir,y)},[v,e.onSelect,e.disabled]);function y(){var S,I;E(),(I=(S=d.current).onSelect)==null||I.call(S,f.current)}function E(){p.setState("value",f.current,!0)}if(!v)return null;let{disabled:T,value:C,onSelect:x,forceMount:_,keywords:w,...R}=e;return g.createElement(fe.div,{ref:vt(i,t),...R,id:r,"cmdk-item":"",role:"option","aria-disabled":!!T,"aria-selected":!!h,"data-disabled":!!T,"data-selected":!!h,onPointerMove:T||l.getDisablePointerSelection()?void 0:E,onClick:T?void 0:y},e.children)}),Sm=g.forwardRef((e,t)=>{let{heading:n,children:o,forceMount:r,...i}=e,s=Xe(),l=g.useRef(null),d=g.useRef(null),c=Xe(),f=Ln(),p=bt(v=>r||f.filter()===!1?!0:v.search?v.filtered.groups.has(s):!0);Ut(()=>f.group(s),[]),Cu(s,l,[e.value,e.heading,d]);let h=g.useMemo(()=>({id:s,forceMount:r}),[r]);return g.createElement(fe.div,{ref:vt(l,t),...i,"cmdk-group":"",role:"presentation",hidden:p?void 0:!0},n&&g.createElement("div",{ref:d,"cmdk-group-heading":"","aria-hidden":!0,id:c},n),Oo(e,v=>g.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?c:void 0},g.createElement(yu.Provider,{value:h},v))))}),wm=g.forwardRef((e,t)=>{let{alwaysRender:n,...o}=e,r=g.useRef(null),i=bt(s=>!s.search);return!n&&!i?null:g.createElement(fe.div,{ref:vt(r,t),...o,"cmdk-separator":"",role:"separator"})}),_m=g.forwardRef((e,t)=>{let{onValueChange:n,...o}=e,r=e.value!=null,i=di(),s=bt(c=>c.search),l=bt(c=>c.selectedItemId),d=Ln();return g.useEffect(()=>{e.value!=null&&i.setState("search",e.value)},[e.value]),g.createElement(fe.input,{ref:t,...o,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":d.listId,"aria-labelledby":d.labelId,"aria-activedescendant":l,id:d.inputId,type:"text",value:r?e.value:s,onChange:c=>{r||i.setState("search",c.target.value),n==null||n(c.target.value)}})}),xm=g.forwardRef((e,t)=>{let{children:n,label:o="Suggestions",...r}=e,i=g.useRef(null),s=g.useRef(null),l=bt(c=>c.selectedItemId),d=Ln();return g.useEffect(()=>{if(s.current&&i.current){let c=s.current,f=i.current,p,h=new ResizeObserver(()=>{p=requestAnimationFrame(()=>{let v=c.offsetHeight;f.style.setProperty("--cmdk-list-height",v.toFixed(1)+"px")})});return h.observe(c),()=>{cancelAnimationFrame(p),h.unobserve(c)}}},[]),g.createElement(fe.div,{ref:vt(i,t),...r,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":l,"aria-label":o,id:d.listId},Oo(e,c=>g.createElement("div",{ref:vt(s,d.listInnerRef),"cmdk-list-sizer":""},c)))}),Im=g.forwardRef((e,t)=>{let{open:n,onOpenChange:o,overlayClassName:r,contentClassName:i,container:s,...l}=e;return g.createElement(du,{open:n,onOpenChange:o},g.createElement(fu,{container:s},g.createElement(pu,{"cmdk-overlay":"",className:r}),g.createElement(hu,{"aria-label":e.label,"cmdk-dialog":"",className:i},g.createElement(Eu,{ref:t,...l}))))}),Rm=g.forwardRef((e,t)=>bt(n=>n.filtered.count===0)?g.createElement(fe.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),Am=g.forwardRef((e,t)=>{let{progress:n,children:o,label:r="Loading...",...i}=e;return g.createElement(fe.div,{ref:t,...i,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":r},Oo(e,s=>g.createElement("div",{"aria-hidden":!0},s)))}),fi=Object.assign(Eu,{List:xm,Item:Cm,Input:_m,Group:Sm,Separator:wm,Dialog:Im,Empty:Rm,Loading:Am});function bm(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return n;n=n.nextElementSibling}}function Nm(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return n;n=n.previousElementSibling}}function Tu(e){let t=g.useRef(e);return Ut(()=>{t.current=e}),t}var Ut=typeof window>"u"?g.useEffect:g.useLayoutEffect;function Jt(e){let t=g.useRef();return t.current===void 0&&(t.current=e()),t}function bt(e){let t=di(),n=()=>e(t.snapshot());return g.useSyncExternalStore(t.subscribe,n,n)}function Cu(e,t,n,o=[]){let r=g.useRef(),i=Ln();return Ut(()=>{var s;let l=(()=>{var c;for(let f of n){if(typeof f=="string")return f.trim();if(typeof f=="object"&&"current"in f)return f.current?(c=f.current.textContent)==null?void 0:c.trim():r.current}})(),d=o.map(c=>c.trim());i.value(e,l,d),(s=t.current)==null||s.setAttribute(zt,l),r.current=l}),r}var Mm=()=>{let[e,t]=g.useState(),n=Jt(()=>new Map);return Ut(()=>{n.current.forEach(o=>o()),n.current=new Map},[e]),(o,r)=>{n.current.set(o,r),t({})}};function Pm(e){let t=e.type;return typeof t=="function"?t(e.props):"render"in t?t.render(e.props):e}function Oo({asChild:e,children:t},n){return e&&g.isValidElement(t)?g.cloneElement(Pm(t),{ref:t.ref},n(t.props.children)):n(t)}var Dm={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};function km({className:e,...t}){return m.jsx(fi,{"data-slot":"command",className:ye("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",e),...t})}function Lm({className:e,...t}){return m.jsx(fi.Group,{"data-slot":"command-group",className:ye("text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",e),...t})}function Um({className:e,...t}){return m.jsx(fi.Item,{"data-slot":"command-item",className:ye("data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}function Su({className:e,type:t,...n}){return m.jsx("input",{type:t,"data-slot":"input",className:ye("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...n})}const is=e=>e.replace(/['''`]/g,"").trim().toLowerCase();function Fm({onValueChange:e,outerValue:t="",options:n,className:o=""}){const[r,i]=g.useState(""),[s,l]=g.useState(!1),[d]=Ye(),c=v=>{i(v)};g.useEffect(()=>{i(t)},[t]);const f=v=>{v.key==="Enter"&&c(r)},p=v=>{c(v)};g.useEffect(()=>{e&&e(r)},[r,e]);const h=v=>d(`task_manager.categories.${v}`);return m.jsxs("div",{className:`flex gap-1 items-center w-full ${o}`,children:[m.jsx(Su,{value:n.includes(r)?h(r):r,onChange:v=>{const y=v.target.value,E=n.find(T=>is(h(T).toLowerCase())===is(y.toLowerCase()));i(E??y)},onKeyDown:f,placeholder:d("task_manager.combobox_placeholder"),className:"text-xl"}),m.jsxs(Qd,{open:s,onOpenChange:l,children:[m.jsx(Zd,{asChild:!0,children:m.jsx("div",{children:m.jsx(we,{animValue:.9,children:m.jsx(ve,{variant:"ghost",size:"icon",children:m.jsx(op,{})})})})}),s&&m.jsx(jd,{className:"chrono-popover-content w-64 p-2",children:m.jsx(km,{className:"bg-transparent",children:m.jsx(Lm,{children:n.map((v,y)=>m.jsx(we,{animValue:.99,children:m.jsx(Um,{onSelect:()=>{p(v),l(!1)},children:h(v)})},`option-${y}`))})})})]})]})}const Vm={health:{icon:kf,color:"text-emerald-400"},finance:{icon:ap,color:"text-blue-400"},emotions:{icon:Zf,color:"text-amber-400"},relationships:{icon:wf,color:"text-rose-400"},career:{icon:Rf,color:"text-indigo-400"},spirituality:{icon:so,color:"text-violet-400"},personal_growth:{icon:Tf,color:"text-cyan-400"},hobbies:{icon:Gf,color:"text-orange-400"},leisure:{icon:Mf,color:"text-zinc-400"}},Gm={icon:ep,color:"text-indigo-400"},wu=g.forwardRef(({children:e,columns:t=1,handleProps:n,onRemove:o,label:r,placeholder:i,style:s,options:l,onValueChange:d,...c},f)=>{const[h,v]=g.useState(!1),[y,E]=g.useState(""),[T]=Ye();return m.jsxs("div",{...c,ref:f,style:{...s,"--columns":t},className:"relative",children:[r?m.jsxs("div",{className:"flex items-center justify-between mb-3 px-2 group relative z-10",children:[m.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[m.jsx(ve,{...n,variant:"ghost",size:"icon",className:"cursor-move hover:bg-white/5 hover:text-white flex-shrink-0 md:hidden h-7 w-7 text-zinc-400",children:m.jsx(io,{className:"w-3 h-3"})}),h?m.jsx(Fm,{options:l,onValueChange:E,outerValue:r}):m.jsx(m.Fragment,{children:(()=>{const C=Vm[r]||Gm,x=C.icon;return m.jsxs("label",{onDoubleClick:()=>v(!0),className:`text-sm font-medium flex items-center gap-2 ${C.color} cursor-pointer`,children:[m.jsx(x,{className:"w-4 h-4 flex-shrink-0"}),l.includes(r)?T(`task_manager.categories.${r}`):r]})})()}),m.jsx(we,{animValue:.9,hoverTypeElement:Ne.SELECT,children:m.jsx(ve,{variant:"ghost",size:"icon",className:"h-6 w-6 flex-shrink-0",onClick:()=>v(!h),children:h?m.jsx(Jf,{className:"w-3 h-3"}):m.jsx(Yf,{className:"w-3 h-3"})})})]}),!h&&m.jsxs("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity flex gap-1 flex-shrink-0",children:[o&&m.jsx(we,{animValue:.9,hoverTypeElement:Ne.SELECT_2,children:m.jsx(ve,{variant:"ghost",size:"icon",className:"h-6 w-6 p-1 text-zinc-600 hover:text-white hover:bg-white/5",onClick:o,children:m.jsx(vl,{className:"w-3 h-3"})})}),m.jsx(we,{animValue:.9,hoverTypeElement:Ne.SHIFT,className:"hidden md:block",children:m.jsx(ve,{...n,variant:"ghost",size:"icon",className:"h-6 w-6 p-1 cursor-move hover:bg-white/5 hover:text-white text-zinc-400",children:m.jsx(io,{className:"w-3 h-3"})})})]})]}):null,i?e:m.jsx("ul",{className:"space-y-[1px]",children:e}),h&&m.jsx("div",{onClick:()=>{v(!1),d&&y!==""&&d(y)},className:"fixed top-0 left-0 w-full h-full z-[1] bg-card/30"})]})}),Nt=g.forwardRef(({children:e,as:t="div",className:n,...o},r)=>{const i=g.useRef(null),s=r??i,l=Do(c=>c.setHoverWrapper),d=xn.create(t);return m.jsx(d,{ref:s,onMouseEnter:()=>l(!0),onMouseLeave:()=>{l(!1)},className:yf(n),...o,children:e})});function Om(e,t=[]){let n=[];function o(i,s){const l=g.createContext(s);l.displayName=i+"Context";const d=n.length;n=[...n,s];const c=p=>{var C;const{scope:h,children:v,...y}=p,E=((C=h==null?void 0:h[e])==null?void 0:C[d])||l,T=g.useMemo(()=>y,Object.values(y));return m.jsx(E.Provider,{value:T,children:v})};c.displayName=i+"Provider";function f(p,h){var E;const v=((E=h==null?void 0:h[e])==null?void 0:E[d])||l,y=g.useContext(v);if(y)return y;if(s!==void 0)return s;throw new Error(`\`${p}\` must be used within \`${i}\``)}return[c,f]}const r=()=>{const i=n.map(s=>g.createContext(s));return function(l){const d=(l==null?void 0:l[e])||i;return g.useMemo(()=>({[`__scope${e}`]:{...l,[e]:d}}),[l,d])}};return r.scopeName=e,[o,Hm(r,...t)]}function Hm(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const o=e.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(i){const s=o.reduce((l,{useScope:d,scopeName:c})=>{const p=d(i)[`__scope${c}`];return{...l,...p}},{});return g.useMemo(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return n.scopeName=t.scopeName,n}var $m=Symbol.for("react.lazy"),go=ol[" use ".trim().toString()];function Bm(e){return typeof e=="object"&&e!==null&&"then"in e}function _u(e){return e!=null&&typeof e=="object"&&"$$typeof"in e&&e.$$typeof===$m&&"_payload"in e&&Bm(e._payload)}function qm(e){const t=zm(e),n=g.forwardRef((o,r)=>{let{children:i,...s}=o;_u(i)&&typeof go=="function"&&(i=go(i._payload));const l=g.Children.toArray(i),d=l.find(Wm);if(d){const c=d.props.children,f=l.map(p=>p===d?g.Children.count(c)>1?g.Children.only(null):g.isValidElement(c)?c.props.children:null:p);return m.jsx(t,{...s,ref:r,children:g.isValidElement(c)?g.cloneElement(c,void 0,f):null})}return m.jsx(t,{...s,ref:r,children:i})});return n.displayName=`${e}.Slot`,n}function zm(e){const t=g.forwardRef((n,o)=>{let{children:r,...i}=n;if(_u(r)&&typeof go=="function"&&(r=go(r._payload)),g.isValidElement(r)){const s=Km(r),l=Ym(i,r.props);return r.type!==g.Fragment&&(l.ref=o?vt(o,s):s),g.cloneElement(r,l)}return g.Children.count(r)>1?g.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Jm=Symbol("radix.slottable");function Wm(e){return g.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Jm}function Ym(e,t){const n={...t};for(const o in t){const r=e[o],i=t[o];/^on[A-Z]/.test(o)?r&&i?n[o]=(...l)=>{const d=i(...l);return r(...l),d}:r&&(n[o]=r):o==="style"?n[o]={...r,...i}:o==="className"&&(n[o]=[r,i].filter(Boolean).join(" "))}return{...e,...n}}function Km(e){var o,r;let t=(o=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:o.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(r=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Xm=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],xu=Xm.reduce((e,t)=>{const n=qm(`Primitive.${t}`),o=g.forwardRef((r,i)=>{const{asChild:s,...l}=r,d=s?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),m.jsx(d,{...l,ref:i})});return o.displayName=`Primitive.${t}`,{...e,[t]:o}},{}),pi="Progress",hi=100,[Qm]=Om(pi),[Zm,jm]=Qm(pi),Iu=g.forwardRef((e,t)=>{const{__scopeProgress:n,value:o=null,max:r,getValueLabel:i=eg,...s}=e;(r||r===0)&&!ss(r)&&console.error(tg(`${r}`,"Progress"));const l=ss(r)?r:hi;o!==null&&!as(o,l)&&console.error(ng(`${o}`,"Progress"));const d=as(o,l)?o:null,c=vo(d)?i(d,l):void 0;return m.jsx(Zm,{scope:n,value:d,max:l,children:m.jsx(xu.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":vo(d)?d:void 0,"aria-valuetext":c,role:"progressbar","data-state":bu(d,l),"data-value":d??void 0,"data-max":l,...s,ref:t})})});Iu.displayName=pi;var Ru="ProgressIndicator",Au=g.forwardRef((e,t)=>{const{__scopeProgress:n,...o}=e,r=jm(Ru,n);return m.jsx(xu.div,{"data-state":bu(r.value,r.max),"data-value":r.value??void 0,"data-max":r.max,...o,ref:t})});Au.displayName=Ru;function eg(e,t){return`${Math.round(e/t*100)}%`}function bu(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function vo(e){return typeof e=="number"}function ss(e){return vo(e)&&!isNaN(e)&&e>0}function as(e,t){return vo(e)&&!isNaN(e)&&e<=t&&e>=0}function tg(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${hi}\`.`}function ng(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${hi} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var og=Iu,rg=Au;function ig({className:e,value:t,...n}){return m.jsx(og,{"data-slot":"progress",className:ye("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",e),...n,children:m.jsx(rg,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})})}const sg=e=>Jl({...e,wasDragging:!0});function ls({children:e,columns:t=1,disabled:n,id:o,items:r,placeholder:i,onAddTask:s,onAddTaskWithAI:l,style:d,options:c,templated:f,onChangeCategory:p,...h}){const{attributes:v,isDragging:y,listeners:E,setNodeRef:T,transition:C,transform:x}=Yl({id:o,data:{type:"container",children:r.map(S=>S.id)},animateLayoutChanges:sg}),[_]=Ye(),[w,R]=g.useState(0);return g.useEffect(()=>{const S=r.length,I=r.filter(A=>A.isDone).length,b=S===0?0:Math.round(I/S*100);R(b)},[r]),m.jsxs(wu,{options:c,ref:n?void 0:T,style:{...d,transition:C,transform:At.Translate.toString(x),opacity:y?.5:void 0},onValueChange:p,handleProps:{...v,...E},columns:t,...h,children:[r.length>0&&!f&&m.jsxs("div",{className:"px-4",children:[m.jsxs("div",{className:"text-xs text-muted-foreground text-center mt-1",children:[w,"%"]}),m.jsx(ig,{value:w})]}),m.jsx("ul",{className:"flex flex-col gap-1",children:e}),!i&&(s||l)&&m.jsxs("div",{className:"mt-4 flex items-center gap-2 px-2 py-1",children:[s&&m.jsx(Nt,{children:m.jsx(we,{animValue:.99,hoverTypeElement:Ne.LINK,hoverStyleElement:Me.quad,children:m.jsxs(ve,{variant:"ghost",onClick:()=>s(o),className:"h-auto py-1 px-0 text-xs font-medium text-zinc-500 hover:text-white transition-colors flex items-center gap-2",children:[m.jsx(Cf,{className:"w-3 h-3"}),_("task_manager.add")]})})}),l&&m.jsx(Nt,{children:m.jsx(we,{animValue:.99,hoverTypeElement:Ne.LINK,hoverStyleElement:Me.quad,children:m.jsx(ve,{onClick:()=>l(o),variant:"ghost",size:"icon",className:"h-6 w-6 text-indigo-400/70 hover:text-indigo-400 hover:bg-indigo-500/10 rounded-full",title:_("ai.dialog_title"),children:m.jsx(so,{className:"w-3 h-3"})})})})]})]})}const yo="void",us="placeholder",ag=({activeId:e,items:t,lastOverId:n,recentlyMovedToNewContainer:o})=>g.useCallback(i=>{var f;const s=t.map(p=>p.id);if(e&&s.includes(e))return $i({...i,droppableContainers:i.droppableContainers.filter(p=>s.includes(p.id))});const l=bp(i),d=l.length>0?l:Cl(i);let c=ni(d,"id");if(c!=null){if(c===yo)return d;const p=t.find(h=>h.id===c);return p?(p.tasks.length>0&&(c=((f=$i({...i,droppableContainers:i.droppableContainers.filter(v=>p.tasks.some(y=>y.id===v.id))})[0])==null?void 0:f.id)??c),n.current=p.id,[{id:p.id}]):(n.current=c,[{id:c}])}return o.current&&(n.current=e),n.current?[{id:n.current}]:[]},[e,t,n,o]);var Se=(e=>(e.LOW="low",e.MEDIUM="medium",e.HIGH="high",e))(Se||{});const Eo=(e,t)=>{const n=t.find(o=>o.tasks.some(r=>r.id===e));return n?n.tasks.findIndex(o=>o.id===e):-1};function lg(e,t="text"){switch(e){case Se.HIGH:return`${t}-destructive`;case Se.MEDIUM:return`${t}-accent`;case Se.LOW:return`${t}-foreground`;default:return""}}function vI(e){switch(e){case Se.HIGH:return"bg-destructive";case Se.MEDIUM:return"bg-accent";case Se.LOW:return"bg-foreground";default:return""}}function yI(e){switch(e){case Se.HIGH:return"text-foreground";case Se.MEDIUM:return"text-foreground";case Se.LOW:return"text-background";default:return""}}function ug(e){switch(e){case Se.HIGH:return"border-destructive";case Se.MEDIUM:return"border-accent";case Se.LOW:return"border-foreground";default:return""}}const cg={sideEffects:$l({styles:{active:{opacity:"0.5"}}})},Nu=g.createContext(null),Qe=e=>{const t=g.useContext(Nu);if(!t)throw new Error(" useTaskManager must be used within <TaskManagerProvider>");return Yd(t,e)},dg=({items:e,setItems:t,recentlyMovedToNewContainer:n,setActiveId:o,onDeletePlannedTask:r,onChangeTasks:i})=>{const[s,l]=g.useState(null),d=Do(E=>E.setHover),c=Qe(E=>E.playingTask),f=Qe(E=>E.stopPlayingTask);return{onDragOver:(E,T)=>{const C=T==null?void 0:T.id;if(!C||C===yo)return;const x=E.id,_=C,w=e.find(b=>b.tasks.some(A=>A.id===x)),R=e.find(b=>b.id===_||b.tasks.some(A=>A.id===_));if(!w||!R||w.id===R.id)return;const S=w.tasks.find(b=>b.id===x);if(!S)return;const I=R.tasks.findIndex(b=>b.id===_);n.current=!0,t(b=>{const A=b.map(N=>{if(N.id===w.id)return{...N,tasks:N.tasks.filter(P=>P.id!==x)};if(N.id===R.id){const P=I>=0?I+1:N.tasks.length;return{...N,tasks:[...N.tasks.slice(0,P),S,...N.tasks.slice(P)]}}return N});return i(A),A})},onDragEnd:(E,T)=>{const C=e.some(R=>R.id===E.id),x=T&&e.some(R=>R.id===T.id);if(C&&x&&T){const R=e.findIndex(I=>I.id===E.id),S=e.findIndex(I=>I.id===T.id);R!==S&&t(I=>{const b=ho(I,R,S);return i(b),b}),o(null);return}const _=e.find(R=>R.tasks.some(S=>S.id===E.id)),w=T?e.find(R=>R.tasks.some(S=>S.id===T.id)):null;if((T==null?void 0:T.id)===yo&&_){(c==null?void 0:c.id)===E.id&&f(),t(R=>{const S=R.map(I=>I.id===_.id?{...I,tasks:I.tasks.filter(b=>(b.id===E.id&&(b.isPlanned||b.isDetermined)&&(r==null||r(b.id)),b.id!==E.id))}:I);return i(S),S}),o(null);return}if(!T||!_||!w){o(null);return}if(_.id===w.id){const R=_.tasks.findIndex(I=>I.id===E.id),S=w.tasks.findIndex(I=>I.id===T.id);R!==S&&t(I=>{const b=I.map(A=>A.id===_.id?{...A,tasks:ho(A.tasks,R,S)}:A);return i(b),b})}d(!1,null,Me.circle),o(null)},onDragCancel:()=>{s&&t(s),o(null),l(null)},onDragStart:E=>{o(E.id),l(e)}}};function cs(e,t){let n;return(...o)=>{window.clearTimeout(n),n=window.setTimeout(()=>e(...o),t)}}function fg({debounce:e,scroll:t,polyfill:n,offsetSize:o}={debounce:0,scroll:!1,offsetSize:!1}){const r=n||(typeof window>"u"?class{}:window.ResizeObserver);if(!r)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[i,s]=g.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=g.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:i,orientationHandler:null}),d=e?typeof e=="number"?e:e.scroll:null,c=e?typeof e=="number"?e:e.resize:null,f=g.useRef(!1);g.useEffect(()=>(f.current=!0,()=>void(f.current=!1)));const[p,h,v]=g.useMemo(()=>{const C=()=>{if(!l.current.element)return;const{left:x,top:_,width:w,height:R,bottom:S,right:I,x:b,y:A}=l.current.element.getBoundingClientRect(),N={left:x,top:_,width:w,height:R,bottom:S,right:I,x:b,y:A};l.current.element instanceof HTMLElement&&o&&(N.height=l.current.element.offsetHeight,N.width=l.current.element.offsetWidth),Object.freeze(N),f.current&&!gg(l.current.lastBounds,N)&&s(l.current.lastBounds=N)};return[C,c?cs(C,c):C,d?cs(C,d):C]},[s,o,d,c]);function y(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(C=>C.removeEventListener("scroll",v,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null),l.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",l.current.orientationHandler))}function E(){l.current.element&&(l.current.resizeObserver=new r(v),l.current.resizeObserver.observe(l.current.element),t&&l.current.scrollContainers&&l.current.scrollContainers.forEach(C=>C.addEventListener("scroll",v,{capture:!0,passive:!0})),l.current.orientationHandler=()=>{v()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",l.current.orientationHandler))}const T=C=>{!C||C===l.current.element||(y(),l.current.element=C,l.current.scrollContainers=Mu(C),E())};return hg(v,!!t),pg(h),g.useEffect(()=>{y(),E()},[t,v,h]),g.useEffect(()=>y,[]),[T,i,p]}function pg(e){g.useEffect(()=>{const t=e;return window.addEventListener("resize",t),()=>void window.removeEventListener("resize",t)},[e])}function hg(e,t){g.useEffect(()=>{if(t){const n=e;return window.addEventListener("scroll",n,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",n,!0)}},[e,t])}function Mu(e){const t=[];if(!e||e===document.body)return t;const{overflow:n,overflowX:o,overflowY:r}=window.getComputedStyle(e);return[n,o,r].some(i=>i==="auto"||i==="scroll")&&t.push(e),[...t,...Mu(e.parentElement)]}const mg=["x","y","top","bottom","left","right","width","height"],gg=(e,t)=>mg.every(n=>e[n]===t[n]),Pu={type:"spring",stiffness:280,damping:18,mass:.3};function ds({value:e,place:t}){const n=Math.floor(e/t)%10,o=Ef(n),r=_f(o,Pu);return g.useEffect(()=>{r.set(n)},[r,n]),m.jsxs("div",{className:"relative inline-block w-[1ch] overflow-x-visible overflow-y-clip leading-none tabular-nums",children:[m.jsx("div",{className:"invisible",children:"0"}),Array.from({length:10},(i,s)=>m.jsx(vg,{mv:r,number:s},s))]})}function vg({mv:e,number:t}){const n=g.useId(),[o,r]=fg(),i=xf(e,s=>{if(!r.height)return 0;const l=s%10,d=(10+t-l)%10;let c=d*r.height;return d>5&&(c-=10*r.height),c});return r.height?m.jsx(xn.span,{style:{y:i},layoutId:`${n}-${t}`,className:"absolute inset-0 flex items-center justify-center",transition:Pu,ref:o,children:t}):m.jsx("span",{ref:o,className:"invisible absolute",children:t})}function wn({value:e,padStart:t=!1,decimalSeparator:n="."}){const o=Math.abs(e),[r,i]=o.toString().split("."),s=parseInt(r,10),d=(t&&s<10?`0${r}`:r).split(""),c=d.map((f,p)=>Math.pow(10,d.length-p-1));return m.jsxs("div",{className:"flex items-center",children:[e<0&&"-",d.map((f,p)=>m.jsx(ds,{value:s,place:c[p]},`pos-${c[p]}`)),i&&m.jsxs(m.Fragment,{children:[m.jsx("span",{children:n}),i.split("").map((f,p)=>m.jsx(ds,{value:parseInt(i,10),place:Math.pow(10,i.length-p-1)},`decimal-${p}`))]})]})}const fs=({outerTime:e,isPlay:t,revert:n=!1,tooltipText:o,className:r=""})=>{const[i,s]=g.useState(e),l=g.useRef(null),d=g.useRef(null);g.useEffect(()=>(t&&(l.current=Date.now(),d.current=setInterval(()=>{const h=Date.now(),v=Math.floor((h-(l.current??h))/1e3),y=n?e-v:e+v;s(y)},1e3)),()=>{d.current&&(clearInterval(d.current),d.current=null)}),[t,e,n]),g.useEffect(()=>{!t&&d.current&&(clearInterval(d.current),d.current=null)},[t]);const{hours:c,minutes:f}=Kr(Math.abs(i)),p=i<0;return m.jsxs(Jr,{children:[m.jsx(Wr,{asChild:!0,children:m.jsxs("div",{className:ye("flex items-center gap-0.5 font-mono text-xs relative",p?"text-destructive/70":"text-accent/70",!n&&"text-muted-foreground",r),children:[n&&p&&m.jsx("span",{className:"absolute -left-2",children:"-"}),m.jsx(wn,{value:c,padStart:!0}),m.jsx("span",{className:"text-muted-foreground",children:":"}),m.jsx(wn,{value:f,padStart:!0})]})}),o&&m.jsx(Yr,{className:"text-xs text-card",children:o})]})},To=({timeInSeconds:e,revert:t=!1,tooltipText:n,isPlanned:o=!1,className:r=""})=>{const i=e<0,{hours:s,minutes:l}=Kr(Math.abs(e));return m.jsxs(Jr,{children:[m.jsx(Wr,{asChild:!0,children:m.jsxs("div",{className:ye(`flex items-center gap-0.5 font-mono text-xs relative ${i?"text-destructive/70":"text-accent/70"} ${!t&&"text-muted-foreground"} ${o&&"text-red-400"} ${r}`),children:[t&&i&&m.jsx("span",{className:"absolute -left-2",children:"-"}),m.jsx("span",{children:String(s).padStart(2,"0")}),m.jsx("span",{className:"text-muted-foreground",children:":"}),m.jsx("span",{children:String(l).padStart(2,"0")})]})}),n&&m.jsx(Yr,{className:"text-xs text-card",children:n})]})},yg=({task:e,onPlay:t,templated:n})=>{const o=Qe(c=>c.playingTask),r=Qe(c=>c.setPlayingTask),i=Qe(c=>c.stopPlayingTask),[s]=Ye(),l=(o==null?void 0:o.id)===e.id,d=()=>{l?i():r(e)};return g.useEffect(()=>{t(l)},[l,t]),m.jsxs("div",{className:"flex items-center gap-2",children:[!n&&m.jsx(we,{hoverTypeElement:Ne.NONE,hoverStyleElement:e.isDone?Me.none:Me.circle,children:m.jsx(ve,{size:"icon",variant:"ghost",className:`h-7 w-7 rounded-md border border-white/5 bg-white/[0.03] text-zinc-500 hover:bg-white/5 hover:text-zinc-300 hover:border-white/10 transition-colors ${e.isDone&&"cursor-not-allowed opacity-40"}`,onClick:d,disabled:e.isDone,children:l?m.jsx(gl,{className:"w-3.5 h-3.5"}):m.jsx(Sf,{className:"w-3.5 h-3.5"})})}),m.jsx("div",{className:"flex items-center gap-2",children:l?m.jsxs(m.Fragment,{children:[m.jsx(fs,{outerTime:e.timeDone,isPlay:l,tooltipText:s("task_manager.dialog_create_task.task.time.wasted_time"),className:"!text-zinc-500 bg-zinc-900/50 px-2 py-0.5 rounded border border-white/5"}),m.jsx("span",{className:"text-zinc-600 text-[10px]",children:"/"}),m.jsx(fs,{outerTime:e.time-e.timeDone,isPlay:l,revert:!0,tooltipText:s("task_manager.dialog_create_task.task.time.remaining_time"),className:"!text-zinc-500 bg-zinc-900/50 px-2 py-0.5 rounded border border-white/5"})]}):m.jsxs(m.Fragment,{children:[m.jsx(To,{timeInSeconds:e.timeDone,tooltipText:s("task_manager.dialog_create_task.task.time.wasted_time"),className:"!text-zinc-500 bg-zinc-900/50 px-2 py-0.5 rounded border border-white/5"}),m.jsx("span",{className:"text-zinc-600 text-[10px]",children:"/"}),m.jsx(To,{timeInSeconds:e.time-e.timeDone,revert:!0,tooltipText:s("task_manager.dialog_create_task.task.time.remaining_time"),className:"!text-zinc-500 bg-zinc-900/50 px-2 py-0.5 rounded border border-white/5"})]})})]})},Eg=({task:e,titleDeterminedTime:t,titleSpendingTime:n})=>m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(To,{timeInSeconds:e.time,tooltipText:t,className:"!text-zinc-500 bg-zinc-900/50 px-2 py-0.5 rounded border border-white/5"}),m.jsx("span",{className:"text-zinc-600 text-[10px]",children:"/"}),m.jsx(To,{timeInSeconds:e.timeDone,revert:!0,tooltipText:n,className:"!text-zinc-500 bg-zinc-900/50 px-2 py-0.5 rounded border border-white/5"})]}),Tg={wordBreak:"break-word",overflowWrap:"break-word"};function Cg({index:e="",task:t,onToggle:n,children:o,dragging:r=!1,onEditTask:i,templated:s,style:l,listeners:d,handle:c}){const[f,p]=g.useState(!1),[h]=Ye(),v=t.title.split(" ").some(T=>T.length>40),y=t.isPlanned&&t.isDone&&t.timeDone?t.timeDone:t.time,E=dl(y);return m.jsx("div",{style:l,className:`relative group rounded-lg border border-transparent hover:border-white/5 transition-all ${f?ug(t.priority):""}`,children:m.jsxs("div",{className:`flex items-center justify-between gap-3 p-2 rounded-lg border border-white/[0.04] bg-white/[0.02] hover:bg-white/[0.04] hover:border-white/[0.06] transition-all w-full ${t.isDone?"chrono-task-card-done text-indigo-200/90 border-indigo-500/15 bg-indigo-500/5":"text-zinc-300"}`,children:[m.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[m.jsx("div",{className:"w-6 text-center text-xs text-zinc-600 font-mono tabular-nums flex-shrink-0",children:(e||e===0)&&String(Number(e)+1).padStart(2,"0")}),!s&&m.jsx(we,{className:"flex-shrink-0",animValue:1.4,hoverTypeElement:Ne.SELECT,children:m.jsx("input",{type:"checkbox",className:"custom-checkbox",id:`isDone-${t.id}`,checked:t.isDone,onChange:()=>{n&&(t.isDone,n(t.id,!t.isDone))}})}),m.jsx(ve,{"data-cypress":"draggable-item",...c?void 0:d,variant:"ghost",size:"icon",className:"cursor-move hover:bg-white/5 hover:text-white text-zinc-500 flex-shrink-0 h-6 w-6 md:hidden",children:m.jsx(io,{className:"w-3 h-3"})}),m.jsx("p",{className:`text-left text-sm font-medium min-w-0 max-w-[200px] break-words ${t.isDone?"text-indigo-200":""}`,style:Tg,title:v?t.title:void 0,children:t.title})]}),m.jsxs("div",{className:"flex items-center gap-4 flex-shrink-0",children:[s&&t.whenDo&&t.whenDo.length>0&&m.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5,6,7].map(T=>{var C;return m.jsx("span",{className:`text-[10px] ${(C=t.whenDo)!=null&&C.includes(T)?"text-indigo-400/80":"text-zinc-600"}`,children:h(`task_manager.day_names.${T}`)},T)})}),!r&&m.jsx(m.Fragment,{children:t.isPlanned?m.jsxs("div",{className:"text-xs font-mono text-zinc-500 bg-zinc-900/50 px-2 py-0.5 rounded border border-white/5",title:h("task_manager.dialog_create_task.task.time.label"),children:[E.hours,":",E.minutes]}):t.isDetermined?m.jsx(Eg,{task:t,titleDeterminedTime:h("task_manager.dialog_create_task.task.time.on_time"),titleSpendingTime:h("task_manager.dialog_create_task.task.time.wasted_time")}):s?m.jsxs("div",{className:"text-xs font-mono text-zinc-500 bg-zinc-900/50 px-2 py-0.5 rounded border border-white/5",children:[E.hours,":",E.minutes]}):m.jsx(yg,{templated:s,onPlay:p,task:t})}),m.jsxs("div",{className:"w-12 flex justify-end gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[i&&m.jsx(Nt,{children:m.jsx(we,{animValue:.99,hoverTypeElement:t.isDone?Ne.NONE:Ne.SELECT,hoverStyleElement:t.isDone?Me.none:Me.quad,children:m.jsx(ve,{variant:"ghost",size:"icon",disabled:t.isDone,onClick:()=>i(t),className:`h-6 w-6 text-zinc-500 hover:text-white hover:bg-white/5 ${t.isDone&&"text-zinc-600"}`,children:m.jsx(Xf,{className:"w-3 h-3"})})})}),m.jsx(we,{animValue:.9,hoverTypeElement:Ne.SHIFT,className:"hidden md:block",children:m.jsx(ve,{"data-cypress":"draggable-item",...c?void 0:d,variant:"ghost",size:"icon",className:"h-6 w-6 cursor-move hover:bg-white/5 hover:text-white text-zinc-500",children:m.jsx(io,{className:"w-3 h-3"})})})]}),o]})]})})}const mi=D.memo(D.forwardRef(({dragOverlay:e,dragging:t,fadeIn:n,handle:o,index:r,listeners:i,onEditTask:s,renderItem:l,sorting:d,style:c,transition:f,transform:p,value:h,task:v,onToggle:y,templated:E},T)=>(g.useEffect(()=>{if(e)return document.body.style.cursor="grabbing",()=>{document.body.style.cursor=""}},[e]),l?l({dragOverlay:!!e,dragging:!!t,sorting:!!d,index:r,fadeIn:!!n,listeners:i,ref:T,style:c,transform:p,transition:f,value:h,task:v}):m.jsx("li",{className:"list-none",ref:T,tabIndex:o?void 0:0,children:m.jsx(Cg,{index:r,templated:E,dragging:e,task:v,onToggle:y,onEditTask:s,listeners:i,handle:o,style:{transform:p?`translate3d(${p.x}px, ${p.y}px, 0)`:void 0,transition:f??void 0,...c}})}))));function ps({disabled:e,id:t,index:n,handle:o,renderItem:r,style:i,containerId:s,getIndex:l,items:d,onToggle:c,task:f,onEditTask:p,templated:h}){const{setNodeRef:v,listeners:y,isDragging:E,isSorting:T,over:C,overIndex:x,transform:_,transition:w}=Yl({id:t});return m.jsx(mi,{ref:e?void 0:v,value:f.title,dragging:E,sorting:T,handle:o,index:n,templated:h,onToggle:c,style:i({index:n,value:t,isDragging:E,isSorting:T,overIndex:C?l(C.id,d):x,containerId:s}),transition:w,transform:_,listeners:y,renderItem:r,task:f,onEditTask:p})}const Sg=({id:e})=>{const{setNodeRef:t,isOver:n}=Hl({id:e});return m.jsx("div",{className:`${n?"bg-destructive/30":"bg-background/30"} fixed left-0  top-1/2 translate-y-[-50%] w-8 my-auto h-1/2 border rounded-lg flex items-center justify-center  text-2xl z-50 mb-5 border-destructive/30 text-destructive  transition-all duration-100`,ref:t,children:m.jsx(ip,{})})},wg=({containerId:e,items:t,getItemStyles:n,handle:o,renderItem:r,columns:i,templated:s,options:l})=>{var c,f;return t.find(p=>p.id===e)?m.jsx(wu,{label:((c=t.find(p=>p.id===e))==null?void 0:c.title)??e.toString(),columns:i,options:l,children:(f=t.find(p=>p.id===e))==null?void 0:f.tasks.map(p=>m.jsx(mi,{value:p.id,handle:o,templated:s,style:n({containerId:e,overIndex:-1,index:Eo(p.id,t),value:p.id,isDragging:!1,isSorting:!1,isDragOverlay:!1}),renderItem:r,task:p},p.id))}):null},_g=({id:e,handle:t,getItemStyles:n,items:o,renderItem:r,templated:i})=>{const s=o.find(d=>d.tasks.some(c=>c.id===e)),l=s==null?void 0:s.tasks.find(d=>d.id===e);return!l||!s?null:m.jsx(mi,{task:l,value:(l==null?void 0:l.title)??e,handle:t,style:n({containerId:s.id,overIndex:-1,index:Eo(l.id,o),value:l.id,isSorting:!0,isDragging:!0,isDragOverlay:!0}),renderItem:r,templated:i,dragOverlay:!0})};function xg(e,t){return Math.floor(Math.random()*t)+e}function hs({value:e,onChange:t,min:n=0,max:o=100,step:r=1,className:i}){const s=()=>{const d=Math.max(n,e-r);t(d)},l=()=>{const d=Math.min(o,e+r);t(d)};return m.jsxs("div",{className:ye("chrono-time-input flex items-center justify-between rounded-md px-3 py-2 w-fit",i),children:[m.jsx(Nt,{children:m.jsx(we,{hoverTypeElement:Ne.SELECT,hoverStyleElement:Me.quad,children:m.jsx(ve,{variant:"ghost",size:"sm",className:`text-lg ${e>=o&&"text-zinc-600"}`,onClick:l,disabled:e>=o,children:"+"})})}),m.jsx(Su,{type:"text",value:e===0?"":e,onChange:d=>{const c=d.target.value;if(c==="")t(0);else{const f=c.replace(/\D/g,""),p=parseInt(f,10);isNaN(p)||t(Math.min(Math.max(p,n),o))}},inputMode:"numeric",className:"w-12 text-center font-bold text-lg border-none focus:outline-none"}),m.jsx(Nt,{children:m.jsx(we,{hoverTypeElement:Ne.SELECT,hoverStyleElement:Me.quad,children:m.jsx(ve,{variant:"ghost",size:"sm",className:`text-lg ${e<=n&&"text-zinc-600"}`,onClick:s,disabled:e<=n,children:""})})})]})}var Ig=Symbol.for("react.lazy"),Co=ol[" use ".trim().toString()];function Rg(e){return typeof e=="object"&&e!==null&&"then"in e}function Du(e){return e!=null&&typeof e=="object"&&"$$typeof"in e&&e.$$typeof===Ig&&"_payload"in e&&Rg(e._payload)}function Ag(e){const t=bg(e),n=g.forwardRef((o,r)=>{let{children:i,...s}=o;Du(i)&&typeof Co=="function"&&(i=Co(i._payload));const l=g.Children.toArray(i),d=l.find(Mg);if(d){const c=d.props.children,f=l.map(p=>p===d?g.Children.count(c)>1?g.Children.only(null):g.isValidElement(c)?c.props.children:null:p);return m.jsx(t,{...s,ref:r,children:g.isValidElement(c)?g.cloneElement(c,void 0,f):null})}return m.jsx(t,{...s,ref:r,children:i})});return n.displayName=`${e}.Slot`,n}function bg(e){const t=g.forwardRef((n,o)=>{let{children:r,...i}=n;if(Du(r)&&typeof Co=="function"&&(r=Co(r._payload)),g.isValidElement(r)){const s=Dg(r),l=Pg(i,r.props);return r.type!==g.Fragment&&(l.ref=o?vt(o,s):s),g.cloneElement(r,l)}return g.Children.count(r)>1?g.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Ng=Symbol("radix.slottable");function Mg(e){return g.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Ng}function Pg(e,t){const n={...t};for(const o in t){const r=e[o],i=t[o];/^on[A-Z]/.test(o)?r&&i?n[o]=(...l)=>{const d=i(...l);return r(...l),d}:r&&(n[o]=r):o==="style"?n[o]={...r,...i}:o==="className"&&(n[o]=[r,i].filter(Boolean).join(" "))}return{...e,...n}}function Dg(e){var o,r;let t=(o=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:o.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(r=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var kg=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Lg=kg.reduce((e,t)=>{const n=Ag(`Primitive.${t}`),o=g.forwardRef((r,i)=>{const{asChild:s,...l}=r,d=s?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),m.jsx(d,{...l,ref:i})});return o.displayName=`Primitive.${t}`,{...e,[t]:o}},{}),Ug="Label",Ho=g.forwardRef((e,t)=>m.jsx(Lg.label,{...e,ref:t,onMouseDown:n=>{var r;n.target.closest("button, input, select, textarea")||((r=e.onMouseDown)==null||r.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));Ho.displayName=Ug;var Fg=Ho;function Rn({className:e,...t}){return m.jsx(Fg,{"data-slot":"label",className:ye("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}function Jn({onChange:e,time:t}){const[n,o]=g.useState(0),[r,i]=g.useState(0),[s]=Ye(),l=c=>{!isNaN(c)&&c>=0&&c<=12?o(c):o(0)},d=c=>{!isNaN(c)&&c>=0&&c<=60?i(c):i(0)};return g.useEffect(()=>{if(t){const c=Math.floor(t/60),f=Math.floor(c/60),p=c%60;o(f),i(p)}},[t]),g.useEffect(()=>{const c=n*3600+r*60;e(c)},[n,r,e]),m.jsx(m.Fragment,{children:m.jsxs("div",{className:"col-span-3 flex gap-1",children:[m.jsxs("div",{className:"flex flex-col items-center space-y-1",children:[m.jsx(Rn,{htmlFor:"hours",className:"text-xs text-zinc-500",children:s("task_manager.dialog_create_task.task.time.hours")}),m.jsx(hs,{min:0,max:12,value:n,onChange:c=>{l(c)}})]}),m.jsxs("div",{className:"flex flex-col items-center space-y-1",children:[m.jsx(Rn,{htmlFor:"minutes",className:"text-xs text-zinc-500",children:s("task_manager.dialog_create_task.task.time.minutes")}),m.jsx(hs,{min:0,max:60,value:r,onChange:c=>{d(c)}})]})]})})}const ku=(e,t,n,o=!1,r=0,i=[],s=!1)=>({id:`${e}-${Date.now()}`,title:e,isDone:!1,time:n,timeDone:r,isPlanned:o,priority:t,whenDo:i,isDetermined:s}),ms=e=>Array.from({length:e},(t,n)=>String(n-1).padStart(2,"0")),Wn=28,gs=({values:e,selected:t,onChange:n,type:o})=>{const r=g.useRef(null),i=g.useCallback(()=>{if(!r.current)return;const s=r.current.scrollTop,l=r.current.clientHeight,d=s+l/2,c=Math.floor(d/Wn),f=e[c];f&&f!==t&&n(f)},[n,t,e]);return g.useEffect(()=>{const s=r.current;if(!s)return;let l;const d=()=>{clearTimeout(l),l=setTimeout(()=>{i()},80)};return s.addEventListener("scroll",d),()=>{s.removeEventListener("scroll",d),clearTimeout(l)}},[i]),g.useEffect(()=>{if(r.current){const l=e.indexOf(t)*Wn-r.current.clientHeight/2+Wn/2;r.current.scrollTo({top:l,behavior:"smooth"})}},[t,e]),m.jsx("div",{ref:r,className:"chrono-time-drum h-[84px] w-16 overflow-y-auto snap-y snap-mandatory scroll-smooth",children:e.map(s=>{const l=s!=="-1"&&(o==="minute"&&s!=="60"||o==="hour"&&s!=="24");return m.jsx("div",{className:`snap-center flex items-center justify-center transition-colors ${s===t?"chrono-time-drum-selected":"chrono-time-drum-unselected"}`,style:{height:`${Wn}px`},children:l&&s},s)})})},vs=({onChange:e,className:t="",time:n=0})=>{const o=new Date,[r,i]=g.useState(String(o.getHours()).padStart(2,"0")),[s,l]=g.useState("00"),d=g.useCallback((c,f)=>{const p=parseInt(c)*3600+parseInt(f)*60;e==null||e(p)},[e]);return g.useEffect(()=>{if(n===0)return;const{hours:c,minutes:f}=dl(n);i(c),l(f)},[n]),g.useEffect(()=>{d(r,s)},[r,s,d]),m.jsx("div",{className:`flex flex-col items-center justify-center gap-2 ${t}`,children:m.jsxs("div",{className:"relative flex justify-center items-center space-x-2",children:[m.jsx("div",{className:"chrono-time-drum-window absolute inset-x-0 top-1/2 -translate-y-1/2 h-7 pointer-events-none"}),m.jsx(gs,{type:"hour",values:ms(26),selected:r,onChange:c=>i(c)}),m.jsx("span",{className:"chrono-time-drum-colon flex items-center",children:":"}),m.jsx(gs,{type:"minute",values:ms(62),selected:s,onChange:c=>l(c)})]})})};function Vg({className:e,...t}){return m.jsx("textarea",{"data-slot":"textarea",className:ye("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...t})}const Gg=({value:e,label:t,id:n,...o})=>m.jsxs(m.Fragment,{children:[m.jsx(Ho,{htmlFor:n,children:t}),m.jsx(Vg,{id:n,value:e,...o,className:"col-span-3 bg-transparent"})]}),Og=({selectLabel:e,id:t,label:n,onChange:o,placeholder:r,value:i,options:s,prefixTranslationPath:l,classPrefixFunction:d})=>{const[c]=Ye();return m.jsxs(m.Fragment,{children:[m.jsx(Ho,{htmlFor:t,children:c(n)}),m.jsxs(ef,{name:t,value:i,onValueChange:o,children:[m.jsx(tf,{name:"prioriy",className:"w-full col-span-3 chrono-select-trigger",children:m.jsx(nf,{placeholder:c(r)})}),m.jsx(of,{className:"chrono-select-content",children:m.jsxs(rf,{children:[m.jsx(sf,{children:c(e)}),Object.values(s).map(f=>m.jsx(we,{animValue:.99,hoverStyleElement:Me.none,children:m.jsx(af,{value:f,className:`${d(f)}`,children:c(`${l}.${f.toLowerCase()}`)})},f))]})})]})]})},Hg=({weekData:e,toggleDay:t,selectedDays:n,label:o,prefixWeedDay:r})=>{const[i]=Ye();return m.jsxs(m.Fragment,{children:[m.jsx(Rn,{children:i(o)}),m.jsx("div",{className:"col-span-3 flex items-center justify-center gap-1",children:e.map(s=>m.jsx(ve,{variant:"ghost",onClick:()=>t(s),className:`w-7 h-8 rounded-full transition-all duration-200 ${n.includes(s)?"chrono-day-badge selected":"chrono-day-badge hover:border-white/10 hover:bg-white/5"}`,children:i(`${r}.${s}`)},s))})]})};var $o="Checkbox",[$g]=tn($o),[Bg,gi]=$g($o);function qg(e){const{__scopeCheckbox:t,checked:n,children:o,defaultChecked:r,disabled:i,form:s,name:l,onCheckedChange:d,required:c,value:f="on",internal_do_not_use_render:p}=e,[h,v]=Po({prop:n,defaultProp:r??!1,onChange:d,caller:$o}),[y,E]=g.useState(null),[T,C]=g.useState(null),x=g.useRef(!1),_=y?!!s||!!y.closest("form"):!0,w={checked:h,disabled:i,setChecked:v,control:y,setControl:E,name:l,form:s,value:f,hasConsumerStoppedPropagationRef:x,required:c,defaultChecked:Rt(r)?!1:r,isFormControl:_,bubbleInput:T,setBubbleInput:C};return m.jsx(Bg,{scope:t,...w,children:zg(p)?p(w):o})}var Lu="CheckboxTrigger",Uu=g.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:n,...o},r)=>{const{control:i,value:s,disabled:l,checked:d,required:c,setControl:f,setChecked:p,hasConsumerStoppedPropagationRef:h,isFormControl:v,bubbleInput:y}=gi(Lu,e),E=Ue(r,f),T=g.useRef(d);return g.useEffect(()=>{const C=i==null?void 0:i.form;if(C){const x=()=>p(T.current);return C.addEventListener("reset",x),()=>C.removeEventListener("reset",x)}},[i,p]),m.jsx(fe.button,{type:"button",role:"checkbox","aria-checked":Rt(d)?"mixed":d,"aria-required":c,"data-state":$u(d),"data-disabled":l?"":void 0,disabled:l,value:s,...o,ref:E,onKeyDown:X(t,C=>{C.key==="Enter"&&C.preventDefault()}),onClick:X(n,C=>{p(x=>Rt(x)?!0:!x),y&&v&&(h.current=C.isPropagationStopped(),h.current||C.stopPropagation())})})});Uu.displayName=Lu;var Fu=g.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:o,checked:r,defaultChecked:i,required:s,disabled:l,value:d,onCheckedChange:c,form:f,...p}=e;return m.jsx(qg,{__scopeCheckbox:n,checked:r,defaultChecked:i,disabled:l,required:s,onCheckedChange:c,name:o,form:f,value:d,internal_do_not_use_render:({isFormControl:h})=>m.jsxs(m.Fragment,{children:[m.jsx(Uu,{...p,ref:t,__scopeCheckbox:n}),h&&m.jsx(Hu,{__scopeCheckbox:n})]})})});Fu.displayName=$o;var Vu="CheckboxIndicator",Gu=g.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:o,...r}=e,i=gi(Vu,n);return m.jsx(tt,{present:o||Rt(i.checked)||i.checked===!0,children:m.jsx(fe.span,{"data-state":$u(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:t,style:{pointerEvents:"none",...e.style}})})});Gu.displayName=Vu;var Ou="CheckboxBubbleInput",Hu=g.forwardRef(({__scopeCheckbox:e,...t},n)=>{const{control:o,hasConsumerStoppedPropagationRef:r,checked:i,defaultChecked:s,required:l,disabled:d,name:c,value:f,form:p,bubbleInput:h,setBubbleInput:v}=gi(Ou,e),y=Ue(n,v),E=lf(i),T=uf(o);g.useEffect(()=>{const x=h;if(!x)return;const _=window.HTMLInputElement.prototype,R=Object.getOwnPropertyDescriptor(_,"checked").set,S=!r.current;if(E!==i&&R){const I=new Event("click",{bubbles:S});x.indeterminate=Rt(i),R.call(x,Rt(i)?!1:i),x.dispatchEvent(I)}},[h,E,i,r]);const C=g.useRef(Rt(i)?!1:i);return m.jsx(fe.input,{type:"checkbox","aria-hidden":!0,defaultChecked:s??C.current,required:l,disabled:d,name:c,value:f,form:p,...t,tabIndex:-1,ref:y,style:{...t.style,...T,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});Hu.displayName=Ou;function zg(e){return typeof e=="function"}function Rt(e){return e==="indeterminate"}function $u(e){return Rt(e)?"indeterminate":e?"checked":"unchecked"}function Jg({className:e,...t}){return m.jsx(Fu,{"data-slot":"checkbox",className:ye("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:m.jsx(Gu,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:m.jsx(ml,{className:"size-3.5"})})})}const Wg=({id:e,label:t,...n})=>m.jsxs(m.Fragment,{children:[m.jsx(Rn,{htmlFor:e,children:t}),m.jsx(we,{className:"h-5 w-5",animValue:1.4,hoverTypeElement:Ne.SELECT,children:m.jsx(Jg,{id:e,className:"w-5 h-5",...n})})]}),qt=({label:e,tooltip:t,children:n})=>{const[o,r]=g.useState(!1),i=()=>{r(s=>!s)};return m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"relative inline-flex items-center gap-2",children:[m.jsxs(Rn,{htmlFor:"time",className:"text-right",children:[e,":"]}),m.jsxs(Jr,{open:o,onOpenChange:r,children:[m.jsx(Wr,{asChild:!0,children:m.jsx("div",{children:m.jsx(ve,{size:"icon",variant:"ghost",className:"rounded-full",onClick:i,children:m.jsx(Ff,{})})})}),m.jsx(Yr,{side:"top",children:m.jsx("p",{children:t})})]})]}),n]})},vi=({isOpen:e,setOpen:t,children:n,className:o="p-4",contentClassName:r})=>{const i=Do(s=>s.setHover);return g.useEffect(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[e]),g.useEffect(()=>{setTimeout(()=>{i(!1,null,Me.circle)},100)},[i,e]),m.jsx(hl,{children:e&&m.jsx(xn.div,{initial:{opacity:0,scale:.9,y:-50},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-30},transition:{duration:.25,ease:"easeOut"},className:"fixed left-0 top-0 z-40 h-full flex justify-center overflow-auto items-center chrono-dialog-overlay w-full",onClick:()=>t(!1),children:m.jsx(xn.div,{onClick:s=>s.stopPropagation(),className:ye("overflow-auto h-full md:h-auto rounded-xl w-full max-w-lg chrono-dialog bg-transparent",r,o),initial:{opacity:0,y:30},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.25},children:n})},"dialog")})};function Yg(e,t){return g.useReducer((n,o)=>t[n][o]??n,e)}var yi="ScrollArea",[Bu]=tn(yi),[Kg,nt]=Bu(yi),Bo=g.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:o="hover",dir:r,scrollHideDelay:i=600,...s}=e,[l,d]=g.useState(null),[c,f]=g.useState(null),[p,h]=g.useState(null),[v,y]=g.useState(null),[E,T]=g.useState(null),[C,x]=g.useState(0),[_,w]=g.useState(0),[R,S]=g.useState(!1),[I,b]=g.useState(!1),A=Ue(t,P=>d(P)),N=Xr(r);return m.jsx(Kg,{scope:n,type:o,dir:N,scrollHideDelay:i,scrollArea:l,viewport:c,onViewportChange:f,content:p,onContentChange:h,scrollbarX:v,onScrollbarXChange:y,scrollbarXEnabled:R,onScrollbarXEnabledChange:S,scrollbarY:E,onScrollbarYChange:T,scrollbarYEnabled:I,onScrollbarYEnabledChange:b,onCornerWidthChange:x,onCornerHeightChange:w,children:m.jsx(fe.div,{dir:N,...s,ref:A,style:{position:"relative","--radix-scroll-area-corner-width":C+"px","--radix-scroll-area-corner-height":_+"px",...e.style}})})});Bo.displayName=yi;var qu="ScrollAreaViewport",zu=g.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:o,nonce:r,...i}=e,s=nt(qu,n),l=g.useRef(null),d=Ue(t,l,s.onViewportChange);return m.jsxs(m.Fragment,{children:[m.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),m.jsx(fe.div,{"data-radix-scroll-area-viewport":"",...i,ref:d,style:{overflowX:s.scrollbarXEnabled?"scroll":"hidden",overflowY:s.scrollbarYEnabled?"scroll":"hidden",...e.style},children:m.jsx("div",{ref:s.onContentChange,style:{minWidth:"100%",display:"table"},children:o})})]})});zu.displayName=qu;var mt="ScrollAreaScrollbar",Ju=g.forwardRef((e,t)=>{const{forceMount:n,...o}=e,r=nt(mt,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:s}=r,l=e.orientation==="horizontal";return g.useEffect(()=>(l?i(!0):s(!0),()=>{l?i(!1):s(!1)}),[l,i,s]),r.type==="hover"?m.jsx(Xg,{...o,ref:t,forceMount:n}):r.type==="scroll"?m.jsx(Qg,{...o,ref:t,forceMount:n}):r.type==="auto"?m.jsx(Wu,{...o,ref:t,forceMount:n}):r.type==="always"?m.jsx(Ei,{...o,ref:t}):null});Ju.displayName=mt;var Xg=g.forwardRef((e,t)=>{const{forceMount:n,...o}=e,r=nt(mt,e.__scopeScrollArea),[i,s]=g.useState(!1);return g.useEffect(()=>{const l=r.scrollArea;let d=0;if(l){const c=()=>{window.clearTimeout(d),s(!0)},f=()=>{d=window.setTimeout(()=>s(!1),r.scrollHideDelay)};return l.addEventListener("pointerenter",c),l.addEventListener("pointerleave",f),()=>{window.clearTimeout(d),l.removeEventListener("pointerenter",c),l.removeEventListener("pointerleave",f)}}},[r.scrollArea,r.scrollHideDelay]),m.jsx(tt,{present:n||i,children:m.jsx(Wu,{"data-state":i?"visible":"hidden",...o,ref:t})})}),Qg=g.forwardRef((e,t)=>{const{forceMount:n,...o}=e,r=nt(mt,e.__scopeScrollArea),i=e.orientation==="horizontal",s=zo(()=>d("SCROLL_END"),100),[l,d]=Yg("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return g.useEffect(()=>{if(l==="idle"){const c=window.setTimeout(()=>d("HIDE"),r.scrollHideDelay);return()=>window.clearTimeout(c)}},[l,r.scrollHideDelay,d]),g.useEffect(()=>{const c=r.viewport,f=i?"scrollLeft":"scrollTop";if(c){let p=c[f];const h=()=>{const v=c[f];p!==v&&(d("SCROLL"),s()),p=v};return c.addEventListener("scroll",h),()=>c.removeEventListener("scroll",h)}},[r.viewport,i,d,s]),m.jsx(tt,{present:n||l!=="hidden",children:m.jsx(Ei,{"data-state":l==="hidden"?"hidden":"visible",...o,ref:t,onPointerEnter:X(e.onPointerEnter,()=>d("POINTER_ENTER")),onPointerLeave:X(e.onPointerLeave,()=>d("POINTER_LEAVE"))})})}),Wu=g.forwardRef((e,t)=>{const n=nt(mt,e.__scopeScrollArea),{forceMount:o,...r}=e,[i,s]=g.useState(!1),l=e.orientation==="horizontal",d=zo(()=>{if(n.viewport){const c=n.viewport.offsetWidth<n.viewport.scrollWidth,f=n.viewport.offsetHeight<n.viewport.scrollHeight;s(l?c:f)}},10);return en(n.viewport,d),en(n.content,d),m.jsx(tt,{present:o||i,children:m.jsx(Ei,{"data-state":i?"visible":"hidden",...r,ref:t})})}),Ei=g.forwardRef((e,t)=>{const{orientation:n="vertical",...o}=e,r=nt(mt,e.__scopeScrollArea),i=g.useRef(null),s=g.useRef(0),[l,d]=g.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=Zu(l.viewport,l.content),f={...o,sizes:l,onSizesChange:d,hasThumb:c>0&&c<1,onThumbChange:h=>i.current=h,onThumbPointerUp:()=>s.current=0,onThumbPointerDown:h=>s.current=h};function p(h,v){return ov(h,s.current,l,v)}return n==="horizontal"?m.jsx(Zg,{...f,ref:t,onThumbPositionChange:()=>{if(r.viewport&&i.current){const h=r.viewport.scrollLeft,v=ys(h,l,r.dir);i.current.style.transform=`translate3d(${v}px, 0, 0)`}},onWheelScroll:h=>{r.viewport&&(r.viewport.scrollLeft=h)},onDragScroll:h=>{r.viewport&&(r.viewport.scrollLeft=p(h,r.dir))}}):n==="vertical"?m.jsx(jg,{...f,ref:t,onThumbPositionChange:()=>{if(r.viewport&&i.current){const h=r.viewport.scrollTop,v=ys(h,l);i.current.style.transform=`translate3d(0, ${v}px, 0)`}},onWheelScroll:h=>{r.viewport&&(r.viewport.scrollTop=h)},onDragScroll:h=>{r.viewport&&(r.viewport.scrollTop=p(h))}}):null}),Zg=g.forwardRef((e,t)=>{const{sizes:n,onSizesChange:o,...r}=e,i=nt(mt,e.__scopeScrollArea),[s,l]=g.useState(),d=g.useRef(null),c=Ue(t,d,i.onScrollbarXChange);return g.useEffect(()=>{d.current&&l(getComputedStyle(d.current))},[d]),m.jsx(Ku,{"data-orientation":"horizontal",...r,ref:c,sizes:n,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":qo(n)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,p)=>{if(i.viewport){const h=i.viewport.scrollLeft+f.deltaX;e.onWheelScroll(h),ec(h,p)&&f.preventDefault()}},onResize:()=>{d.current&&i.viewport&&s&&o({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:wo(s.paddingLeft),paddingEnd:wo(s.paddingRight)}})}})}),jg=g.forwardRef((e,t)=>{const{sizes:n,onSizesChange:o,...r}=e,i=nt(mt,e.__scopeScrollArea),[s,l]=g.useState(),d=g.useRef(null),c=Ue(t,d,i.onScrollbarYChange);return g.useEffect(()=>{d.current&&l(getComputedStyle(d.current))},[d]),m.jsx(Ku,{"data-orientation":"vertical",...r,ref:c,sizes:n,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":qo(n)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,p)=>{if(i.viewport){const h=i.viewport.scrollTop+f.deltaY;e.onWheelScroll(h),ec(h,p)&&f.preventDefault()}},onResize:()=>{d.current&&i.viewport&&s&&o({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:wo(s.paddingTop),paddingEnd:wo(s.paddingBottom)}})}})}),[ev,Yu]=Bu(mt),Ku=g.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:o,hasThumb:r,onThumbChange:i,onThumbPointerUp:s,onThumbPointerDown:l,onThumbPositionChange:d,onDragScroll:c,onWheelScroll:f,onResize:p,...h}=e,v=nt(mt,n),[y,E]=g.useState(null),T=Ue(t,A=>E(A)),C=g.useRef(null),x=g.useRef(""),_=v.viewport,w=o.content-o.viewport,R=ht(f),S=ht(d),I=zo(p,10);function b(A){if(C.current){const N=A.clientX-C.current.left,P=A.clientY-C.current.top;c({x:N,y:P})}}return g.useEffect(()=>{const A=N=>{const P=N.target;(y==null?void 0:y.contains(P))&&R(N,w)};return document.addEventListener("wheel",A,{passive:!1}),()=>document.removeEventListener("wheel",A,{passive:!1})},[_,y,w,R]),g.useEffect(S,[o,S]),en(y,I),en(v.content,I),m.jsx(ev,{scope:n,scrollbar:y,hasThumb:r,onThumbChange:ht(i),onThumbPointerUp:ht(s),onThumbPositionChange:S,onThumbPointerDown:ht(l),children:m.jsx(fe.div,{...h,ref:T,style:{position:"absolute",...h.style},onPointerDown:X(e.onPointerDown,A=>{A.button===0&&(A.target.setPointerCapture(A.pointerId),C.current=y.getBoundingClientRect(),x.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",v.viewport&&(v.viewport.style.scrollBehavior="auto"),b(A))}),onPointerMove:X(e.onPointerMove,b),onPointerUp:X(e.onPointerUp,A=>{const N=A.target;N.hasPointerCapture(A.pointerId)&&N.releasePointerCapture(A.pointerId),document.body.style.webkitUserSelect=x.current,v.viewport&&(v.viewport.style.scrollBehavior=""),C.current=null})})})}),So="ScrollAreaThumb",Xu=g.forwardRef((e,t)=>{const{forceMount:n,...o}=e,r=Yu(So,e.__scopeScrollArea);return m.jsx(tt,{present:n||r.hasThumb,children:m.jsx(tv,{ref:t,...o})})}),tv=g.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:o,...r}=e,i=nt(So,n),s=Yu(So,n),{onThumbPositionChange:l}=s,d=Ue(t,p=>s.onThumbChange(p)),c=g.useRef(void 0),f=zo(()=>{c.current&&(c.current(),c.current=void 0)},100);return g.useEffect(()=>{const p=i.viewport;if(p){const h=()=>{if(f(),!c.current){const v=rv(p,l);c.current=v,l()}};return l(),p.addEventListener("scroll",h),()=>p.removeEventListener("scroll",h)}},[i.viewport,f,l]),m.jsx(fe.div,{"data-state":s.hasThumb?"visible":"hidden",...r,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...o},onPointerDownCapture:X(e.onPointerDownCapture,p=>{const v=p.target.getBoundingClientRect(),y=p.clientX-v.left,E=p.clientY-v.top;s.onThumbPointerDown({x:y,y:E})}),onPointerUp:X(e.onPointerUp,s.onThumbPointerUp)})});Xu.displayName=So;var Ti="ScrollAreaCorner",Qu=g.forwardRef((e,t)=>{const n=nt(Ti,e.__scopeScrollArea),o=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&o?m.jsx(nv,{...e,ref:t}):null});Qu.displayName=Ti;var nv=g.forwardRef((e,t)=>{const{__scopeScrollArea:n,...o}=e,r=nt(Ti,n),[i,s]=g.useState(0),[l,d]=g.useState(0),c=!!(i&&l);return en(r.scrollbarX,()=>{var p;const f=((p=r.scrollbarX)==null?void 0:p.offsetHeight)||0;r.onCornerHeightChange(f),d(f)}),en(r.scrollbarY,()=>{var p;const f=((p=r.scrollbarY)==null?void 0:p.offsetWidth)||0;r.onCornerWidthChange(f),s(f)}),c?m.jsx(fe.div,{...o,ref:t,style:{width:i,height:l,position:"absolute",right:r.dir==="ltr"?0:void 0,left:r.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function wo(e){return e?parseInt(e,10):0}function Zu(e,t){const n=e/t;return isNaN(n)?0:n}function qo(e){const t=Zu(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,o=(e.scrollbar.size-n)*t;return Math.max(o,18)}function ov(e,t,n,o="ltr"){const r=qo(n),i=r/2,s=t||i,l=r-s,d=n.scrollbar.paddingStart+s,c=n.scrollbar.size-n.scrollbar.paddingEnd-l,f=n.content-n.viewport,p=o==="ltr"?[0,f]:[f*-1,0];return ju([d,c],p)(e)}function ys(e,t,n="ltr"){const o=qo(t),r=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-r,s=t.content-t.viewport,l=i-o,d=n==="ltr"?[0,s]:[s*-1,0],c=df(e,d);return ju([0,s],[0,l])(c)}function ju(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const o=(t[1]-t[0])/(e[1]-e[0]);return t[0]+o*(n-e[0])}}function ec(e,t){return e>0&&e<t}var rv=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},o=0;return(function r(){const i={left:e.scrollLeft,top:e.scrollTop},s=n.left!==i.left,l=n.top!==i.top;(s||l)&&t(),n=i,o=window.requestAnimationFrame(r)})(),()=>window.cancelAnimationFrame(o)};function zo(e,t){const n=ht(e),o=g.useRef(0);return g.useEffect(()=>()=>window.clearTimeout(o.current),[]),g.useCallback(()=>{window.clearTimeout(o.current),o.current=window.setTimeout(n,t)},[n,t])}function en(e,t){const n=ht(t);cf(()=>{let o=0;if(e){const r=new ResizeObserver(()=>{cancelAnimationFrame(o),o=window.requestAnimationFrame(n)});return r.observe(e),()=>{window.cancelAnimationFrame(o),r.unobserve(e)}}},[e,n])}var iv=Bo,sv=zu,av=Qu;const lv=({onChangeTask:e,isOpen:t,setOpen:n,task:o,containerId:r,templated:i})=>{const[s]=Ye(),l=Do(N=>N.setHover),d=Array.from({length:7},(N,P)=>P+1),[c,f]=g.useState(d),[p,h]=g.useState(""),[v,y]=g.useState(Se.LOW),[E,T]=g.useState(0),[C,x]=g.useState(0),[_,w]=g.useState(1),[R,S]=g.useState(!1);function I(N){f(P=>P.includes(N)?P.filter(O=>O!==N):[...P,N])}const b=()=>{if(p.trim()!==""){if(o)e({...o,title:p,priority:v,time:E,timeDone:C,whenDo:c,isDetermined:R},r,!0);else{const N=ku(p,v,E,!1,C,c,R);e(N,r,!1)}A(),l(!1,null,Me.circle)}},A=g.useCallback(()=>{h(""),y(Se.LOW),T(0),x(0),f(d),S(!1)},[d]);return g.useEffect(()=>{o&&(h(o.title),y(o.priority),T(o.time),x(o.timeDone),f(o.whenDo||[]),S(o.isDetermined||!1))},[o]),g.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[t]),g.useEffect(()=>{w(xg(1,4)),setTimeout(()=>{l(!1,null,Me.circle)},100)},[l,t]),m.jsx(vi,{isOpen:t,setOpen:n,className:"p-4 md:p-6",children:m.jsx(Bo,{className:"w-full h-full touch-auto overscroll-contain",children:m.jsxs("div",{className:"flex flex-col gap-2 md:gap-4",children:[m.jsxs("div",{className:"relative",children:[m.jsxs("div",{className:"flex flex-col gap-2",children:[m.jsx("h3",{className:"text-2xl font-semibold break-words",children:s(`task_manager.dialog_create_task.${_}.title`)}),m.jsx("p",{className:"chrono-dialog-description font-mono text-sm",children:s(`task_manager.dialog_create_task.${_}.description`)})]}),m.jsx(Nt,{children:m.jsx(we,{className:"absolute -top-4 -right-2 rounded-full",hoverTypeElement:Ne.SELECT_2,hoverStyleElement:Me.quad,children:m.jsx(ve,{size:"icon",variant:"ghost",className:"hover:bg-white/10 hover:text-zinc-200 rounded-full transition duration-200 text-zinc-400",onClick:()=>n(!1),children:m.jsx(vl,{})})})})]}),m.jsxs("div",{className:"grid gap-6 md:py-4",children:[m.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-4 items-start sm:items-center gap-2 md:gap-4 sm:gap-4",children:m.jsx(Gg,{id:"task-title",label:s("task_manager.dialog_create_task.task.title.label"),placeholder:s("task_manager.dialog_create_task.task.title.description"),value:p,onChange:N=>{h(N.target.value)}})}),m.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-4 items-start sm:items-center gap-2 md:gap-4 sm:gap-4",children:m.jsx(Og,{id:"priority",label:"task_manager.dialog_create_task.task.priority.label",options:Se,value:v,onChange:y,prefixTranslationPath:"task_manager.dialog_create_task.task.priority.options",classPrefixFunction:lg,placeholder:"task_manager.dialog_create_task.task.priority.description",selectLabel:"task_manager.dialog_create_task.task.priority.description"})}),o!=null&&o.isPlanned?m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"grid grid-cols-1 xs:grid-cols-4 items-start xs:items-center gap-2 md:gap-4 ",children:m.jsx(qt,{label:s("task_manager.dialog_create_task.task.time.determined.label"),tooltip:s("task_manager.dialog_create_task.task.time.determined.description"),children:m.jsx(vs,{className:"col-span-3",onChange:N=>{T(N)},time:o?o.time:0})})}),m.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-4 items-start sm:items-center gap-2 md:gap-4",children:m.jsx(qt,{label:s("task_manager.dialog_create_task.task.time.wasted.label"),tooltip:s("task_manager.dialog_create_task.task.time.wasted.description"),children:m.jsx(Jn,{time:C,onChange:N=>{x(N)}})})})]}):m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"flex items-center gap-2 md:gap-4",children:m.jsx(Wg,{id:"is_determined_task",label:s("task_manager.dialog_create_task.task.time.is_determined_task"),onCheckedChange:()=>{S(N=>(T(0),x(0),!N))},checked:R})}),R&&m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"grid grid-cols-4 items-center gap-2 md:gap-4",children:m.jsx(qt,{label:s("task_manager.dialog_create_task.task.time.determined.label"),tooltip:s("task_manager.dialog_create_task.task.time.determined.description"),children:m.jsx(vs,{onChange:N=>{T(N)},time:o?o.time:0,className:"col-span-3"})})}),i&&m.jsx("div",{className:"grid grid-cols-4 items-center gap-2 md:gap-4",children:m.jsx(qt,{label:s("task_manager.dialog_create_task.task.time.wasted.label"),tooltip:s("task_manager.dialog_create_task.task.time.wasted.description"),children:m.jsx(Jn,{time:C,onChange:N=>{x(N)}})})})]}),!R&&m.jsx("div",{className:"grid grid-cols-4 items-center gap-2 md:gap-4",children:m.jsx(qt,{label:s("task_manager.dialog_create_task.task.time.duration.label"),tooltip:s("task_manager.dialog_create_task.task.time.duration.description"),children:m.jsx(Jn,{time:E,onChange:N=>{T(N)}})})}),o&&!i&&m.jsx("div",{className:"grid grid-cols-4 items-center gap-2 md:gap-4",children:m.jsx(qt,{label:s("task_manager.dialog_create_task.task.time.wasted.label"),tooltip:s("task_manager.dialog_create_task.task.time.wasted.description"),children:m.jsx(Jn,{time:C,onChange:N=>{x(N)}})})})]})]}),i&&m.jsx("div",{className:"grid grid-cols-4 items-center gap-2 md:gap-4",children:m.jsx(Hg,{weekData:d,selectedDays:c,label:"task_manager.dialog_create_task.task.time.when_day",prefixWeedDay:"task_manager.day_names",toggleDay:I})}),m.jsx("div",{className:"flex gap-1 justify-end",children:m.jsx(we,{animValue:.98,hoverTypeElement:Ne.LINK,hoverStyleElement:Me.none,children:m.jsx(ve,{onClick:()=>{b()},disabled:p==="",variant:"outline",className:"chrono-dialog-submit cursor-pointer",children:s(o?"task_manager.edit":"task_manager.add")})})})]})})})},uv=()=>{const e=Qe(d=>d.playingTask),t=Qe(d=>d.startedAt),n=Qe(d=>d.stopPlayingTask),[o,r]=g.useState(0);g.useEffect(()=>{const d=setInterval(()=>{if(e&&t){const c=Math.floor((Date.now()-t)/1e3);r(e.timeDone+c)}},1e3);return()=>clearInterval(d)},[e,t]);const{hours:i,minutes:s,seconds:l}=Kr(o);return m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(we,{hoverTypeElement:Ne.NONE,hoverStyleElement:Me.circle,children:m.jsx(ve,{size:"icon",variant:"ghost",className:"hover:bg-card/10 hover:text-foreground",onClick:n,children:m.jsx(gl,{})})}),m.jsxs("div",{className:"flex items-center gap-0.5 font-mono",children:[m.jsx(wn,{value:i,padStart:!0}),m.jsx("span",{className:"text-muted-foreground",children:":"}),m.jsx(wn,{value:s,padStart:!0}),m.jsx("span",{className:"text-muted-foreground",children:":"}),m.jsx(wn,{value:l,padStart:!0})]})]})},_n=["health","finance","emotions","relationships","career","spirituality","personal_growth","hobbies","leisure"],cv=({items:e,setItems:t,setContainers:n,onDeletePlannedTask:o,onChangeTasks:r})=>{const i=Qe(p=>p.playingTask),s=Qe(p=>p.stopPlayingTask),[l]=Ye();function d(){const p=l("task_manager.category"),v=Math.max(0,...e.map(T=>{const C=new RegExp(`^${p} (\\d+)$`),x=T.title.match(C);return x?parseInt(x[1],10):0}))+1,y=`${p} ${v}`,E=`cat-${Date.now()}`;kt.unstable_batchedUpdates(()=>{n(T=>[...T,y]),t(T=>{const C=[...T,{id:E,title:y,tasks:[]}];return r(C),C})})}function c(){const p=e.map(v=>v.id),h=p[p.length-1];return String.fromCharCode(h.charCodeAt(0)+1)}function f(p){var v;const h=((v=e.find(y=>y.id===p))==null?void 0:v.tasks)??[];n(y=>y.filter(E=>E!==p)),t(y=>{const E=y.filter(T=>T.id!==p);return r(E),E}),h.forEach(y=>{o&&(y.isPlanned||y.isDetermined)&&o(y.id),i&&i.id===y.id&&s()})}return{handleAddColumn:d,getNextContainerId:c,handleRemove:f}},dv=({isOpen:e,title:t,description:n,onAgree:o,buttonYesTitle:r,buttonNoTitle:i,setIsOpen:s})=>m.jsx(vi,{isOpen:e,setOpen:s,children:m.jsxs(Bo,{className:"w-full h-full touch-auto overscroll-contain",children:[m.jsxs("div",{className:"flex flex-col items-center gap-4 p-6",children:[m.jsx("h3",{className:"text-lg text-foreground/80",children:t}),m.jsx("p",{className:"text-md text-foreground/50",children:n})]}),m.jsx("div",{className:"flex justify-center items-center gap-4",children:m.jsxs(Nt,{className:"flex items-center justify-center gap-2",children:[m.jsx(we,{hoverTypeElement:Ne.SELECT_2,hoverStyleElement:Me.quad,children:m.jsx(ve,{variant:"destructive",className:"w-full",onClick:()=>{o(!0),s(!1)},children:r})}),m.jsx(we,{hoverTypeElement:Ne.SELECT_2,hoverStyleElement:Me.quad,children:m.jsx(ve,{variant:"ghost",className:"w-full hover:bg-muted",onClick:()=>{o(!1),s(!1)},children:i})})]})})]})}),fv=Object.prototype.toString,pv=e=>fv.call(e)==="[object Error]",hv=new Set(["network error","Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed","fetch failed","terminated"," A network error occurred.","Network connection lost"]);function mv(e){if(!(e&&pv(e)&&e.name==="TypeError"&&typeof e.message=="string"))return!1;const{message:n,stack:o}=e;return n==="Load failed"?o===void 0||"__sentry_captured__"in e:n.startsWith("error sending request for url")?!0:hv.has(n)}function gv(e){if(typeof e=="number"){if(e<0)throw new TypeError("Expected `retries` to be a non-negative number.");if(Number.isNaN(e))throw new TypeError("Expected `retries` to be a valid number or Infinity, got NaN.")}else if(e!==void 0)throw new TypeError("Expected `retries` to be a number or Infinity.")}function Yn(e,t,{min:n=0,allowInfinity:o=!1}={}){if(t!==void 0){if(typeof t!="number"||Number.isNaN(t))throw new TypeError(`Expected \`${e}\` to be a number${o?" or Infinity":""}.`);if(!o&&!Number.isFinite(t))throw new TypeError(`Expected \`${e}\` to be a finite number.`);if(t<n)throw new TypeError(`Expected \`${e}\` to be  ${n}.`)}}class tc extends Error{constructor(t){super(),t instanceof Error?(this.originalError=t,{message:t}=t):(this.originalError=new Error(t),this.originalError.stack=this.stack),this.name="AbortError",this.message=t}}function vv(e,t){const n=Math.max(1,e+1),o=t.randomize?Math.random()+1:1;let r=Math.round(o*t.minTimeout*t.factor**(n-1));return r=Math.min(r,t.maxTimeout),r}function Es(e,t){return Number.isFinite(t)?t-(performance.now()-e):t}async function yv({error:e,attemptNumber:t,retriesConsumed:n,startTime:o,options:r}){var v,y,E,T;const i=e instanceof Error?e:new TypeError(`Non-error was thrown: "${e}". You should only throw errors.`);if(i instanceof tc)throw i.originalError;const s=Number.isFinite(r.retries)?Math.max(0,r.retries-n):r.retries,l=r.maxRetryTime??Number.POSITIVE_INFINITY,d=Object.freeze({error:i,attemptNumber:t,retriesLeft:s,retriesConsumed:n});if(await r.onFailedAttempt(d),Es(o,l)<=0)throw i;const c=await r.shouldConsumeRetry(d),f=Es(o,l);if(f<=0||s<=0)throw i;if(i instanceof TypeError&&!mv(i)){if(c)throw i;return(v=r.signal)==null||v.throwIfAborted(),!1}if(!await r.shouldRetry(d))throw i;if(!c)return(y=r.signal)==null||y.throwIfAborted(),!1;const p=vv(n,r),h=Math.min(p,f);return(E=r.signal)==null||E.throwIfAborted(),h>0&&await new Promise((C,x)=>{var R,S;const _=()=>{var I;clearTimeout(w),(I=r.signal)==null||I.removeEventListener("abort",_),x(r.signal.reason)},w=setTimeout(()=>{var I;(I=r.signal)==null||I.removeEventListener("abort",_),C()},h);r.unref&&((R=w.unref)==null||R.call(w)),(S=r.signal)==null||S.addEventListener("abort",_,{once:!0})}),(T=r.signal)==null||T.throwIfAborted(),!0}async function Ev(e,t={}){var i,s,l;if(t={...t},gv(t.retries),Object.hasOwn(t,"forever"))throw new Error("The `forever` option is no longer supported. For many use-cases, you can set `retries: Infinity` instead.");t.retries??(t.retries=10),t.factor??(t.factor=2),t.minTimeout??(t.minTimeout=1e3),t.maxTimeout??(t.maxTimeout=Number.POSITIVE_INFINITY),t.maxRetryTime??(t.maxRetryTime=Number.POSITIVE_INFINITY),t.randomize??(t.randomize=!1),t.onFailedAttempt??(t.onFailedAttempt=()=>{}),t.shouldRetry??(t.shouldRetry=()=>!0),t.shouldConsumeRetry??(t.shouldConsumeRetry=()=>!0),Yn("factor",t.factor,{min:0,allowInfinity:!1}),Yn("minTimeout",t.minTimeout,{min:0,allowInfinity:!1}),Yn("maxTimeout",t.maxTimeout,{min:0,allowInfinity:!0}),Yn("maxRetryTime",t.maxRetryTime,{min:0,allowInfinity:!0}),t.factor>0||(t.factor=1),(i=t.signal)==null||i.throwIfAborted();let n=0,o=0;const r=performance.now();for(;!Number.isFinite(t.retries)||o<=t.retries;){n++;try{(s=t.signal)==null||s.throwIfAborted();const d=await e(n);return(l=t.signal)==null||l.throwIfAborted(),d}catch(d){await yv({error:d,attemptNumber:n,retriesConsumed:o,startTime:r,options:t})&&o++}}throw new Error("Retry attempts exhausted without throwing an error.")}var Tv={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Cv,Sv;function wv(){return{geminiUrl:Cv,vertexUrl:Sv}}function _v(e,t,n,o){var r,i;if(!(e!=null&&e.baseUrl)){const s=wv();return t?(r=s.vertexUrl)!==null&&r!==void 0?r:n:(i=s.geminiUrl)!==null&&i!==void 0?i:o}return e.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Et{}function L(e,t){const n=/\{([^}]+)\}/g;return e.replace(n,(o,r)=>{if(Object.prototype.hasOwnProperty.call(t,r)){const i=t[r];return i!=null?String(i):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function u(e,t,n){for(let i=0;i<t.length-1;i++){const s=t[i];if(s.endsWith("[]")){const l=s.slice(0,-2);if(!(l in e))if(Array.isArray(n))e[l]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${s}`);if(Array.isArray(e[l])){const d=e[l];if(Array.isArray(n))for(let c=0;c<d.length;c++){const f=d[c];u(f,t.slice(i+1),n[c])}else for(const c of d)u(c,t.slice(i+1),n)}return}else if(s.endsWith("[0]")){const l=s.slice(0,-3);l in e||(e[l]=[{}]);const d=e[l];u(d[0],t.slice(i+1),n);return}(!e[s]||typeof e[s]!="object")&&(e[s]={}),e=e[s]}const o=t[t.length-1],r=e[o];if(r!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===r)return;if(typeof r=="object"&&typeof n=="object"&&r!==null&&n!==null)Object.assign(r,n);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else o==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(e,n):e[o]=n}function a(e,t,n=void 0){try{if(t.length===1&&t[0]==="_self")return e;for(let o=0;o<t.length;o++){if(typeof e!="object"||e===null)return n;const r=t[o];if(r.endsWith("[]")){const i=r.slice(0,-2);if(i in e){const s=e[i];return Array.isArray(s)?s.map(l=>a(l,t.slice(o+1),n)):n}else return n}else e=e[r]}return e}catch(o){if(o instanceof TypeError)return n;throw o}}function xv(e,t){for(const[n,o]of Object.entries(t)){const r=n.split("."),i=o.split("."),s=new Set;let l=-1;for(let d=0;d<r.length;d++)if(r[d]==="*"){l=d;break}if(l!==-1&&i.length>l)for(let d=l;d<i.length;d++){const c=i[d];c!=="*"&&!c.endsWith("[]")&&!c.endsWith("[0]")&&s.add(c)}Rr(e,r,i,0,s)}}function Rr(e,t,n,o,r){if(o>=t.length||typeof e!="object"||e===null)return;const i=t[o];if(i.endsWith("[]")){const s=i.slice(0,-2),l=e;if(s in l&&Array.isArray(l[s]))for(const d of l[s])Rr(d,t,n,o+1,r)}else if(i==="*"){if(typeof e=="object"&&e!==null&&!Array.isArray(e)){const s=e,l=Object.keys(s).filter(c=>!c.startsWith("_")&&!r.has(c)),d={};for(const c of l)d[c]=s[c];for(const[c,f]of Object.entries(d)){const p=[];for(const h of n.slice(o))h==="*"?p.push(c):p.push(h);u(s,p,f)}for(const c of l)delete s[c]}}else{const s=e;i in s&&Rr(s[i],t,n,o+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ci(e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Iv(e){const t={},n=a(e,["operationName"]);n!=null&&u(t,["operationName"],n);const o=a(e,["resourceName"]);return o!=null&&u(t,["_url","resourceName"],o),t}function Rv(e){const t={},n=a(e,["name"]);n!=null&&u(t,["name"],n);const o=a(e,["metadata"]);o!=null&&u(t,["metadata"],o);const r=a(e,["done"]);r!=null&&u(t,["done"],r);const i=a(e,["error"]);i!=null&&u(t,["error"],i);const s=a(e,["response","generateVideoResponse"]);return s!=null&&u(t,["response"],bv(s)),t}function Av(e){const t={},n=a(e,["name"]);n!=null&&u(t,["name"],n);const o=a(e,["metadata"]);o!=null&&u(t,["metadata"],o);const r=a(e,["done"]);r!=null&&u(t,["done"],r);const i=a(e,["error"]);i!=null&&u(t,["error"],i);const s=a(e,["response"]);return s!=null&&u(t,["response"],Nv(s)),t}function bv(e){const t={},n=a(e,["generatedSamples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>Mv(s))),u(t,["generatedVideos"],i)}const o=a(e,["raiMediaFilteredCount"]);o!=null&&u(t,["raiMediaFilteredCount"],o);const r=a(e,["raiMediaFilteredReasons"]);return r!=null&&u(t,["raiMediaFilteredReasons"],r),t}function Nv(e){const t={},n=a(e,["videos"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>Pv(s))),u(t,["generatedVideos"],i)}const o=a(e,["raiMediaFilteredCount"]);o!=null&&u(t,["raiMediaFilteredCount"],o);const r=a(e,["raiMediaFilteredReasons"]);return r!=null&&u(t,["raiMediaFilteredReasons"],r),t}function Mv(e){const t={},n=a(e,["video"]);return n!=null&&u(t,["video"],Vv(n)),t}function Pv(e){const t={},n=a(e,["_self"]);return n!=null&&u(t,["video"],Gv(n)),t}function Dv(e){const t={},n=a(e,["operationName"]);return n!=null&&u(t,["_url","operationName"],n),t}function kv(e){const t={},n=a(e,["operationName"]);return n!=null&&u(t,["_url","operationName"],n),t}function Lv(e){const t={},n=a(e,["name"]);n!=null&&u(t,["name"],n);const o=a(e,["metadata"]);o!=null&&u(t,["metadata"],o);const r=a(e,["done"]);r!=null&&u(t,["done"],r);const i=a(e,["error"]);i!=null&&u(t,["error"],i);const s=a(e,["response"]);return s!=null&&u(t,["response"],Uv(s)),t}function Uv(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&u(t,["sdkHttpResponse"],n);const o=a(e,["parent"]);o!=null&&u(t,["parent"],o);const r=a(e,["documentName"]);return r!=null&&u(t,["documentName"],r),t}function nc(e){const t={},n=a(e,["name"]);n!=null&&u(t,["name"],n);const o=a(e,["metadata"]);o!=null&&u(t,["metadata"],o);const r=a(e,["done"]);r!=null&&u(t,["done"],r);const i=a(e,["error"]);i!=null&&u(t,["error"],i);const s=a(e,["response"]);return s!=null&&u(t,["response"],Fv(s)),t}function Fv(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&u(t,["sdkHttpResponse"],n);const o=a(e,["parent"]);o!=null&&u(t,["parent"],o);const r=a(e,["documentName"]);return r!=null&&u(t,["documentName"],r),t}function Vv(e){const t={},n=a(e,["uri"]);n!=null&&u(t,["uri"],n);const o=a(e,["encodedVideo"]);o!=null&&u(t,["videoBytes"],Ci(o));const r=a(e,["encoding"]);return r!=null&&u(t,["mimeType"],r),t}function Gv(e){const t={},n=a(e,["gcsUri"]);n!=null&&u(t,["uri"],n);const o=a(e,["bytesBase64Encoded"]);o!=null&&u(t,["videoBytes"],Ci(o));const r=a(e,["mimeType"]);return r!=null&&u(t,["mimeType"],r),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ts;(function(e){e.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",e.OUTCOME_OK="OUTCOME_OK",e.OUTCOME_FAILED="OUTCOME_FAILED",e.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Ts||(Ts={}));var Cs;(function(e){e.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",e.PYTHON="PYTHON"})(Cs||(Cs={}));var Ss;(function(e){e.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",e.SILENT="SILENT",e.WHEN_IDLE="WHEN_IDLE",e.INTERRUPT="INTERRUPT"})(Ss||(Ss={}));var It;(function(e){e.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",e.STRING="STRING",e.NUMBER="NUMBER",e.INTEGER="INTEGER",e.BOOLEAN="BOOLEAN",e.ARRAY="ARRAY",e.OBJECT="OBJECT",e.NULL="NULL"})(It||(It={}));var ws;(function(e){e.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",e.SIMPLE_SEARCH="SIMPLE_SEARCH",e.ELASTIC_SEARCH="ELASTIC_SEARCH"})(ws||(ws={}));var _s;(function(e){e.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",e.NO_AUTH="NO_AUTH",e.API_KEY_AUTH="API_KEY_AUTH",e.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",e.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",e.OAUTH="OAUTH",e.OIDC_AUTH="OIDC_AUTH"})(_s||(_s={}));var xs;(function(e){e.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",e.HTTP_IN_QUERY="HTTP_IN_QUERY",e.HTTP_IN_HEADER="HTTP_IN_HEADER",e.HTTP_IN_PATH="HTTP_IN_PATH",e.HTTP_IN_BODY="HTTP_IN_BODY",e.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(xs||(xs={}));var Is;(function(e){e.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",e.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",e.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",e.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Is||(Is={}));var Rs;(function(e){e.UNSPECIFIED="UNSPECIFIED",e.BLOCKING="BLOCKING",e.NON_BLOCKING="NON_BLOCKING"})(Rs||(Rs={}));var As;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(As||(As={}));var bs;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE",e.VALIDATED="VALIDATED"})(bs||(bs={}));var Ns;(function(e){e.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH",e.MINIMAL="MINIMAL"})(Ns||(Ns={}));var Ms;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",e.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",e.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",e.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",e.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Ms||(Ms={}));var Ps;(function(e){e.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",e.SEVERITY="SEVERITY",e.PROBABILITY="PROBABILITY"})(Ps||(Ps={}));var Ds;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE",e.OFF="OFF"})(Ds||(Ds={}));var ks;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.IMAGE_SAFETY="IMAGE_SAFETY",e.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",e.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",e.NO_IMAGE="NO_IMAGE",e.IMAGE_RECITATION="IMAGE_RECITATION",e.IMAGE_OTHER="IMAGE_OTHER"})(ks||(ks={}));var Ls;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(Ls||(Ls={}));var Us;(function(e){e.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",e.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",e.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",e.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",e.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Us||(Us={}));var Fs;(function(e){e.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",e.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",e.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",e.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",e.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Fs||(Fs={}));var Vs;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.IMAGE_SAFETY="IMAGE_SAFETY",e.MODEL_ARMOR="MODEL_ARMOR",e.JAILBREAK="JAILBREAK"})(Vs||(Vs={}));var Gs;(function(e){e.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",e.ON_DEMAND="ON_DEMAND",e.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Gs||(Gs={}));var _o;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.AUDIO="AUDIO"})(_o||(_o={}));var Os;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Os||(Os={}));var Hs;(function(e){e.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",e.TUNING_MODE_FULL="TUNING_MODE_FULL",e.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Hs||(Hs={}));var $s;(function(e){e.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",e.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",e.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",e.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",e.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",e.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",e.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})($s||($s={}));var Ar;(function(e){e.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",e.JOB_STATE_QUEUED="JOB_STATE_QUEUED",e.JOB_STATE_PENDING="JOB_STATE_PENDING",e.JOB_STATE_RUNNING="JOB_STATE_RUNNING",e.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",e.JOB_STATE_FAILED="JOB_STATE_FAILED",e.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",e.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",e.JOB_STATE_PAUSED="JOB_STATE_PAUSED",e.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",e.JOB_STATE_UPDATING="JOB_STATE_UPDATING",e.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Ar||(Ar={}));var Bs;(function(e){e.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",e.TUNING_TASK_I2V="TUNING_TASK_I2V",e.TUNING_TASK_T2V="TUNING_TASK_T2V",e.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Bs||(Bs={}));var qs;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",e.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(qs||(qs={}));var br;(function(e){e.COLLECTION="COLLECTION"})(br||(br={}));var zs;(function(e){e.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",e.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",e.BALANCED="BALANCED",e.PRIORITIZE_COST="PRIORITIZE_COST"})(zs||(zs={}));var Js;(function(e){e.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",e.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Js||(Js={}));var Ws;(function(e){e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(Ws||(Ws={}));var Ys;(function(e){e.DONT_ALLOW="DONT_ALLOW",e.ALLOW_ADULT="ALLOW_ADULT",e.ALLOW_ALL="ALLOW_ALL"})(Ys||(Ys={}));var Ks;(function(e){e.auto="auto",e.en="en",e.ja="ja",e.ko="ko",e.hi="hi",e.zh="zh",e.pt="pt",e.es="es"})(Ks||(Ks={}));var Xs;(function(e){e.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",e.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",e.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",e.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",e.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Xs||(Xs={}));var Qs;(function(e){e.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",e.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",e.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",e.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Qs||(Qs={}));var Zs;(function(e){e.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",e.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",e.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",e.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Zs||(Zs={}));var js;(function(e){e.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",e.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",e.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",e.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",e.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",e.EDIT_MODE_STYLE="EDIT_MODE_STYLE",e.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",e.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(js||(js={}));var ea;(function(e){e.FOREGROUND="FOREGROUND",e.BACKGROUND="BACKGROUND",e.PROMPT="PROMPT",e.SEMANTIC="SEMANTIC",e.INTERACTIVE="INTERACTIVE"})(ea||(ea={}));var ta;(function(e){e.ASSET="ASSET",e.STYLE="STYLE"})(ta||(ta={}));var na;(function(e){e.INSERT="INSERT",e.REMOVE="REMOVE",e.REMOVE_STATIC="REMOVE_STATIC",e.OUTPAINT="OUTPAINT"})(na||(na={}));var oa;(function(e){e.OPTIMIZED="OPTIMIZED",e.LOSSLESS="LOSSLESS"})(oa||(oa={}));var ra;(function(e){e.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",e.PREFERENCE_TUNING="PREFERENCE_TUNING",e.DISTILLATION="DISTILLATION"})(ra||(ra={}));var ia;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.STATE_PENDING="STATE_PENDING",e.STATE_ACTIVE="STATE_ACTIVE",e.STATE_FAILED="STATE_FAILED"})(ia||(ia={}));var sa;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.PROCESSING="PROCESSING",e.ACTIVE="ACTIVE",e.FAILED="FAILED"})(sa||(sa={}));var aa;(function(e){e.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",e.UPLOADED="UPLOADED",e.GENERATED="GENERATED",e.REGISTERED="REGISTERED"})(aa||(aa={}));var la;(function(e){e.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.RESPONSE_REJECTED="RESPONSE_REJECTED",e.NEED_MORE_INPUT="NEED_MORE_INPUT"})(la||(la={}));var ua;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.VIDEO="VIDEO",e.AUDIO="AUDIO",e.DOCUMENT="DOCUMENT"})(ua||(ua={}));var ca;(function(e){e.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",e.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",e.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(ca||(ca={}));var da;(function(e){e.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",e.ACTIVITY_START="ACTIVITY_START",e.ACTIVITY_END="ACTIVITY_END"})(da||(da={}));var fa;(function(e){e.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",e.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",e.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(fa||(fa={}));var pa;(function(e){e.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",e.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",e.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(pa||(pa={}));var ha;(function(e){e.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",e.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",e.NO_INTERRUPTION="NO_INTERRUPTION"})(ha||(ha={}));var ma;(function(e){e.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",e.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",e.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(ma||(ma={}));var ga;(function(e){e.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",e.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",e.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",e.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",e.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",e.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",e.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",e.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",e.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",e.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",e.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",e.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",e.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(ga||(ga={}));var va;(function(e){e.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",e.QUALITY="QUALITY",e.DIVERSITY="DIVERSITY",e.VOCALIZATION="VOCALIZATION"})(va||(va={}));var Yt;(function(e){e.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",e.PLAY="PLAY",e.PAUSE="PAUSE",e.STOP="STOP",e.RESET_CONTEXT="RESET_CONTEXT"})(Yt||(Yt={}));class Nr{constructor(t){const n={};for(const o of t.headers.entries())n[o[0]]=o[1];this.headers=n,this.responseInternal=t}json(){return this.responseInternal.json()}}class hn{get text(){var t,n,o,r,i,s,l,d;if(((r=(o=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",f=!1;const p=[];for(const h of(d=(l=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)!==null&&d!==void 0?d:[]){for(const[v,y]of Object.entries(h))v!=="text"&&v!=="thought"&&v!=="thoughtSignature"&&(y!==null||y!==void 0)&&p.push(v);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;f=!0,c+=h.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?c:void 0}get data(){var t,n,o,r,i,s,l,d;if(((r=(o=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="";const f=[];for(const p of(d=(l=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)!==null&&d!==void 0?d:[]){for(const[h,v]of Object.entries(p))h!=="inlineData"&&(v!==null||v!==void 0)&&f.push(h);p.inlineData&&typeof p.inlineData.data=="string"&&(c+=atob(p.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var t,n,o,r,i,s,l,d;if(((r=(o=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const c=(d=(l=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)===null||d===void 0?void 0:d.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if((c==null?void 0:c.length)!==0)return c}get executableCode(){var t,n,o,r,i,s,l,d,c;if(((r=(o=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const f=(d=(l=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)===null||d===void 0?void 0:d.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return(c=f==null?void 0:f[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var t,n,o,r,i,s,l,d,c;if(((r=(o=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const f=(d=(l=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)===null||d===void 0?void 0:d.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return(c=f==null?void 0:f[0])===null||c===void 0?void 0:c.output}}class ya{}class Ea{}class Ov{}class Hv{}class $v{}class Bv{}class Ta{}class Ca{}class Sa{}class qv{}class xo{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const o=new xo;let r;const i=t;return n?r=Av(i):r=Rv(i),Object.assign(o,r),o}}class wa{}class _a{}class xa{}class Ia{}class zv{}class Jv{}class Wv{}class Si{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const o=new Si,i=Lv(t);return Object.assign(o,i),o}}class Yv{}class Kv{}class Xv{}class Qv{}class Ra{}class Zv{get text(){var t,n,o;let r="",i=!1;const s=[];for(const l of(o=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[d,c]of Object.entries(l))d!=="text"&&d!=="thought"&&c!==null&&s.push(d);if(typeof l.text=="string"){if(typeof l.thought=="boolean"&&l.thought)continue;i=!0,r+=l.text}}return s.length>0&&console.warn(`there are non-text parts ${s} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),i?r:void 0}get data(){var t,n,o;let r="";const i=[];for(const s of(o=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[l,d]of Object.entries(s))l!=="inlineData"&&d!==null&&i.push(l);s.inlineData&&typeof s.inlineData.data=="string"&&(r+=atob(s.inlineData.data))}return i.length>0&&console.warn(`there are non-data parts ${i} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class jv{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class wi{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const o=new wi,i=nc(t);return Object.assign(o,i),o}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function se(e,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(t.includes("..")||t.includes("?")||t.includes("&"))throw new Error("invalid model parameter");if(e.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const n=t.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function oc(e,t){const n=se(e,t);return n?n.startsWith("publishers/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}`:n.startsWith("models/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/publishers/google/${n}`:n:""}function rc(e){return Array.isArray(e)?e.map(t=>Io(t)):[Io(e)]}function Io(e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function ic(e){const t=Io(e);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function sc(e){const t=Io(e);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function Aa(e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function ac(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(t=>Aa(t)):[Aa(e)]}function Mr(e){return e!=null&&typeof e=="object"&&"parts"in e&&Array.isArray(e.parts)}function ba(e){return e!=null&&typeof e=="object"&&"functionCall"in e}function Na(e){return e!=null&&typeof e=="object"&&"functionResponse"in e}function Fe(e){if(e==null)throw new Error("ContentUnion is required");return Mr(e)?e:{role:"user",parts:ac(e)}}function _i(e,t){if(!t)return[];if(e.isVertexAI()&&Array.isArray(t))return t.flatMap(n=>{const o=Fe(n);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(e.isVertexAI()){const n=Fe(t);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(t)?t.map(n=>Fe(n)):[Fe(t)]}function Ze(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(ba(e)||Na(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Fe(e)]}const t=[],n=[],o=Mr(e[0]);for(const r of e){const i=Mr(r);if(i!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(i)t.push(r);else{if(ba(r)||Na(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(r)}}return o||t.push({role:"user",parts:ac(n)}),t}function ey(e,t){e.includes("null")&&(t.nullable=!0);const n=e.filter(o=>o!=="null");if(n.length===1)t.type=Object.values(It).includes(n[0].toUpperCase())?n[0].toUpperCase():It.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const o of n)t.anyOf.push({type:Object.values(It).includes(o.toUpperCase())?o.toUpperCase():It.TYPE_UNSPECIFIED})}}function Qt(e){const t={},n=["items"],o=["anyOf"],r=["properties"];if(e.type&&e.anyOf)throw new Error("type and anyOf cannot be both populated.");const i=e.anyOf;i!=null&&i.length==2&&(i[0].type==="null"?(t.nullable=!0,e=i[1]):i[1].type==="null"&&(t.nullable=!0,e=i[0])),e.type instanceof Array&&ey(e.type,t);for(const[s,l]of Object.entries(e))if(l!=null)if(s=="type"){if(l==="null")throw new Error("type: null can not be the only possible type for the field.");if(l instanceof Array)continue;t.type=Object.values(It).includes(l.toUpperCase())?l.toUpperCase():It.TYPE_UNSPECIFIED}else if(n.includes(s))t[s]=Qt(l);else if(o.includes(s)){const d=[];for(const c of l){if(c.type=="null"){t.nullable=!0;continue}d.push(Qt(c))}t[s]=d}else if(r.includes(s)){const d={};for(const[c,f]of Object.entries(l))d[c]=Qt(f);t[s]=d}else{if(s==="additionalProperties")continue;t[s]=l}return t}function xi(e){return Qt(e)}function Ii(e){if(typeof e=="object")return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function Ri(e){if("multiSpeakerVoiceConfig"in e)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return e}function sn(e){if(e.functionDeclarations)for(const t of e.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=Qt(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=Qt(t.response));return e}function an(e){if(e==null)throw new Error("tools is required");if(!Array.isArray(e))throw new Error("tools is required and must be an array of Tools");const t=[];for(const n of e)t.push(n);return t}function ty(e,t,n,o=1){const r=!t.startsWith(`${n}/`)&&t.split("/").length===o;return e.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${e.getProject()}/${t}`:t.startsWith(`${n}/`)?`projects/${e.getProject()}/locations/${e.getLocation()}/${t}`:r?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}/${t}`:t:r?`${n}/${t}`:t}function Tt(e,t){if(typeof t!="string")throw new Error("name must be a string");return ty(e,t,"cachedContents")}function lc(e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function Mt(e){return Ci(e)}function ny(e){return e!=null&&typeof e=="object"&&"name"in e}function oy(e){return e!=null&&typeof e=="object"&&"video"in e}function ry(e){return e!=null&&typeof e=="object"&&"uri"in e}function uc(e){var t;let n;if(ny(e)&&(n=e.name),!(ry(e)&&(n=e.uri,n===void 0))&&!(oy(e)&&(n=(t=e.video)===null||t===void 0?void 0:t.uri,n===void 0))){if(typeof e=="string"&&(n=e),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const r=n.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${n}`);n=r[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function cc(e,t){let n;return e.isVertexAI()?n=t?"publishers/google/models":"models":n=t?"models":"tunedModels",n}function dc(e){for(const t of["models","tunedModels","publisherModels"])if(iy(e,t))return e[t];return[]}function iy(e,t){return e!==null&&typeof e=="object"&&t in e}function sy(e,t={}){const n=e,o={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(o.responseJsonSchema=n.outputSchema),t.behavior&&(o.behavior=t.behavior),{functionDeclarations:[o]}}function ay(e,t={}){const n=[],o=new Set;for(const r of e){const i=r.name;if(o.has(i))throw new Error(`Duplicate function name ${i} found in MCP tools. Please ensure function names are unique.`);o.add(i);const s=sy(r,t);s.functionDeclarations&&n.push(...s.functionDeclarations)}return{functionDeclarations:n}}function fc(e,t){let n;if(typeof t=="string")if(e.isVertexAI())if(t.startsWith("gs://"))n={format:"jsonl",gcsUri:[t]};else if(t.startsWith("bq://"))n={format:"bigquery",bigqueryUri:t};else throw new Error(`Unsupported string source for Vertex AI: ${t}`);else if(t.startsWith("files/"))n={fileName:t};else throw new Error(`Unsupported string source for Gemini API: ${t}`);else if(Array.isArray(t)){if(e.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:t}}else n=t;const o=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,r=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(e.isVertexAI()){if(r>0||o!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(o>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function ly(e){if(typeof e!="string")return e;const t=e;if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:t};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};throw new Error(`Unsupported destination: ${t}`)}function pc(e){if(typeof e!="object"||e===null)return{};const t=e,n=t.inlinedResponses;if(typeof n!="object"||n===null)return e;const r=n.inlinedResponses;if(!Array.isArray(r)||r.length===0)return e;let i=!1;for(const s of r){if(typeof s!="object"||s===null)continue;const d=s.response;if(typeof d!="object"||d===null)continue;if(d.embedding!==void 0){i=!0;break}}return i&&(t.inlinedEmbedContentResponses=t.inlinedResponses,delete t.inlinedResponses),e}function ln(e,t){const n=t;if(!e.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function hc(e){const t=e;return t==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":t==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":t==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":t==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":t==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":t==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":t==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function uy(e){const t={},n=a(e,["responsesFile"]);n!=null&&u(t,["fileName"],n);const o=a(e,["inlinedResponses","inlinedResponses"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>By(s))),u(t,["inlinedResponses"],i)}const r=a(e,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),u(t,["inlinedEmbedContentResponses"],i)}return t}function cy(e){const t={},n=a(e,["predictionsFormat"]);n!=null&&u(t,["format"],n);const o=a(e,["gcsDestination","outputUriPrefix"]);o!=null&&u(t,["gcsUri"],o);const r=a(e,["bigqueryDestination","outputUri"]);return r!=null&&u(t,["bigqueryUri"],r),t}function dy(e){const t={},n=a(e,["format"]);n!=null&&u(t,["predictionsFormat"],n);const o=a(e,["gcsUri"]);o!=null&&u(t,["gcsDestination","outputUriPrefix"],o);const r=a(e,["bigqueryUri"]);if(r!=null&&u(t,["bigqueryDestination","outputUri"],r),a(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(a(e,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(a(e,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return t}function oo(e){const t={},n=a(e,["name"]);n!=null&&u(t,["name"],n);const o=a(e,["metadata","displayName"]);o!=null&&u(t,["displayName"],o);const r=a(e,["metadata","state"]);r!=null&&u(t,["state"],hc(r));const i=a(e,["metadata","createTime"]);i!=null&&u(t,["createTime"],i);const s=a(e,["metadata","endTime"]);s!=null&&u(t,["endTime"],s);const l=a(e,["metadata","updateTime"]);l!=null&&u(t,["updateTime"],l);const d=a(e,["metadata","model"]);d!=null&&u(t,["model"],d);const c=a(e,["metadata","output"]);return c!=null&&u(t,["dest"],uy(pc(c))),t}function Pr(e){const t={},n=a(e,["name"]);n!=null&&u(t,["name"],n);const o=a(e,["displayName"]);o!=null&&u(t,["displayName"],o);const r=a(e,["state"]);r!=null&&u(t,["state"],hc(r));const i=a(e,["error"]);i!=null&&u(t,["error"],i);const s=a(e,["createTime"]);s!=null&&u(t,["createTime"],s);const l=a(e,["startTime"]);l!=null&&u(t,["startTime"],l);const d=a(e,["endTime"]);d!=null&&u(t,["endTime"],d);const c=a(e,["updateTime"]);c!=null&&u(t,["updateTime"],c);const f=a(e,["model"]);f!=null&&u(t,["model"],f);const p=a(e,["inputConfig"]);p!=null&&u(t,["src"],fy(p));const h=a(e,["outputConfig"]);h!=null&&u(t,["dest"],cy(pc(h)));const v=a(e,["completionStats"]);return v!=null&&u(t,["completionStats"],v),t}function fy(e){const t={},n=a(e,["instancesFormat"]);n!=null&&u(t,["format"],n);const o=a(e,["gcsSource","uris"]);o!=null&&u(t,["gcsUri"],o);const r=a(e,["bigquerySource","inputUri"]);return r!=null&&u(t,["bigqueryUri"],r),t}function py(e,t){const n={};if(a(t,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(a(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(a(t,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=a(t,["fileName"]);o!=null&&u(n,["fileName"],o);const r=a(t,["inlinedRequests"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>$y(e,s))),u(n,["requests","requests"],i)}return n}function hy(e){const t={},n=a(e,["format"]);n!=null&&u(t,["instancesFormat"],n);const o=a(e,["gcsUri"]);o!=null&&u(t,["gcsSource","uris"],o);const r=a(e,["bigqueryUri"]);if(r!=null&&u(t,["bigquerySource","inputUri"],r),a(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(a(e,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return t}function my(e){const t={},n=a(e,["data"]);if(n!=null&&u(t,["data"],n),a(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=a(e,["mimeType"]);return o!=null&&u(t,["mimeType"],o),t}function gy(e,t){const n={},o=a(t,["name"]);return o!=null&&u(n,["_url","name"],ln(e,o)),n}function vy(e,t){const n={},o=a(t,["name"]);return o!=null&&u(n,["_url","name"],ln(e,o)),n}function yy(e){const t={},n=a(e,["content"]);n!=null&&u(t,["content"],n);const o=a(e,["citationMetadata"]);o!=null&&u(t,["citationMetadata"],Ey(o));const r=a(e,["tokenCount"]);r!=null&&u(t,["tokenCount"],r);const i=a(e,["finishReason"]);i!=null&&u(t,["finishReason"],i);const s=a(e,["avgLogprobs"]);s!=null&&u(t,["avgLogprobs"],s);const l=a(e,["groundingMetadata"]);l!=null&&u(t,["groundingMetadata"],l);const d=a(e,["index"]);d!=null&&u(t,["index"],d);const c=a(e,["logprobsResult"]);c!=null&&u(t,["logprobsResult"],c);const f=a(e,["safetyRatings"]);if(f!=null){let h=f;Array.isArray(h)&&(h=h.map(v=>v)),u(t,["safetyRatings"],h)}const p=a(e,["urlContextMetadata"]);return p!=null&&u(t,["urlContextMetadata"],p),t}function Ey(e){const t={},n=a(e,["citationSources"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>r)),u(t,["citations"],o)}return t}function mc(e){const t={},n=a(e,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Xy(i))),u(t,["parts"],r)}const o=a(e,["role"]);return o!=null&&u(t,["role"],o),t}function Ty(e,t){const n={},o=a(e,["displayName"]);if(t!==void 0&&o!=null&&u(t,["batch","displayName"],o),a(e,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function Cy(e,t){const n={},o=a(e,["displayName"]);t!==void 0&&o!=null&&u(t,["displayName"],o);const r=a(e,["dest"]);return t!==void 0&&r!=null&&u(t,["outputConfig"],dy(ly(r))),n}function Ma(e,t){const n={},o=a(t,["model"]);o!=null&&u(n,["_url","model"],se(e,o));const r=a(t,["src"]);r!=null&&u(n,["batch","inputConfig"],py(e,fc(e,r)));const i=a(t,["config"]);return i!=null&&Ty(i,n),n}function Sy(e,t){const n={},o=a(t,["model"]);o!=null&&u(n,["model"],se(e,o));const r=a(t,["src"]);r!=null&&u(n,["inputConfig"],hy(fc(e,r)));const i=a(t,["config"]);return i!=null&&Cy(i,n),n}function wy(e,t){const n={},o=a(e,["displayName"]);return t!==void 0&&o!=null&&u(t,["batch","displayName"],o),n}function _y(e,t){const n={},o=a(t,["model"]);o!=null&&u(n,["_url","model"],se(e,o));const r=a(t,["src"]);r!=null&&u(n,["batch","inputConfig"],My(e,r));const i=a(t,["config"]);return i!=null&&wy(i,n),n}function xy(e,t){const n={},o=a(t,["name"]);return o!=null&&u(n,["_url","name"],ln(e,o)),n}function Iy(e,t){const n={},o=a(t,["name"]);return o!=null&&u(n,["_url","name"],ln(e,o)),n}function Ry(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&u(t,["sdkHttpResponse"],n);const o=a(e,["name"]);o!=null&&u(t,["name"],o);const r=a(e,["done"]);r!=null&&u(t,["done"],r);const i=a(e,["error"]);return i!=null&&u(t,["error"],i),t}function Ay(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&u(t,["sdkHttpResponse"],n);const o=a(e,["name"]);o!=null&&u(t,["name"],o);const r=a(e,["done"]);r!=null&&u(t,["done"],r);const i=a(e,["error"]);return i!=null&&u(t,["error"],i),t}function by(e,t){const n={},o=a(t,["contents"]);if(o!=null){let i=_i(e,o);Array.isArray(i)&&(i=i.map(s=>s)),u(n,["requests[]","request","content"],i)}const r=a(t,["config"]);return r!=null&&(u(n,["_self"],Ny(r,n)),xv(n,{"requests[].*":"requests[].request.*"})),n}function Ny(e,t){const n={},o=a(e,["taskType"]);t!==void 0&&o!=null&&u(t,["requests[]","taskType"],o);const r=a(e,["title"]);t!==void 0&&r!=null&&u(t,["requests[]","title"],r);const i=a(e,["outputDimensionality"]);if(t!==void 0&&i!=null&&u(t,["requests[]","outputDimensionality"],i),a(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(a(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function My(e,t){const n={},o=a(t,["fileName"]);o!=null&&u(n,["file_name"],o);const r=a(t,["inlinedRequests"]);return r!=null&&u(n,["requests"],by(e,r)),n}function Py(e){const t={};if(a(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(e,["fileUri"]);n!=null&&u(t,["fileUri"],n);const o=a(e,["mimeType"]);return o!=null&&u(t,["mimeType"],o),t}function Dy(e){const t={},n=a(e,["id"]);n!=null&&u(t,["id"],n);const o=a(e,["args"]);o!=null&&u(t,["args"],o);const r=a(e,["name"]);if(r!=null&&u(t,["name"],r),a(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function ky(e){const t={},n=a(e,["allowedFunctionNames"]);n!=null&&u(t,["allowedFunctionNames"],n);const o=a(e,["mode"]);if(o!=null&&u(t,["mode"],o),a(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function Ly(e,t,n){const o={},r=a(t,["systemInstruction"]);n!==void 0&&r!=null&&u(n,["systemInstruction"],mc(Fe(r)));const i=a(t,["temperature"]);i!=null&&u(o,["temperature"],i);const s=a(t,["topP"]);s!=null&&u(o,["topP"],s);const l=a(t,["topK"]);l!=null&&u(o,["topK"],l);const d=a(t,["candidateCount"]);d!=null&&u(o,["candidateCount"],d);const c=a(t,["maxOutputTokens"]);c!=null&&u(o,["maxOutputTokens"],c);const f=a(t,["stopSequences"]);f!=null&&u(o,["stopSequences"],f);const p=a(t,["responseLogprobs"]);p!=null&&u(o,["responseLogprobs"],p);const h=a(t,["logprobs"]);h!=null&&u(o,["logprobs"],h);const v=a(t,["presencePenalty"]);v!=null&&u(o,["presencePenalty"],v);const y=a(t,["frequencyPenalty"]);y!=null&&u(o,["frequencyPenalty"],y);const E=a(t,["seed"]);E!=null&&u(o,["seed"],E);const T=a(t,["responseMimeType"]);T!=null&&u(o,["responseMimeType"],T);const C=a(t,["responseSchema"]);C!=null&&u(o,["responseSchema"],xi(C));const x=a(t,["responseJsonSchema"]);if(x!=null&&u(o,["responseJsonSchema"],x),a(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(a(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const _=a(t,["safetySettings"]);if(n!==void 0&&_!=null){let k=_;Array.isArray(k)&&(k=k.map(G=>Qy(G))),u(n,["safetySettings"],k)}const w=a(t,["tools"]);if(n!==void 0&&w!=null){let k=an(w);Array.isArray(k)&&(k=k.map(G=>jy(sn(G)))),u(n,["tools"],k)}const R=a(t,["toolConfig"]);if(n!==void 0&&R!=null&&u(n,["toolConfig"],Zy(R)),a(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const S=a(t,["cachedContent"]);n!==void 0&&S!=null&&u(n,["cachedContent"],Tt(e,S));const I=a(t,["responseModalities"]);I!=null&&u(o,["responseModalities"],I);const b=a(t,["mediaResolution"]);b!=null&&u(o,["mediaResolution"],b);const A=a(t,["speechConfig"]);if(A!=null&&u(o,["speechConfig"],Ii(A)),a(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const N=a(t,["thinkingConfig"]);N!=null&&u(o,["thinkingConfig"],N);const P=a(t,["imageConfig"]);P!=null&&u(o,["imageConfig"],Hy(P));const O=a(t,["enableEnhancedCivicAnswers"]);if(O!=null&&u(o,["enableEnhancedCivicAnswers"],O),a(t,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return o}function Uy(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&u(t,["sdkHttpResponse"],n);const o=a(e,["candidates"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(c=>yy(c))),u(t,["candidates"],d)}const r=a(e,["modelVersion"]);r!=null&&u(t,["modelVersion"],r);const i=a(e,["promptFeedback"]);i!=null&&u(t,["promptFeedback"],i);const s=a(e,["responseId"]);s!=null&&u(t,["responseId"],s);const l=a(e,["usageMetadata"]);return l!=null&&u(t,["usageMetadata"],l),t}function Fy(e,t){const n={},o=a(t,["name"]);return o!=null&&u(n,["_url","name"],ln(e,o)),n}function Vy(e,t){const n={},o=a(t,["name"]);return o!=null&&u(n,["_url","name"],ln(e,o)),n}function Gy(e){const t={};if(a(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(e,["enableWidget"]);return n!=null&&u(t,["enableWidget"],n),t}function Oy(e){const t={};if(a(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=a(e,["timeRangeFilter"]);return n!=null&&u(t,["timeRangeFilter"],n),t}function Hy(e){const t={},n=a(e,["aspectRatio"]);n!=null&&u(t,["aspectRatio"],n);const o=a(e,["imageSize"]);if(o!=null&&u(t,["imageSize"],o),a(e,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(a(e,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(a(e,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function $y(e,t){const n={},o=a(t,["model"]);o!=null&&u(n,["request","model"],se(e,o));const r=a(t,["contents"]);if(r!=null){let l=Ze(r);Array.isArray(l)&&(l=l.map(d=>mc(d))),u(n,["request","contents"],l)}const i=a(t,["metadata"]);i!=null&&u(n,["metadata"],i);const s=a(t,["config"]);return s!=null&&u(n,["request","generationConfig"],Ly(e,s,a(n,["request"],{}))),n}function By(e){const t={},n=a(e,["response"]);n!=null&&u(t,["response"],Uy(n));const o=a(e,["metadata"]);o!=null&&u(t,["metadata"],o);const r=a(e,["error"]);return r!=null&&u(t,["error"],r),t}function qy(e,t){const n={},o=a(e,["pageSize"]);t!==void 0&&o!=null&&u(t,["_query","pageSize"],o);const r=a(e,["pageToken"]);if(t!==void 0&&r!=null&&u(t,["_query","pageToken"],r),a(e,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function zy(e,t){const n={},o=a(e,["pageSize"]);t!==void 0&&o!=null&&u(t,["_query","pageSize"],o);const r=a(e,["pageToken"]);t!==void 0&&r!=null&&u(t,["_query","pageToken"],r);const i=a(e,["filter"]);return t!==void 0&&i!=null&&u(t,["_query","filter"],i),n}function Jy(e){const t={},n=a(e,["config"]);return n!=null&&qy(n,t),t}function Wy(e){const t={},n=a(e,["config"]);return n!=null&&zy(n,t),t}function Yy(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&u(t,["sdkHttpResponse"],n);const o=a(e,["nextPageToken"]);o!=null&&u(t,["nextPageToken"],o);const r=a(e,["operations"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>oo(s))),u(t,["batchJobs"],i)}return t}function Ky(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&u(t,["sdkHttpResponse"],n);const o=a(e,["nextPageToken"]);o!=null&&u(t,["nextPageToken"],o);const r=a(e,["batchPredictionJobs"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>Pr(s))),u(t,["batchJobs"],i)}return t}function Xy(e){const t={},n=a(e,["mediaResolution"]);n!=null&&u(t,["mediaResolution"],n);const o=a(e,["codeExecutionResult"]);o!=null&&u(t,["codeExecutionResult"],o);const r=a(e,["executableCode"]);r!=null&&u(t,["executableCode"],r);const i=a(e,["fileData"]);i!=null&&u(t,["fileData"],Py(i));const s=a(e,["functionCall"]);s!=null&&u(t,["functionCall"],Dy(s));const l=a(e,["functionResponse"]);l!=null&&u(t,["functionResponse"],l);const d=a(e,["inlineData"]);d!=null&&u(t,["inlineData"],my(d));const c=a(e,["text"]);c!=null&&u(t,["text"],c);const f=a(e,["thought"]);f!=null&&u(t,["thought"],f);const p=a(e,["thoughtSignature"]);p!=null&&u(t,["thoughtSignature"],p);const h=a(e,["videoMetadata"]);return h!=null&&u(t,["videoMetadata"],h),t}function Qy(e){const t={},n=a(e,["category"]);if(n!=null&&u(t,["category"],n),a(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=a(e,["threshold"]);return o!=null&&u(t,["threshold"],o),t}function Zy(e){const t={},n=a(e,["retrievalConfig"]);n!=null&&u(t,["retrievalConfig"],n);const o=a(e,["functionCallingConfig"]);return o!=null&&u(t,["functionCallingConfig"],ky(o)),t}function jy(e){const t={};if(a(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=a(e,["computerUse"]);n!=null&&u(t,["computerUse"],n);const o=a(e,["fileSearch"]);o!=null&&u(t,["fileSearch"],o);const r=a(e,["codeExecution"]);if(r!=null&&u(t,["codeExecution"],r),a(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=a(e,["functionDeclarations"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(p=>p)),u(t,["functionDeclarations"],f)}const s=a(e,["googleMaps"]);s!=null&&u(t,["googleMaps"],Gy(s));const l=a(e,["googleSearch"]);l!=null&&u(t,["googleSearch"],Oy(l));const d=a(e,["googleSearchRetrieval"]);d!=null&&u(t,["googleSearchRetrieval"],d);const c=a(e,["urlContext"]);return c!=null&&u(t,["urlContext"],c),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var yt;(function(e){e.PAGED_ITEM_BATCH_JOBS="batchJobs",e.PAGED_ITEM_MODELS="models",e.PAGED_ITEM_TUNING_JOBS="tuningJobs",e.PAGED_ITEM_FILES="files",e.PAGED_ITEM_CACHED_CONTENTS="cachedContents",e.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",e.PAGED_ITEM_DOCUMENTS="documents"})(yt||(yt={}));class Ft{constructor(t,n,o,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(t,o,r)}init(t,n,o){var r,i;this.nameInternal=t,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let s={config:{}};!o||Object.keys(o).length===0?s={config:{}}:typeof o=="object"?s=Object.assign({},o):s=o,s.config&&(s.config.pageToken=n.nextPageToken),this.paramsInternal=s,this.pageInternalSize=(i=(r=s.config)===null||r===void 0?void 0:r.pageSize)!==null&&i!==void 0?i:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class e0 extends Et{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new Ft(yt.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(t){const n=Ma(this.apiClient,t),o=n._url,r=L("{model}:batchGenerateContent",o),l=n.batch.inputConfig.requests,d=l.requests,c=[];for(const f of d){const p=Object.assign({},f);if(p.systemInstruction){const h=p.systemInstruction;delete p.systemInstruction;const v=p.request;v.systemInstruction=h,p.request=v}c.push(p)}return l.requests=c,delete n.config,delete n._url,delete n._query,{path:r,body:n}}getGcsUri(t){if(typeof t=="string")return t.startsWith("gs://")?t:void 0;if(!Array.isArray(t)&&t.gcsUri&&t.gcsUri.length>0)return t.gcsUri[0]}getBigqueryUri(t){if(typeof t=="string")return t.startsWith("bq://")?t:void 0;if(!Array.isArray(t))return t.bigqueryUri}formatDestination(t,n){const o=n?Object.assign({},n):{},r=Date.now().toString();if(o.displayName||(o.displayName=`genaiBatchJob_${r}`),o.dest===void 0){const i=this.getGcsUri(t),s=this.getBigqueryUri(t);if(i)i.endsWith(".jsonl")?o.dest=`${i.slice(0,-6)}/dest`:o.dest=`${i}_dest_${r}`;else if(s)o.dest=`${s}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return o}async createInternal(t){var n,o,r,i;let s,l="",d={};if(this.apiClient.isVertexAI()){const c=Sy(this.apiClient,t);return l=L("batchPredictionJobs",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>Pr(f))}else{const c=Ma(this.apiClient,t);return l=L("{model}:batchGenerateContent",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>oo(f))}}async createEmbeddingsInternal(t){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=_y(this.apiClient,t);return i=L("{model}:asyncBatchEmbedContent",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r.then(d=>oo(d))}}async get(t){var n,o,r,i;let s,l="",d={};if(this.apiClient.isVertexAI()){const c=Vy(this.apiClient,t);return l=L("batchPredictionJobs/{name}",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>Pr(f))}else{const c=Fy(this.apiClient,t);return l=L("batches/{name}",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>oo(f))}}async cancel(t){var n,o,r,i;let s="",l={};if(this.apiClient.isVertexAI()){const d=vy(this.apiClient,t);s=L("batchPredictionJobs/{name}:cancel",d._url),l=d._query,delete d._url,delete d._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal})}else{const d=gy(this.apiClient,t);s=L("batches/{name}:cancel",d._url),l=d._query,delete d._url,delete d._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(t){var n,o,r,i;let s,l="",d={};if(this.apiClient.isVertexAI()){const c=Wy(t);return l=L("batchPredictionJobs",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=Ky(f),h=new Ra;return Object.assign(h,p),h})}else{const c=Jy(t);return l=L("batches",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=Yy(f),h=new Ra;return Object.assign(h,p),h})}}async delete(t){var n,o,r,i;let s,l="",d={};if(this.apiClient.isVertexAI()){const c=Iy(this.apiClient,t);return l=L("batchPredictionJobs/{name}",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>Ay(f))}else{const c=xy(this.apiClient,t);return l=L("batches/{name}",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>Ry(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function t0(e){const t={},n=a(e,["data"]);if(n!=null&&u(t,["data"],n),a(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=a(e,["mimeType"]);return o!=null&&u(t,["mimeType"],o),t}function Pa(e){const t={},n=a(e,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>_0(i))),u(t,["parts"],r)}const o=a(e,["role"]);return o!=null&&u(t,["role"],o),t}function n0(e,t){const n={},o=a(e,["ttl"]);t!==void 0&&o!=null&&u(t,["ttl"],o);const r=a(e,["expireTime"]);t!==void 0&&r!=null&&u(t,["expireTime"],r);const i=a(e,["displayName"]);t!==void 0&&i!=null&&u(t,["displayName"],i);const s=a(e,["contents"]);if(t!==void 0&&s!=null){let f=Ze(s);Array.isArray(f)&&(f=f.map(p=>Pa(p))),u(t,["contents"],f)}const l=a(e,["systemInstruction"]);t!==void 0&&l!=null&&u(t,["systemInstruction"],Pa(Fe(l)));const d=a(e,["tools"]);if(t!==void 0&&d!=null){let f=d;Array.isArray(f)&&(f=f.map(p=>I0(p))),u(t,["tools"],f)}const c=a(e,["toolConfig"]);if(t!==void 0&&c!=null&&u(t,["toolConfig"],x0(c)),a(e,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function o0(e,t){const n={},o=a(e,["ttl"]);t!==void 0&&o!=null&&u(t,["ttl"],o);const r=a(e,["expireTime"]);t!==void 0&&r!=null&&u(t,["expireTime"],r);const i=a(e,["displayName"]);t!==void 0&&i!=null&&u(t,["displayName"],i);const s=a(e,["contents"]);if(t!==void 0&&s!=null){let p=Ze(s);Array.isArray(p)&&(p=p.map(h=>h)),u(t,["contents"],p)}const l=a(e,["systemInstruction"]);t!==void 0&&l!=null&&u(t,["systemInstruction"],Fe(l));const d=a(e,["tools"]);if(t!==void 0&&d!=null){let p=d;Array.isArray(p)&&(p=p.map(h=>R0(h))),u(t,["tools"],p)}const c=a(e,["toolConfig"]);t!==void 0&&c!=null&&u(t,["toolConfig"],c);const f=a(e,["kmsKeyName"]);return t!==void 0&&f!=null&&u(t,["encryption_spec","kmsKeyName"],f),n}function r0(e,t){const n={},o=a(t,["model"]);o!=null&&u(n,["model"],oc(e,o));const r=a(t,["config"]);return r!=null&&n0(r,n),n}function i0(e,t){const n={},o=a(t,["model"]);o!=null&&u(n,["model"],oc(e,o));const r=a(t,["config"]);return r!=null&&o0(r,n),n}function s0(e,t){const n={},o=a(t,["name"]);return o!=null&&u(n,["_url","name"],Tt(e,o)),n}function a0(e,t){const n={},o=a(t,["name"]);return o!=null&&u(n,["_url","name"],Tt(e,o)),n}function l0(e){const t={},n=a(e,["sdkHttpResponse"]);return n!=null&&u(t,["sdkHttpResponse"],n),t}function u0(e){const t={},n=a(e,["sdkHttpResponse"]);return n!=null&&u(t,["sdkHttpResponse"],n),t}function c0(e){const t={};if(a(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(e,["fileUri"]);n!=null&&u(t,["fileUri"],n);const o=a(e,["mimeType"]);return o!=null&&u(t,["mimeType"],o),t}function d0(e){const t={},n=a(e,["id"]);n!=null&&u(t,["id"],n);const o=a(e,["args"]);o!=null&&u(t,["args"],o);const r=a(e,["name"]);if(r!=null&&u(t,["name"],r),a(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function f0(e){const t={},n=a(e,["allowedFunctionNames"]);n!=null&&u(t,["allowedFunctionNames"],n);const o=a(e,["mode"]);if(o!=null&&u(t,["mode"],o),a(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function p0(e){const t={},n=a(e,["description"]);n!=null&&u(t,["description"],n);const o=a(e,["name"]);o!=null&&u(t,["name"],o);const r=a(e,["parameters"]);r!=null&&u(t,["parameters"],r);const i=a(e,["parametersJsonSchema"]);i!=null&&u(t,["parametersJsonSchema"],i);const s=a(e,["response"]);s!=null&&u(t,["response"],s);const l=a(e,["responseJsonSchema"]);if(l!=null&&u(t,["responseJsonSchema"],l),a(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return t}function h0(e,t){const n={},o=a(t,["name"]);return o!=null&&u(n,["_url","name"],Tt(e,o)),n}function m0(e,t){const n={},o=a(t,["name"]);return o!=null&&u(n,["_url","name"],Tt(e,o)),n}function g0(e){const t={};if(a(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(e,["enableWidget"]);return n!=null&&u(t,["enableWidget"],n),t}function v0(e){const t={};if(a(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=a(e,["timeRangeFilter"]);return n!=null&&u(t,["timeRangeFilter"],n),t}function y0(e,t){const n={},o=a(e,["pageSize"]);t!==void 0&&o!=null&&u(t,["_query","pageSize"],o);const r=a(e,["pageToken"]);return t!==void 0&&r!=null&&u(t,["_query","pageToken"],r),n}function E0(e,t){const n={},o=a(e,["pageSize"]);t!==void 0&&o!=null&&u(t,["_query","pageSize"],o);const r=a(e,["pageToken"]);return t!==void 0&&r!=null&&u(t,["_query","pageToken"],r),n}function T0(e){const t={},n=a(e,["config"]);return n!=null&&y0(n,t),t}function C0(e){const t={},n=a(e,["config"]);return n!=null&&E0(n,t),t}function S0(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&u(t,["sdkHttpResponse"],n);const o=a(e,["nextPageToken"]);o!=null&&u(t,["nextPageToken"],o);const r=a(e,["cachedContents"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),u(t,["cachedContents"],i)}return t}function w0(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&u(t,["sdkHttpResponse"],n);const o=a(e,["nextPageToken"]);o!=null&&u(t,["nextPageToken"],o);const r=a(e,["cachedContents"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),u(t,["cachedContents"],i)}return t}function _0(e){const t={},n=a(e,["mediaResolution"]);n!=null&&u(t,["mediaResolution"],n);const o=a(e,["codeExecutionResult"]);o!=null&&u(t,["codeExecutionResult"],o);const r=a(e,["executableCode"]);r!=null&&u(t,["executableCode"],r);const i=a(e,["fileData"]);i!=null&&u(t,["fileData"],c0(i));const s=a(e,["functionCall"]);s!=null&&u(t,["functionCall"],d0(s));const l=a(e,["functionResponse"]);l!=null&&u(t,["functionResponse"],l);const d=a(e,["inlineData"]);d!=null&&u(t,["inlineData"],t0(d));const c=a(e,["text"]);c!=null&&u(t,["text"],c);const f=a(e,["thought"]);f!=null&&u(t,["thought"],f);const p=a(e,["thoughtSignature"]);p!=null&&u(t,["thoughtSignature"],p);const h=a(e,["videoMetadata"]);return h!=null&&u(t,["videoMetadata"],h),t}function x0(e){const t={},n=a(e,["retrievalConfig"]);n!=null&&u(t,["retrievalConfig"],n);const o=a(e,["functionCallingConfig"]);return o!=null&&u(t,["functionCallingConfig"],f0(o)),t}function I0(e){const t={};if(a(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=a(e,["computerUse"]);n!=null&&u(t,["computerUse"],n);const o=a(e,["fileSearch"]);o!=null&&u(t,["fileSearch"],o);const r=a(e,["codeExecution"]);if(r!=null&&u(t,["codeExecution"],r),a(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=a(e,["functionDeclarations"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(p=>p)),u(t,["functionDeclarations"],f)}const s=a(e,["googleMaps"]);s!=null&&u(t,["googleMaps"],g0(s));const l=a(e,["googleSearch"]);l!=null&&u(t,["googleSearch"],v0(l));const d=a(e,["googleSearchRetrieval"]);d!=null&&u(t,["googleSearchRetrieval"],d);const c=a(e,["urlContext"]);return c!=null&&u(t,["urlContext"],c),t}function R0(e){const t={},n=a(e,["retrieval"]);n!=null&&u(t,["retrieval"],n);const o=a(e,["computerUse"]);if(o!=null&&u(t,["computerUse"],o),a(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=a(e,["codeExecution"]);r!=null&&u(t,["codeExecution"],r);const i=a(e,["enterpriseWebSearch"]);i!=null&&u(t,["enterpriseWebSearch"],i);const s=a(e,["functionDeclarations"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(h=>p0(h))),u(t,["functionDeclarations"],p)}const l=a(e,["googleMaps"]);l!=null&&u(t,["googleMaps"],l);const d=a(e,["googleSearch"]);d!=null&&u(t,["googleSearch"],d);const c=a(e,["googleSearchRetrieval"]);c!=null&&u(t,["googleSearchRetrieval"],c);const f=a(e,["urlContext"]);return f!=null&&u(t,["urlContext"],f),t}function A0(e,t){const n={},o=a(e,["ttl"]);t!==void 0&&o!=null&&u(t,["ttl"],o);const r=a(e,["expireTime"]);return t!==void 0&&r!=null&&u(t,["expireTime"],r),n}function b0(e,t){const n={},o=a(e,["ttl"]);t!==void 0&&o!=null&&u(t,["ttl"],o);const r=a(e,["expireTime"]);return t!==void 0&&r!=null&&u(t,["expireTime"],r),n}function N0(e,t){const n={},o=a(t,["name"]);o!=null&&u(n,["_url","name"],Tt(e,o));const r=a(t,["config"]);return r!=null&&A0(r,n),n}function M0(e,t){const n={},o=a(t,["name"]);o!=null&&u(n,["_url","name"],Tt(e,o));const r=a(t,["config"]);return r!=null&&b0(r,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class P0 extends Et{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new Ft(yt.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(n),n)}async create(t){var n,o,r,i;let s,l="",d={};if(this.apiClient.isVertexAI()){const c=i0(this.apiClient,t);return l=L("cachedContents",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{const c=r0(this.apiClient,t);return l=L("cachedContents",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async get(t){var n,o,r,i;let s,l="",d={};if(this.apiClient.isVertexAI()){const c=m0(this.apiClient,t);return l=L("{name}",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{const c=h0(this.apiClient,t);return l=L("{name}",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async delete(t){var n,o,r,i;let s,l="",d={};if(this.apiClient.isVertexAI()){const c=a0(this.apiClient,t);return l=L("{name}",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=u0(f),h=new xa;return Object.assign(h,p),h})}else{const c=s0(this.apiClient,t);return l=L("{name}",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=l0(f),h=new xa;return Object.assign(h,p),h})}}async update(t){var n,o,r,i;let s,l="",d={};if(this.apiClient.isVertexAI()){const c=M0(this.apiClient,t);return l=L("{name}",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{const c=N0(this.apiClient,t);return l=L("{name}",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async listInternal(t){var n,o,r,i;let s,l="",d={};if(this.apiClient.isVertexAI()){const c=C0(t);return l=L("cachedContents",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=w0(f),h=new Ia;return Object.assign(h,p),h})}else{const c=T0(t);return l=L("cachedContents",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=S0(f),h=new Ia;return Object.assign(h,p),h})}}}function Ro(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]]);return n}function Da(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function K(e){return this instanceof K?(this.v=e,this):new K(e)}function st(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n.apply(e,t||[]),r,i=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",s),r[Symbol.asyncIterator]=function(){return this},r;function s(v){return function(y){return Promise.resolve(y).then(v,p)}}function l(v,y){o[v]&&(r[v]=function(E){return new Promise(function(T,C){i.push([v,E,T,C])>1||d(v,E)})},y&&(r[v]=y(r[v])))}function d(v,y){try{c(o[v](y))}catch(E){h(i[0][3],E)}}function c(v){v.value instanceof K?Promise.resolve(v.value.v).then(f,p):h(i[0][2],v)}function f(v){d("next",v)}function p(v){d("throw",v)}function h(v,y){v(y),i.shift(),i.length&&d(i[0][0],i[0][1])}}function at(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Da=="function"?Da(e):e[Symbol.iterator](),n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n);function o(i){n[i]=e[i]&&function(s){return new Promise(function(l,d){s=e[i](s),r(l,d,s.done,s.value)})}}function r(i,s,l,d){Promise.resolve(d).then(function(c){i({value:c,done:l})},s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function D0(e){var t;if(e.candidates==null||e.candidates.length===0)return!1;const n=(t=e.candidates[0])===null||t===void 0?void 0:t.content;return n===void 0?!1:gc(n)}function gc(e){if(e.parts===void 0||e.parts.length===0)return!1;for(const t of e.parts)if(t===void 0||Object.keys(t).length===0)return!1;return!0}function k0(e){if(e.length!==0){for(const t of e)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function ka(e){if(e===void 0||e.length===0)return[];const t=[],n=e.length;let o=0;for(;o<n;)if(e[o].role==="user")t.push(e[o]),o++;else{const r=[];let i=!0;for(;o<n&&e[o].role==="model";)r.push(e[o]),i&&!gc(e[o])&&(i=!1),o++;i?t.push(...r):t.pop()}return t}class L0{constructor(t,n){this.modelsModule=t,this.apiClient=n}create(t){return new U0(this.apiClient,this.modelsModule,t.model,t.config,structuredClone(t.history))}}class U0{constructor(t,n,o,r={},i=[]){this.apiClient=t,this.modelsModule=n,this.model=o,this.config=r,this.history=i,this.sendPromise=Promise.resolve(),k0(i)}async sendMessage(t){var n;await this.sendPromise;const o=Fe(t.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=t.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var i,s,l;const d=await r,c=(s=(i=d.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content,f=d.automaticFunctionCallingHistory,p=this.getHistory(!0).length;let h=[];f!=null&&(h=(l=f.slice(p))!==null&&l!==void 0?l:[]);const v=c?[c]:[];this.recordHistory(o,v,h)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(t){var n;await this.sendPromise;const o=Fe(t.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=t.config)!==null&&n!==void 0?n:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const i=await r;return this.processStreamResponse(i,o)}getHistory(t=!1){const n=t?ka(this.history):this.history;return structuredClone(n)}processStreamResponse(t,n){return st(this,arguments,function*(){var r,i,s,l,d,c;const f=[];try{for(var p=!0,h=at(t),v;v=yield K(h.next()),r=v.done,!r;p=!0){l=v.value,p=!1;const y=l;if(D0(y)){const E=(c=(d=y.candidates)===null||d===void 0?void 0:d[0])===null||c===void 0?void 0:c.content;E!==void 0&&f.push(E)}yield yield K(y)}}catch(y){i={error:y}}finally{try{!p&&!r&&(s=h.return)&&(yield K(s.call(h)))}finally{if(i)throw i.error}}this.recordHistory(n,f)})}recordHistory(t,n,o){let r=[];n.length>0&&n.every(i=>i.role!==void 0)?r=n:r.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...ka(o)):this.history.push(t),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class An extends Error{constructor(t){super(t.message),this.name="ApiError",this.status=t.status,Object.setPrototypeOf(this,An.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function F0(e){const t={},n=a(e,["file"]);return n!=null&&u(t,["file"],n),t}function V0(e){const t={},n=a(e,["sdkHttpResponse"]);return n!=null&&u(t,["sdkHttpResponse"],n),t}function G0(e){const t={},n=a(e,["name"]);return n!=null&&u(t,["_url","file"],uc(n)),t}function O0(e){const t={},n=a(e,["sdkHttpResponse"]);return n!=null&&u(t,["sdkHttpResponse"],n),t}function H0(e){const t={},n=a(e,["name"]);return n!=null&&u(t,["_url","file"],uc(n)),t}function $0(e){const t={},n=a(e,["uris"]);return n!=null&&u(t,["uris"],n),t}function B0(e,t){const n={},o=a(e,["pageSize"]);t!==void 0&&o!=null&&u(t,["_query","pageSize"],o);const r=a(e,["pageToken"]);return t!==void 0&&r!=null&&u(t,["_query","pageToken"],r),n}function q0(e){const t={},n=a(e,["config"]);return n!=null&&B0(n,t),t}function z0(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&u(t,["sdkHttpResponse"],n);const o=a(e,["nextPageToken"]);o!=null&&u(t,["nextPageToken"],o);const r=a(e,["files"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),u(t,["files"],i)}return t}function J0(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&u(t,["sdkHttpResponse"],n);const o=a(e,["files"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(i=>i)),u(t,["files"],r)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class W0 extends Et{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new Ft(yt.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(n),n)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(n=>n)}async download(t){await this.apiClient.downloadFile(t)}async registerFiles(t){throw new Error("registerFiles is only supported in Node.js environments.")}async _registerFiles(t){return this.registerFilesInternal(t)}async listInternal(t){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=q0(t);return i=L("files",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:d.headers},f})),r.then(d=>{const c=z0(d),f=new Yv;return Object.assign(f,c),f})}}async createInternal(t){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=F0(t);return i=L("upload/v1beta/files",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r.then(d=>{const c=V0(d),f=new Kv;return Object.assign(f,c),f})}}async get(t){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=H0(t);return i=L("files/{file}",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r.then(d=>d)}}async delete(t){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=G0(t);return i=L("files/{file}",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:d.headers},f})),r.then(d=>{const c=O0(d),f=new Xv;return Object.assign(f,c),f})}}async registerFilesInternal(t){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=$0(t);return i=L("files:register",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r.then(d=>{const c=J0(d),f=new Qv;return Object.assign(f,c),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ro(e){const t={},n=a(e,["data"]);if(n!=null&&u(t,["data"],n),a(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=a(e,["mimeType"]);return o!=null&&u(t,["mimeType"],o),t}function Y0(e){const t={},n=a(e,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>cE(i))),u(t,["parts"],r)}const o=a(e,["role"]);return o!=null&&u(t,["role"],o),t}function K0(e){const t={};if(a(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(e,["fileUri"]);n!=null&&u(t,["fileUri"],n);const o=a(e,["mimeType"]);return o!=null&&u(t,["mimeType"],o),t}function X0(e){const t={},n=a(e,["id"]);n!=null&&u(t,["id"],n);const o=a(e,["args"]);o!=null&&u(t,["args"],o);const r=a(e,["name"]);if(r!=null&&u(t,["name"],r),a(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function Q0(e){const t={},n=a(e,["description"]);n!=null&&u(t,["description"],n);const o=a(e,["name"]);o!=null&&u(t,["name"],o);const r=a(e,["parameters"]);r!=null&&u(t,["parameters"],r);const i=a(e,["parametersJsonSchema"]);i!=null&&u(t,["parametersJsonSchema"],i);const s=a(e,["response"]);s!=null&&u(t,["response"],s);const l=a(e,["responseJsonSchema"]);if(l!=null&&u(t,["responseJsonSchema"],l),a(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return t}function Z0(e){const t={},n=a(e,["modelSelectionConfig"]);n!=null&&u(t,["modelConfig"],n);const o=a(e,["responseJsonSchema"]);o!=null&&u(t,["responseJsonSchema"],o);const r=a(e,["audioTimestamp"]);r!=null&&u(t,["audioTimestamp"],r);const i=a(e,["candidateCount"]);i!=null&&u(t,["candidateCount"],i);const s=a(e,["enableAffectiveDialog"]);s!=null&&u(t,["enableAffectiveDialog"],s);const l=a(e,["frequencyPenalty"]);l!=null&&u(t,["frequencyPenalty"],l);const d=a(e,["logprobs"]);d!=null&&u(t,["logprobs"],d);const c=a(e,["maxOutputTokens"]);c!=null&&u(t,["maxOutputTokens"],c);const f=a(e,["mediaResolution"]);f!=null&&u(t,["mediaResolution"],f);const p=a(e,["presencePenalty"]);p!=null&&u(t,["presencePenalty"],p);const h=a(e,["responseLogprobs"]);h!=null&&u(t,["responseLogprobs"],h);const v=a(e,["responseMimeType"]);v!=null&&u(t,["responseMimeType"],v);const y=a(e,["responseModalities"]);y!=null&&u(t,["responseModalities"],y);const E=a(e,["responseSchema"]);E!=null&&u(t,["responseSchema"],E);const T=a(e,["routingConfig"]);T!=null&&u(t,["routingConfig"],T);const C=a(e,["seed"]);C!=null&&u(t,["seed"],C);const x=a(e,["speechConfig"]);x!=null&&u(t,["speechConfig"],x);const _=a(e,["stopSequences"]);_!=null&&u(t,["stopSequences"],_);const w=a(e,["temperature"]);w!=null&&u(t,["temperature"],w);const R=a(e,["thinkingConfig"]);R!=null&&u(t,["thinkingConfig"],R);const S=a(e,["topK"]);S!=null&&u(t,["topK"],S);const I=a(e,["topP"]);if(I!=null&&u(t,["topP"],I),a(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function j0(e){const t={};if(a(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(e,["enableWidget"]);return n!=null&&u(t,["enableWidget"],n),t}function eE(e){const t={};if(a(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=a(e,["timeRangeFilter"]);return n!=null&&u(t,["timeRangeFilter"],n),t}function tE(e,t){const n={},o=a(e,["generationConfig"]);t!==void 0&&o!=null&&u(t,["setup","generationConfig"],o);const r=a(e,["responseModalities"]);t!==void 0&&r!=null&&u(t,["setup","generationConfig","responseModalities"],r);const i=a(e,["temperature"]);t!==void 0&&i!=null&&u(t,["setup","generationConfig","temperature"],i);const s=a(e,["topP"]);t!==void 0&&s!=null&&u(t,["setup","generationConfig","topP"],s);const l=a(e,["topK"]);t!==void 0&&l!=null&&u(t,["setup","generationConfig","topK"],l);const d=a(e,["maxOutputTokens"]);t!==void 0&&d!=null&&u(t,["setup","generationConfig","maxOutputTokens"],d);const c=a(e,["mediaResolution"]);t!==void 0&&c!=null&&u(t,["setup","generationConfig","mediaResolution"],c);const f=a(e,["seed"]);t!==void 0&&f!=null&&u(t,["setup","generationConfig","seed"],f);const p=a(e,["speechConfig"]);t!==void 0&&p!=null&&u(t,["setup","generationConfig","speechConfig"],Ri(p));const h=a(e,["thinkingConfig"]);t!==void 0&&h!=null&&u(t,["setup","generationConfig","thinkingConfig"],h);const v=a(e,["enableAffectiveDialog"]);t!==void 0&&v!=null&&u(t,["setup","generationConfig","enableAffectiveDialog"],v);const y=a(e,["systemInstruction"]);t!==void 0&&y!=null&&u(t,["setup","systemInstruction"],Y0(Fe(y)));const E=a(e,["tools"]);if(t!==void 0&&E!=null){let S=an(E);Array.isArray(S)&&(S=S.map(I=>fE(sn(I)))),u(t,["setup","tools"],S)}const T=a(e,["sessionResumption"]);t!==void 0&&T!=null&&u(t,["setup","sessionResumption"],dE(T));const C=a(e,["inputAudioTranscription"]);t!==void 0&&C!=null&&u(t,["setup","inputAudioTranscription"],C);const x=a(e,["outputAudioTranscription"]);t!==void 0&&x!=null&&u(t,["setup","outputAudioTranscription"],x);const _=a(e,["realtimeInputConfig"]);t!==void 0&&_!=null&&u(t,["setup","realtimeInputConfig"],_);const w=a(e,["contextWindowCompression"]);t!==void 0&&w!=null&&u(t,["setup","contextWindowCompression"],w);const R=a(e,["proactivity"]);if(t!==void 0&&R!=null&&u(t,["setup","proactivity"],R),a(e,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function nE(e,t){const n={},o=a(e,["generationConfig"]);t!==void 0&&o!=null&&u(t,["setup","generationConfig"],Z0(o));const r=a(e,["responseModalities"]);t!==void 0&&r!=null&&u(t,["setup","generationConfig","responseModalities"],r);const i=a(e,["temperature"]);t!==void 0&&i!=null&&u(t,["setup","generationConfig","temperature"],i);const s=a(e,["topP"]);t!==void 0&&s!=null&&u(t,["setup","generationConfig","topP"],s);const l=a(e,["topK"]);t!==void 0&&l!=null&&u(t,["setup","generationConfig","topK"],l);const d=a(e,["maxOutputTokens"]);t!==void 0&&d!=null&&u(t,["setup","generationConfig","maxOutputTokens"],d);const c=a(e,["mediaResolution"]);t!==void 0&&c!=null&&u(t,["setup","generationConfig","mediaResolution"],c);const f=a(e,["seed"]);t!==void 0&&f!=null&&u(t,["setup","generationConfig","seed"],f);const p=a(e,["speechConfig"]);t!==void 0&&p!=null&&u(t,["setup","generationConfig","speechConfig"],Ri(p));const h=a(e,["thinkingConfig"]);t!==void 0&&h!=null&&u(t,["setup","generationConfig","thinkingConfig"],h);const v=a(e,["enableAffectiveDialog"]);t!==void 0&&v!=null&&u(t,["setup","generationConfig","enableAffectiveDialog"],v);const y=a(e,["systemInstruction"]);t!==void 0&&y!=null&&u(t,["setup","systemInstruction"],Fe(y));const E=a(e,["tools"]);if(t!==void 0&&E!=null){let I=an(E);Array.isArray(I)&&(I=I.map(b=>pE(sn(b)))),u(t,["setup","tools"],I)}const T=a(e,["sessionResumption"]);t!==void 0&&T!=null&&u(t,["setup","sessionResumption"],T);const C=a(e,["inputAudioTranscription"]);t!==void 0&&C!=null&&u(t,["setup","inputAudioTranscription"],C);const x=a(e,["outputAudioTranscription"]);t!==void 0&&x!=null&&u(t,["setup","outputAudioTranscription"],x);const _=a(e,["realtimeInputConfig"]);t!==void 0&&_!=null&&u(t,["setup","realtimeInputConfig"],_);const w=a(e,["contextWindowCompression"]);t!==void 0&&w!=null&&u(t,["setup","contextWindowCompression"],w);const R=a(e,["proactivity"]);t!==void 0&&R!=null&&u(t,["setup","proactivity"],R);const S=a(e,["explicitVadSignal"]);return t!==void 0&&S!=null&&u(t,["setup","explicitVadSignal"],S),n}function oE(e,t){const n={},o=a(t,["model"]);o!=null&&u(n,["setup","model"],se(e,o));const r=a(t,["config"]);return r!=null&&u(n,["config"],tE(r,n)),n}function rE(e,t){const n={},o=a(t,["model"]);o!=null&&u(n,["setup","model"],se(e,o));const r=a(t,["config"]);return r!=null&&u(n,["config"],nE(r,n)),n}function iE(e){const t={},n=a(e,["musicGenerationConfig"]);return n!=null&&u(t,["musicGenerationConfig"],n),t}function sE(e){const t={},n=a(e,["weightedPrompts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>r)),u(t,["weightedPrompts"],o)}return t}function aE(e){const t={},n=a(e,["media"]);if(n!=null){let c=rc(n);Array.isArray(c)&&(c=c.map(f=>ro(f))),u(t,["mediaChunks"],c)}const o=a(e,["audio"]);o!=null&&u(t,["audio"],ro(sc(o)));const r=a(e,["audioStreamEnd"]);r!=null&&u(t,["audioStreamEnd"],r);const i=a(e,["video"]);i!=null&&u(t,["video"],ro(ic(i)));const s=a(e,["text"]);s!=null&&u(t,["text"],s);const l=a(e,["activityStart"]);l!=null&&u(t,["activityStart"],l);const d=a(e,["activityEnd"]);return d!=null&&u(t,["activityEnd"],d),t}function lE(e){const t={},n=a(e,["media"]);if(n!=null){let c=rc(n);Array.isArray(c)&&(c=c.map(f=>f)),u(t,["mediaChunks"],c)}const o=a(e,["audio"]);o!=null&&u(t,["audio"],sc(o));const r=a(e,["audioStreamEnd"]);r!=null&&u(t,["audioStreamEnd"],r);const i=a(e,["video"]);i!=null&&u(t,["video"],ic(i));const s=a(e,["text"]);s!=null&&u(t,["text"],s);const l=a(e,["activityStart"]);l!=null&&u(t,["activityStart"],l);const d=a(e,["activityEnd"]);return d!=null&&u(t,["activityEnd"],d),t}function uE(e){const t={},n=a(e,["setupComplete"]);n!=null&&u(t,["setupComplete"],n);const o=a(e,["serverContent"]);o!=null&&u(t,["serverContent"],o);const r=a(e,["toolCall"]);r!=null&&u(t,["toolCall"],r);const i=a(e,["toolCallCancellation"]);i!=null&&u(t,["toolCallCancellation"],i);const s=a(e,["usageMetadata"]);s!=null&&u(t,["usageMetadata"],hE(s));const l=a(e,["goAway"]);l!=null&&u(t,["goAway"],l);const d=a(e,["sessionResumptionUpdate"]);d!=null&&u(t,["sessionResumptionUpdate"],d);const c=a(e,["voiceActivityDetectionSignal"]);c!=null&&u(t,["voiceActivityDetectionSignal"],c);const f=a(e,["voiceActivity"]);return f!=null&&u(t,["voiceActivity"],mE(f)),t}function cE(e){const t={},n=a(e,["mediaResolution"]);n!=null&&u(t,["mediaResolution"],n);const o=a(e,["codeExecutionResult"]);o!=null&&u(t,["codeExecutionResult"],o);const r=a(e,["executableCode"]);r!=null&&u(t,["executableCode"],r);const i=a(e,["fileData"]);i!=null&&u(t,["fileData"],K0(i));const s=a(e,["functionCall"]);s!=null&&u(t,["functionCall"],X0(s));const l=a(e,["functionResponse"]);l!=null&&u(t,["functionResponse"],l);const d=a(e,["inlineData"]);d!=null&&u(t,["inlineData"],ro(d));const c=a(e,["text"]);c!=null&&u(t,["text"],c);const f=a(e,["thought"]);f!=null&&u(t,["thought"],f);const p=a(e,["thoughtSignature"]);p!=null&&u(t,["thoughtSignature"],p);const h=a(e,["videoMetadata"]);return h!=null&&u(t,["videoMetadata"],h),t}function dE(e){const t={},n=a(e,["handle"]);if(n!=null&&u(t,["handle"],n),a(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function fE(e){const t={};if(a(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=a(e,["computerUse"]);n!=null&&u(t,["computerUse"],n);const o=a(e,["fileSearch"]);o!=null&&u(t,["fileSearch"],o);const r=a(e,["codeExecution"]);if(r!=null&&u(t,["codeExecution"],r),a(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=a(e,["functionDeclarations"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(p=>p)),u(t,["functionDeclarations"],f)}const s=a(e,["googleMaps"]);s!=null&&u(t,["googleMaps"],j0(s));const l=a(e,["googleSearch"]);l!=null&&u(t,["googleSearch"],eE(l));const d=a(e,["googleSearchRetrieval"]);d!=null&&u(t,["googleSearchRetrieval"],d);const c=a(e,["urlContext"]);return c!=null&&u(t,["urlContext"],c),t}function pE(e){const t={},n=a(e,["retrieval"]);n!=null&&u(t,["retrieval"],n);const o=a(e,["computerUse"]);if(o!=null&&u(t,["computerUse"],o),a(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=a(e,["codeExecution"]);r!=null&&u(t,["codeExecution"],r);const i=a(e,["enterpriseWebSearch"]);i!=null&&u(t,["enterpriseWebSearch"],i);const s=a(e,["functionDeclarations"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(h=>Q0(h))),u(t,["functionDeclarations"],p)}const l=a(e,["googleMaps"]);l!=null&&u(t,["googleMaps"],l);const d=a(e,["googleSearch"]);d!=null&&u(t,["googleSearch"],d);const c=a(e,["googleSearchRetrieval"]);c!=null&&u(t,["googleSearchRetrieval"],c);const f=a(e,["urlContext"]);return f!=null&&u(t,["urlContext"],f),t}function hE(e){const t={},n=a(e,["promptTokenCount"]);n!=null&&u(t,["promptTokenCount"],n);const o=a(e,["cachedContentTokenCount"]);o!=null&&u(t,["cachedContentTokenCount"],o);const r=a(e,["candidatesTokenCount"]);r!=null&&u(t,["responseTokenCount"],r);const i=a(e,["toolUsePromptTokenCount"]);i!=null&&u(t,["toolUsePromptTokenCount"],i);const s=a(e,["thoughtsTokenCount"]);s!=null&&u(t,["thoughtsTokenCount"],s);const l=a(e,["totalTokenCount"]);l!=null&&u(t,["totalTokenCount"],l);const d=a(e,["promptTokensDetails"]);if(d!=null){let v=d;Array.isArray(v)&&(v=v.map(y=>y)),u(t,["promptTokensDetails"],v)}const c=a(e,["cacheTokensDetails"]);if(c!=null){let v=c;Array.isArray(v)&&(v=v.map(y=>y)),u(t,["cacheTokensDetails"],v)}const f=a(e,["candidatesTokensDetails"]);if(f!=null){let v=f;Array.isArray(v)&&(v=v.map(y=>y)),u(t,["responseTokensDetails"],v)}const p=a(e,["toolUsePromptTokensDetails"]);if(p!=null){let v=p;Array.isArray(v)&&(v=v.map(y=>y)),u(t,["toolUsePromptTokensDetails"],v)}const h=a(e,["trafficType"]);return h!=null&&u(t,["trafficType"],h),t}function mE(e){const t={},n=a(e,["type"]);return n!=null&&u(t,["voiceActivityType"],n),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gE(e,t){const n={},o=a(e,["data"]);if(o!=null&&u(n,["data"],o),a(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=a(e,["mimeType"]);return r!=null&&u(n,["mimeType"],r),n}function vE(e,t){const n={},o=a(e,["content"]);o!=null&&u(n,["content"],o);const r=a(e,["citationMetadata"]);r!=null&&u(n,["citationMetadata"],yE(r));const i=a(e,["tokenCount"]);i!=null&&u(n,["tokenCount"],i);const s=a(e,["finishReason"]);s!=null&&u(n,["finishReason"],s);const l=a(e,["avgLogprobs"]);l!=null&&u(n,["avgLogprobs"],l);const d=a(e,["groundingMetadata"]);d!=null&&u(n,["groundingMetadata"],d);const c=a(e,["index"]);c!=null&&u(n,["index"],c);const f=a(e,["logprobsResult"]);f!=null&&u(n,["logprobsResult"],f);const p=a(e,["safetyRatings"]);if(p!=null){let v=p;Array.isArray(v)&&(v=v.map(y=>y)),u(n,["safetyRatings"],v)}const h=a(e,["urlContextMetadata"]);return h!=null&&u(n,["urlContextMetadata"],h),n}function yE(e,t){const n={},o=a(e,["citationSources"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(i=>i)),u(n,["citations"],r)}return n}function EE(e,t,n){const o={},r=a(t,["model"]);r!=null&&u(o,["_url","model"],se(e,r));const i=a(t,["contents"]);if(i!=null){let s=Ze(i);Array.isArray(s)&&(s=s.map(l=>l)),u(o,["contents"],s)}return o}function TE(e,t){const n={},o=a(e,["sdkHttpResponse"]);o!=null&&u(n,["sdkHttpResponse"],o);const r=a(e,["tokensInfo"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),u(n,["tokensInfo"],i)}return n}function CE(e,t){const n={},o=a(e,["values"]);o!=null&&u(n,["values"],o);const r=a(e,["statistics"]);return r!=null&&u(n,["statistics"],SE(r)),n}function SE(e,t){const n={},o=a(e,["truncated"]);o!=null&&u(n,["truncated"],o);const r=a(e,["token_count"]);return r!=null&&u(n,["tokenCount"],r),n}function Jo(e,t){const n={},o=a(e,["parts"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>MT(s))),u(n,["parts"],i)}const r=a(e,["role"]);return r!=null&&u(n,["role"],r),n}function wE(e,t){const n={},o=a(e,["controlType"]);o!=null&&u(n,["controlType"],o);const r=a(e,["enableControlImageComputation"]);return r!=null&&u(n,["computeControl"],r),n}function _E(e,t){const n={};if(a(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(a(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(a(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return n}function xE(e,t,n){const o={},r=a(e,["systemInstruction"]);t!==void 0&&r!=null&&u(t,["systemInstruction"],Fe(r));const i=a(e,["tools"]);if(t!==void 0&&i!=null){let l=i;Array.isArray(l)&&(l=l.map(d=>Tc(d))),u(t,["tools"],l)}const s=a(e,["generationConfig"]);return t!==void 0&&s!=null&&u(t,["generationConfig"],gT(s)),o}function IE(e,t,n){const o={},r=a(t,["model"]);r!=null&&u(o,["_url","model"],se(e,r));const i=a(t,["contents"]);if(i!=null){let l=Ze(i);Array.isArray(l)&&(l=l.map(d=>Jo(d))),u(o,["contents"],l)}const s=a(t,["config"]);return s!=null&&_E(s),o}function RE(e,t,n){const o={},r=a(t,["model"]);r!=null&&u(o,["_url","model"],se(e,r));const i=a(t,["contents"]);if(i!=null){let l=Ze(i);Array.isArray(l)&&(l=l.map(d=>d)),u(o,["contents"],l)}const s=a(t,["config"]);return s!=null&&xE(s,o),o}function AE(e,t){const n={},o=a(e,["sdkHttpResponse"]);o!=null&&u(n,["sdkHttpResponse"],o);const r=a(e,["totalTokens"]);r!=null&&u(n,["totalTokens"],r);const i=a(e,["cachedContentTokenCount"]);return i!=null&&u(n,["cachedContentTokenCount"],i),n}function bE(e,t){const n={},o=a(e,["sdkHttpResponse"]);o!=null&&u(n,["sdkHttpResponse"],o);const r=a(e,["totalTokens"]);return r!=null&&u(n,["totalTokens"],r),n}function NE(e,t,n){const o={},r=a(t,["model"]);return r!=null&&u(o,["_url","name"],se(e,r)),o}function ME(e,t,n){const o={},r=a(t,["model"]);return r!=null&&u(o,["_url","name"],se(e,r)),o}function PE(e,t){const n={},o=a(e,["sdkHttpResponse"]);return o!=null&&u(n,["sdkHttpResponse"],o),n}function DE(e,t){const n={},o=a(e,["sdkHttpResponse"]);return o!=null&&u(n,["sdkHttpResponse"],o),n}function kE(e,t,n){const o={},r=a(e,["outputGcsUri"]);t!==void 0&&r!=null&&u(t,["parameters","storageUri"],r);const i=a(e,["negativePrompt"]);t!==void 0&&i!=null&&u(t,["parameters","negativePrompt"],i);const s=a(e,["numberOfImages"]);t!==void 0&&s!=null&&u(t,["parameters","sampleCount"],s);const l=a(e,["aspectRatio"]);t!==void 0&&l!=null&&u(t,["parameters","aspectRatio"],l);const d=a(e,["guidanceScale"]);t!==void 0&&d!=null&&u(t,["parameters","guidanceScale"],d);const c=a(e,["seed"]);t!==void 0&&c!=null&&u(t,["parameters","seed"],c);const f=a(e,["safetyFilterLevel"]);t!==void 0&&f!=null&&u(t,["parameters","safetySetting"],f);const p=a(e,["personGeneration"]);t!==void 0&&p!=null&&u(t,["parameters","personGeneration"],p);const h=a(e,["includeSafetyAttributes"]);t!==void 0&&h!=null&&u(t,["parameters","includeSafetyAttributes"],h);const v=a(e,["includeRaiReason"]);t!==void 0&&v!=null&&u(t,["parameters","includeRaiReason"],v);const y=a(e,["language"]);t!==void 0&&y!=null&&u(t,["parameters","language"],y);const E=a(e,["outputMimeType"]);t!==void 0&&E!=null&&u(t,["parameters","outputOptions","mimeType"],E);const T=a(e,["outputCompressionQuality"]);t!==void 0&&T!=null&&u(t,["parameters","outputOptions","compressionQuality"],T);const C=a(e,["addWatermark"]);t!==void 0&&C!=null&&u(t,["parameters","addWatermark"],C);const x=a(e,["labels"]);t!==void 0&&x!=null&&u(t,["labels"],x);const _=a(e,["editMode"]);t!==void 0&&_!=null&&u(t,["parameters","editMode"],_);const w=a(e,["baseSteps"]);return t!==void 0&&w!=null&&u(t,["parameters","editConfig","baseSteps"],w),o}function LE(e,t,n){const o={},r=a(t,["model"]);r!=null&&u(o,["_url","model"],se(e,r));const i=a(t,["prompt"]);i!=null&&u(o,["instances[0]","prompt"],i);const s=a(t,["referenceImages"]);if(s!=null){let d=s;Array.isArray(d)&&(d=d.map(c=>FT(c))),u(o,["instances[0]","referenceImages"],d)}const l=a(t,["config"]);return l!=null&&kE(l,o),o}function UE(e,t){const n={},o=a(e,["sdkHttpResponse"]);o!=null&&u(n,["sdkHttpResponse"],o);const r=a(e,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>Wo(s))),u(n,["generatedImages"],i)}return n}function FE(e,t,n){const o={},r=a(e,["taskType"]);t!==void 0&&r!=null&&u(t,["requests[]","taskType"],r);const i=a(e,["title"]);t!==void 0&&i!=null&&u(t,["requests[]","title"],i);const s=a(e,["outputDimensionality"]);if(t!==void 0&&s!=null&&u(t,["requests[]","outputDimensionality"],s),a(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(a(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return o}function VE(e,t,n){const o={},r=a(e,["taskType"]);t!==void 0&&r!=null&&u(t,["instances[]","task_type"],r);const i=a(e,["title"]);t!==void 0&&i!=null&&u(t,["instances[]","title"],i);const s=a(e,["outputDimensionality"]);t!==void 0&&s!=null&&u(t,["parameters","outputDimensionality"],s);const l=a(e,["mimeType"]);t!==void 0&&l!=null&&u(t,["instances[]","mimeType"],l);const d=a(e,["autoTruncate"]);return t!==void 0&&d!=null&&u(t,["parameters","autoTruncate"],d),o}function GE(e,t,n){const o={},r=a(t,["model"]);r!=null&&u(o,["_url","model"],se(e,r));const i=a(t,["contents"]);if(i!=null){let d=_i(e,i);Array.isArray(d)&&(d=d.map(c=>c)),u(o,["requests[]","content"],d)}const s=a(t,["config"]);s!=null&&FE(s,o);const l=a(t,["model"]);return l!==void 0&&u(o,["requests[]","model"],se(e,l)),o}function OE(e,t,n){const o={},r=a(t,["model"]);r!=null&&u(o,["_url","model"],se(e,r));const i=a(t,["contents"]);if(i!=null){let l=_i(e,i);Array.isArray(l)&&(l=l.map(d=>d)),u(o,["instances[]","content"],l)}const s=a(t,["config"]);return s!=null&&VE(s,o),o}function HE(e,t){const n={},o=a(e,["sdkHttpResponse"]);o!=null&&u(n,["sdkHttpResponse"],o);const r=a(e,["embeddings"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(l=>l)),u(n,["embeddings"],s)}const i=a(e,["metadata"]);return i!=null&&u(n,["metadata"],i),n}function $E(e,t){const n={},o=a(e,["sdkHttpResponse"]);o!=null&&u(n,["sdkHttpResponse"],o);const r=a(e,["predictions[]","embeddings"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(l=>CE(l))),u(n,["embeddings"],s)}const i=a(e,["metadata"]);return i!=null&&u(n,["metadata"],i),n}function BE(e,t){const n={},o=a(e,["endpoint"]);o!=null&&u(n,["name"],o);const r=a(e,["deployedModelId"]);return r!=null&&u(n,["deployedModelId"],r),n}function qE(e,t){const n={};if(a(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=a(e,["fileUri"]);o!=null&&u(n,["fileUri"],o);const r=a(e,["mimeType"]);return r!=null&&u(n,["mimeType"],r),n}function zE(e,t){const n={},o=a(e,["id"]);o!=null&&u(n,["id"],o);const r=a(e,["args"]);r!=null&&u(n,["args"],r);const i=a(e,["name"]);if(i!=null&&u(n,["name"],i),a(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return n}function JE(e,t){const n={},o=a(e,["allowedFunctionNames"]);o!=null&&u(n,["allowedFunctionNames"],o);const r=a(e,["mode"]);if(r!=null&&u(n,["mode"],r),a(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return n}function WE(e,t){const n={},o=a(e,["description"]);o!=null&&u(n,["description"],o);const r=a(e,["name"]);r!=null&&u(n,["name"],r);const i=a(e,["parameters"]);i!=null&&u(n,["parameters"],i);const s=a(e,["parametersJsonSchema"]);s!=null&&u(n,["parametersJsonSchema"],s);const l=a(e,["response"]);l!=null&&u(n,["response"],l);const d=a(e,["responseJsonSchema"]);if(d!=null&&u(n,["responseJsonSchema"],d),a(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return n}function YE(e,t,n,o){const r={},i=a(t,["systemInstruction"]);n!==void 0&&i!=null&&u(n,["systemInstruction"],Jo(Fe(i)));const s=a(t,["temperature"]);s!=null&&u(r,["temperature"],s);const l=a(t,["topP"]);l!=null&&u(r,["topP"],l);const d=a(t,["topK"]);d!=null&&u(r,["topK"],d);const c=a(t,["candidateCount"]);c!=null&&u(r,["candidateCount"],c);const f=a(t,["maxOutputTokens"]);f!=null&&u(r,["maxOutputTokens"],f);const p=a(t,["stopSequences"]);p!=null&&u(r,["stopSequences"],p);const h=a(t,["responseLogprobs"]);h!=null&&u(r,["responseLogprobs"],h);const v=a(t,["logprobs"]);v!=null&&u(r,["logprobs"],v);const y=a(t,["presencePenalty"]);y!=null&&u(r,["presencePenalty"],y);const E=a(t,["frequencyPenalty"]);E!=null&&u(r,["frequencyPenalty"],E);const T=a(t,["seed"]);T!=null&&u(r,["seed"],T);const C=a(t,["responseMimeType"]);C!=null&&u(r,["responseMimeType"],C);const x=a(t,["responseSchema"]);x!=null&&u(r,["responseSchema"],xi(x));const _=a(t,["responseJsonSchema"]);if(_!=null&&u(r,["responseJsonSchema"],_),a(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(a(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const w=a(t,["safetySettings"]);if(n!==void 0&&w!=null){let G=w;Array.isArray(G)&&(G=G.map(ee=>VT(ee))),u(n,["safetySettings"],G)}const R=a(t,["tools"]);if(n!==void 0&&R!=null){let G=an(R);Array.isArray(G)&&(G=G.map(ee=>zT(sn(ee)))),u(n,["tools"],G)}const S=a(t,["toolConfig"]);if(n!==void 0&&S!=null&&u(n,["toolConfig"],qT(S)),a(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const I=a(t,["cachedContent"]);n!==void 0&&I!=null&&u(n,["cachedContent"],Tt(e,I));const b=a(t,["responseModalities"]);b!=null&&u(r,["responseModalities"],b);const A=a(t,["mediaResolution"]);A!=null&&u(r,["mediaResolution"],A);const N=a(t,["speechConfig"]);if(N!=null&&u(r,["speechConfig"],Ii(N)),a(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const P=a(t,["thinkingConfig"]);P!=null&&u(r,["thinkingConfig"],P);const O=a(t,["imageConfig"]);O!=null&&u(r,["imageConfig"],CT(O));const k=a(t,["enableEnhancedCivicAnswers"]);if(k!=null&&u(r,["enableEnhancedCivicAnswers"],k),a(t,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return r}function KE(e,t,n,o){const r={},i=a(t,["systemInstruction"]);n!==void 0&&i!=null&&u(n,["systemInstruction"],Fe(i));const s=a(t,["temperature"]);s!=null&&u(r,["temperature"],s);const l=a(t,["topP"]);l!=null&&u(r,["topP"],l);const d=a(t,["topK"]);d!=null&&u(r,["topK"],d);const c=a(t,["candidateCount"]);c!=null&&u(r,["candidateCount"],c);const f=a(t,["maxOutputTokens"]);f!=null&&u(r,["maxOutputTokens"],f);const p=a(t,["stopSequences"]);p!=null&&u(r,["stopSequences"],p);const h=a(t,["responseLogprobs"]);h!=null&&u(r,["responseLogprobs"],h);const v=a(t,["logprobs"]);v!=null&&u(r,["logprobs"],v);const y=a(t,["presencePenalty"]);y!=null&&u(r,["presencePenalty"],y);const E=a(t,["frequencyPenalty"]);E!=null&&u(r,["frequencyPenalty"],E);const T=a(t,["seed"]);T!=null&&u(r,["seed"],T);const C=a(t,["responseMimeType"]);C!=null&&u(r,["responseMimeType"],C);const x=a(t,["responseSchema"]);x!=null&&u(r,["responseSchema"],xi(x));const _=a(t,["responseJsonSchema"]);_!=null&&u(r,["responseJsonSchema"],_);const w=a(t,["routingConfig"]);w!=null&&u(r,["routingConfig"],w);const R=a(t,["modelSelectionConfig"]);R!=null&&u(r,["modelConfig"],R);const S=a(t,["safetySettings"]);if(n!==void 0&&S!=null){let oe=S;Array.isArray(oe)&&(oe=oe.map(U=>U)),u(n,["safetySettings"],oe)}const I=a(t,["tools"]);if(n!==void 0&&I!=null){let oe=an(I);Array.isArray(oe)&&(oe=oe.map(U=>Tc(sn(U)))),u(n,["tools"],oe)}const b=a(t,["toolConfig"]);n!==void 0&&b!=null&&u(n,["toolConfig"],b);const A=a(t,["labels"]);n!==void 0&&A!=null&&u(n,["labels"],A);const N=a(t,["cachedContent"]);n!==void 0&&N!=null&&u(n,["cachedContent"],Tt(e,N));const P=a(t,["responseModalities"]);P!=null&&u(r,["responseModalities"],P);const O=a(t,["mediaResolution"]);O!=null&&u(r,["mediaResolution"],O);const k=a(t,["speechConfig"]);k!=null&&u(r,["speechConfig"],Ii(k));const G=a(t,["audioTimestamp"]);G!=null&&u(r,["audioTimestamp"],G);const ee=a(t,["thinkingConfig"]);ee!=null&&u(r,["thinkingConfig"],ee);const te=a(t,["imageConfig"]);if(te!=null&&u(r,["imageConfig"],ST(te)),a(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const z=a(t,["modelArmorConfig"]);return n!==void 0&&z!=null&&u(n,["modelArmorConfig"],z),r}function La(e,t,n){const o={},r=a(t,["model"]);r!=null&&u(o,["_url","model"],se(e,r));const i=a(t,["contents"]);if(i!=null){let l=Ze(i);Array.isArray(l)&&(l=l.map(d=>Jo(d))),u(o,["contents"],l)}const s=a(t,["config"]);return s!=null&&u(o,["generationConfig"],YE(e,s,o)),o}function Ua(e,t,n){const o={},r=a(t,["model"]);r!=null&&u(o,["_url","model"],se(e,r));const i=a(t,["contents"]);if(i!=null){let l=Ze(i);Array.isArray(l)&&(l=l.map(d=>d)),u(o,["contents"],l)}const s=a(t,["config"]);return s!=null&&u(o,["generationConfig"],KE(e,s,o)),o}function Fa(e,t){const n={},o=a(e,["sdkHttpResponse"]);o!=null&&u(n,["sdkHttpResponse"],o);const r=a(e,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(f=>vE(f))),u(n,["candidates"],c)}const i=a(e,["modelVersion"]);i!=null&&u(n,["modelVersion"],i);const s=a(e,["promptFeedback"]);s!=null&&u(n,["promptFeedback"],s);const l=a(e,["responseId"]);l!=null&&u(n,["responseId"],l);const d=a(e,["usageMetadata"]);return d!=null&&u(n,["usageMetadata"],d),n}function Va(e,t){const n={},o=a(e,["sdkHttpResponse"]);o!=null&&u(n,["sdkHttpResponse"],o);const r=a(e,["candidates"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(p=>p)),u(n,["candidates"],f)}const i=a(e,["createTime"]);i!=null&&u(n,["createTime"],i);const s=a(e,["modelVersion"]);s!=null&&u(n,["modelVersion"],s);const l=a(e,["promptFeedback"]);l!=null&&u(n,["promptFeedback"],l);const d=a(e,["responseId"]);d!=null&&u(n,["responseId"],d);const c=a(e,["usageMetadata"]);return c!=null&&u(n,["usageMetadata"],c),n}function XE(e,t,n){const o={};if(a(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(a(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=a(e,["numberOfImages"]);t!==void 0&&r!=null&&u(t,["parameters","sampleCount"],r);const i=a(e,["aspectRatio"]);t!==void 0&&i!=null&&u(t,["parameters","aspectRatio"],i);const s=a(e,["guidanceScale"]);if(t!==void 0&&s!=null&&u(t,["parameters","guidanceScale"],s),a(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=a(e,["safetyFilterLevel"]);t!==void 0&&l!=null&&u(t,["parameters","safetySetting"],l);const d=a(e,["personGeneration"]);t!==void 0&&d!=null&&u(t,["parameters","personGeneration"],d);const c=a(e,["includeSafetyAttributes"]);t!==void 0&&c!=null&&u(t,["parameters","includeSafetyAttributes"],c);const f=a(e,["includeRaiReason"]);t!==void 0&&f!=null&&u(t,["parameters","includeRaiReason"],f);const p=a(e,["language"]);t!==void 0&&p!=null&&u(t,["parameters","language"],p);const h=a(e,["outputMimeType"]);t!==void 0&&h!=null&&u(t,["parameters","outputOptions","mimeType"],h);const v=a(e,["outputCompressionQuality"]);if(t!==void 0&&v!=null&&u(t,["parameters","outputOptions","compressionQuality"],v),a(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(a(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const y=a(e,["imageSize"]);if(t!==void 0&&y!=null&&u(t,["parameters","sampleImageSize"],y),a(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return o}function QE(e,t,n){const o={},r=a(e,["outputGcsUri"]);t!==void 0&&r!=null&&u(t,["parameters","storageUri"],r);const i=a(e,["negativePrompt"]);t!==void 0&&i!=null&&u(t,["parameters","negativePrompt"],i);const s=a(e,["numberOfImages"]);t!==void 0&&s!=null&&u(t,["parameters","sampleCount"],s);const l=a(e,["aspectRatio"]);t!==void 0&&l!=null&&u(t,["parameters","aspectRatio"],l);const d=a(e,["guidanceScale"]);t!==void 0&&d!=null&&u(t,["parameters","guidanceScale"],d);const c=a(e,["seed"]);t!==void 0&&c!=null&&u(t,["parameters","seed"],c);const f=a(e,["safetyFilterLevel"]);t!==void 0&&f!=null&&u(t,["parameters","safetySetting"],f);const p=a(e,["personGeneration"]);t!==void 0&&p!=null&&u(t,["parameters","personGeneration"],p);const h=a(e,["includeSafetyAttributes"]);t!==void 0&&h!=null&&u(t,["parameters","includeSafetyAttributes"],h);const v=a(e,["includeRaiReason"]);t!==void 0&&v!=null&&u(t,["parameters","includeRaiReason"],v);const y=a(e,["language"]);t!==void 0&&y!=null&&u(t,["parameters","language"],y);const E=a(e,["outputMimeType"]);t!==void 0&&E!=null&&u(t,["parameters","outputOptions","mimeType"],E);const T=a(e,["outputCompressionQuality"]);t!==void 0&&T!=null&&u(t,["parameters","outputOptions","compressionQuality"],T);const C=a(e,["addWatermark"]);t!==void 0&&C!=null&&u(t,["parameters","addWatermark"],C);const x=a(e,["labels"]);t!==void 0&&x!=null&&u(t,["labels"],x);const _=a(e,["imageSize"]);t!==void 0&&_!=null&&u(t,["parameters","sampleImageSize"],_);const w=a(e,["enhancePrompt"]);return t!==void 0&&w!=null&&u(t,["parameters","enhancePrompt"],w),o}function ZE(e,t,n){const o={},r=a(t,["model"]);r!=null&&u(o,["_url","model"],se(e,r));const i=a(t,["prompt"]);i!=null&&u(o,["instances[0]","prompt"],i);const s=a(t,["config"]);return s!=null&&XE(s,o),o}function jE(e,t,n){const o={},r=a(t,["model"]);r!=null&&u(o,["_url","model"],se(e,r));const i=a(t,["prompt"]);i!=null&&u(o,["instances[0]","prompt"],i);const s=a(t,["config"]);return s!=null&&QE(s,o),o}function eT(e,t){const n={},o=a(e,["sdkHttpResponse"]);o!=null&&u(n,["sdkHttpResponse"],o);const r=a(e,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(l=>fT(l))),u(n,["generatedImages"],s)}const i=a(e,["positivePromptSafetyAttributes"]);return i!=null&&u(n,["positivePromptSafetyAttributes"],yc(i)),n}function tT(e,t){const n={},o=a(e,["sdkHttpResponse"]);o!=null&&u(n,["sdkHttpResponse"],o);const r=a(e,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(l=>Wo(l))),u(n,["generatedImages"],s)}const i=a(e,["positivePromptSafetyAttributes"]);return i!=null&&u(n,["positivePromptSafetyAttributes"],Ec(i)),n}function nT(e,t,n){const o={},r=a(e,["numberOfVideos"]);if(t!==void 0&&r!=null&&u(t,["parameters","sampleCount"],r),a(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(a(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const i=a(e,["durationSeconds"]);if(t!==void 0&&i!=null&&u(t,["parameters","durationSeconds"],i),a(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=a(e,["aspectRatio"]);t!==void 0&&s!=null&&u(t,["parameters","aspectRatio"],s);const l=a(e,["resolution"]);t!==void 0&&l!=null&&u(t,["parameters","resolution"],l);const d=a(e,["personGeneration"]);if(t!==void 0&&d!=null&&u(t,["parameters","personGeneration"],d),a(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const c=a(e,["negativePrompt"]);t!==void 0&&c!=null&&u(t,["parameters","negativePrompt"],c);const f=a(e,["enhancePrompt"]);if(t!==void 0&&f!=null&&u(t,["parameters","enhancePrompt"],f),a(e,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const p=a(e,["lastFrame"]);t!==void 0&&p!=null&&u(t,["instances[0]","lastFrame"],Yo(p));const h=a(e,["referenceImages"]);if(t!==void 0&&h!=null){let v=h;Array.isArray(v)&&(v=v.map(y=>rC(y))),u(t,["instances[0]","referenceImages"],v)}if(a(e,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(a(e,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return o}function oT(e,t,n){const o={},r=a(e,["numberOfVideos"]);t!==void 0&&r!=null&&u(t,["parameters","sampleCount"],r);const i=a(e,["outputGcsUri"]);t!==void 0&&i!=null&&u(t,["parameters","storageUri"],i);const s=a(e,["fps"]);t!==void 0&&s!=null&&u(t,["parameters","fps"],s);const l=a(e,["durationSeconds"]);t!==void 0&&l!=null&&u(t,["parameters","durationSeconds"],l);const d=a(e,["seed"]);t!==void 0&&d!=null&&u(t,["parameters","seed"],d);const c=a(e,["aspectRatio"]);t!==void 0&&c!=null&&u(t,["parameters","aspectRatio"],c);const f=a(e,["resolution"]);t!==void 0&&f!=null&&u(t,["parameters","resolution"],f);const p=a(e,["personGeneration"]);t!==void 0&&p!=null&&u(t,["parameters","personGeneration"],p);const h=a(e,["pubsubTopic"]);t!==void 0&&h!=null&&u(t,["parameters","pubsubTopic"],h);const v=a(e,["negativePrompt"]);t!==void 0&&v!=null&&u(t,["parameters","negativePrompt"],v);const y=a(e,["enhancePrompt"]);t!==void 0&&y!=null&&u(t,["parameters","enhancePrompt"],y);const E=a(e,["generateAudio"]);t!==void 0&&E!=null&&u(t,["parameters","generateAudio"],E);const T=a(e,["lastFrame"]);t!==void 0&&T!=null&&u(t,["instances[0]","lastFrame"],dt(T));const C=a(e,["referenceImages"]);if(t!==void 0&&C!=null){let w=C;Array.isArray(w)&&(w=w.map(R=>iC(R))),u(t,["instances[0]","referenceImages"],w)}const x=a(e,["mask"]);t!==void 0&&x!=null&&u(t,["instances[0]","mask"],oC(x));const _=a(e,["compressionQuality"]);return t!==void 0&&_!=null&&u(t,["parameters","compressionQuality"],_),o}function rT(e,t){const n={},o=a(e,["name"]);o!=null&&u(n,["name"],o);const r=a(e,["metadata"]);r!=null&&u(n,["metadata"],r);const i=a(e,["done"]);i!=null&&u(n,["done"],i);const s=a(e,["error"]);s!=null&&u(n,["error"],s);const l=a(e,["response","generateVideoResponse"]);return l!=null&&u(n,["response"],lT(l)),n}function iT(e,t){const n={},o=a(e,["name"]);o!=null&&u(n,["name"],o);const r=a(e,["metadata"]);r!=null&&u(n,["metadata"],r);const i=a(e,["done"]);i!=null&&u(n,["done"],i);const s=a(e,["error"]);s!=null&&u(n,["error"],s);const l=a(e,["response"]);return l!=null&&u(n,["response"],uT(l)),n}function sT(e,t,n){const o={},r=a(t,["model"]);r!=null&&u(o,["_url","model"],se(e,r));const i=a(t,["prompt"]);i!=null&&u(o,["instances[0]","prompt"],i);const s=a(t,["image"]);s!=null&&u(o,["instances[0]","image"],Yo(s));const l=a(t,["video"]);l!=null&&u(o,["instances[0]","video"],Cc(l));const d=a(t,["source"]);d!=null&&cT(d,o);const c=a(t,["config"]);return c!=null&&nT(c,o),o}function aT(e,t,n){const o={},r=a(t,["model"]);r!=null&&u(o,["_url","model"],se(e,r));const i=a(t,["prompt"]);i!=null&&u(o,["instances[0]","prompt"],i);const s=a(t,["image"]);s!=null&&u(o,["instances[0]","image"],dt(s));const l=a(t,["video"]);l!=null&&u(o,["instances[0]","video"],Sc(l));const d=a(t,["source"]);d!=null&&dT(d,o);const c=a(t,["config"]);return c!=null&&oT(c,o),o}function lT(e,t){const n={},o=a(e,["generatedSamples"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>hT(l))),u(n,["generatedVideos"],s)}const r=a(e,["raiMediaFilteredCount"]);r!=null&&u(n,["raiMediaFilteredCount"],r);const i=a(e,["raiMediaFilteredReasons"]);return i!=null&&u(n,["raiMediaFilteredReasons"],i),n}function uT(e,t){const n={},o=a(e,["videos"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>mT(l))),u(n,["generatedVideos"],s)}const r=a(e,["raiMediaFilteredCount"]);r!=null&&u(n,["raiMediaFilteredCount"],r);const i=a(e,["raiMediaFilteredReasons"]);return i!=null&&u(n,["raiMediaFilteredReasons"],i),n}function cT(e,t,n){const o={},r=a(e,["prompt"]);t!==void 0&&r!=null&&u(t,["instances[0]","prompt"],r);const i=a(e,["image"]);t!==void 0&&i!=null&&u(t,["instances[0]","image"],Yo(i));const s=a(e,["video"]);return t!==void 0&&s!=null&&u(t,["instances[0]","video"],Cc(s)),o}function dT(e,t,n){const o={},r=a(e,["prompt"]);t!==void 0&&r!=null&&u(t,["instances[0]","prompt"],r);const i=a(e,["image"]);t!==void 0&&i!=null&&u(t,["instances[0]","image"],dt(i));const s=a(e,["video"]);return t!==void 0&&s!=null&&u(t,["instances[0]","video"],Sc(s)),o}function fT(e,t){const n={},o=a(e,["_self"]);o!=null&&u(n,["image"],wT(o));const r=a(e,["raiFilteredReason"]);r!=null&&u(n,["raiFilteredReason"],r);const i=a(e,["_self"]);return i!=null&&u(n,["safetyAttributes"],yc(i)),n}function Wo(e,t){const n={},o=a(e,["_self"]);o!=null&&u(n,["image"],vc(o));const r=a(e,["raiFilteredReason"]);r!=null&&u(n,["raiFilteredReason"],r);const i=a(e,["_self"]);i!=null&&u(n,["safetyAttributes"],Ec(i));const s=a(e,["prompt"]);return s!=null&&u(n,["enhancedPrompt"],s),n}function pT(e,t){const n={},o=a(e,["_self"]);o!=null&&u(n,["mask"],vc(o));const r=a(e,["labels"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),u(n,["labels"],i)}return n}function hT(e,t){const n={},o=a(e,["video"]);return o!=null&&u(n,["video"],tC(o)),n}function mT(e,t){const n={},o=a(e,["_self"]);return o!=null&&u(n,["video"],nC(o)),n}function gT(e,t){const n={},o=a(e,["modelSelectionConfig"]);o!=null&&u(n,["modelConfig"],o);const r=a(e,["responseJsonSchema"]);r!=null&&u(n,["responseJsonSchema"],r);const i=a(e,["audioTimestamp"]);i!=null&&u(n,["audioTimestamp"],i);const s=a(e,["candidateCount"]);s!=null&&u(n,["candidateCount"],s);const l=a(e,["enableAffectiveDialog"]);l!=null&&u(n,["enableAffectiveDialog"],l);const d=a(e,["frequencyPenalty"]);d!=null&&u(n,["frequencyPenalty"],d);const c=a(e,["logprobs"]);c!=null&&u(n,["logprobs"],c);const f=a(e,["maxOutputTokens"]);f!=null&&u(n,["maxOutputTokens"],f);const p=a(e,["mediaResolution"]);p!=null&&u(n,["mediaResolution"],p);const h=a(e,["presencePenalty"]);h!=null&&u(n,["presencePenalty"],h);const v=a(e,["responseLogprobs"]);v!=null&&u(n,["responseLogprobs"],v);const y=a(e,["responseMimeType"]);y!=null&&u(n,["responseMimeType"],y);const E=a(e,["responseModalities"]);E!=null&&u(n,["responseModalities"],E);const T=a(e,["responseSchema"]);T!=null&&u(n,["responseSchema"],T);const C=a(e,["routingConfig"]);C!=null&&u(n,["routingConfig"],C);const x=a(e,["seed"]);x!=null&&u(n,["seed"],x);const _=a(e,["speechConfig"]);_!=null&&u(n,["speechConfig"],_);const w=a(e,["stopSequences"]);w!=null&&u(n,["stopSequences"],w);const R=a(e,["temperature"]);R!=null&&u(n,["temperature"],R);const S=a(e,["thinkingConfig"]);S!=null&&u(n,["thinkingConfig"],S);const I=a(e,["topK"]);I!=null&&u(n,["topK"],I);const b=a(e,["topP"]);if(b!=null&&u(n,["topP"],b),a(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return n}function vT(e,t,n){const o={},r=a(t,["model"]);return r!=null&&u(o,["_url","name"],se(e,r)),o}function yT(e,t,n){const o={},r=a(t,["model"]);return r!=null&&u(o,["_url","name"],se(e,r)),o}function ET(e,t){const n={};if(a(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=a(e,["enableWidget"]);return o!=null&&u(n,["enableWidget"],o),n}function TT(e,t){const n={};if(a(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=a(e,["timeRangeFilter"]);return o!=null&&u(n,["timeRangeFilter"],o),n}function CT(e,t){const n={},o=a(e,["aspectRatio"]);o!=null&&u(n,["aspectRatio"],o);const r=a(e,["imageSize"]);if(r!=null&&u(n,["imageSize"],r),a(e,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(a(e,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(a(e,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return n}function ST(e,t){const n={},o=a(e,["aspectRatio"]);o!=null&&u(n,["aspectRatio"],o);const r=a(e,["imageSize"]);r!=null&&u(n,["imageSize"],r);const i=a(e,["personGeneration"]);i!=null&&u(n,["personGeneration"],i);const s=a(e,["outputMimeType"]);s!=null&&u(n,["imageOutputOptions","mimeType"],s);const l=a(e,["outputCompressionQuality"]);return l!=null&&u(n,["imageOutputOptions","compressionQuality"],l),n}function wT(e,t){const n={},o=a(e,["bytesBase64Encoded"]);o!=null&&u(n,["imageBytes"],Mt(o));const r=a(e,["mimeType"]);return r!=null&&u(n,["mimeType"],r),n}function vc(e,t){const n={},o=a(e,["gcsUri"]);o!=null&&u(n,["gcsUri"],o);const r=a(e,["bytesBase64Encoded"]);r!=null&&u(n,["imageBytes"],Mt(r));const i=a(e,["mimeType"]);return i!=null&&u(n,["mimeType"],i),n}function Yo(e,t){const n={};if(a(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const o=a(e,["imageBytes"]);o!=null&&u(n,["bytesBase64Encoded"],Mt(o));const r=a(e,["mimeType"]);return r!=null&&u(n,["mimeType"],r),n}function dt(e,t){const n={},o=a(e,["gcsUri"]);o!=null&&u(n,["gcsUri"],o);const r=a(e,["imageBytes"]);r!=null&&u(n,["bytesBase64Encoded"],Mt(r));const i=a(e,["mimeType"]);return i!=null&&u(n,["mimeType"],i),n}function _T(e,t,n,o){const r={},i=a(t,["pageSize"]);n!==void 0&&i!=null&&u(n,["_query","pageSize"],i);const s=a(t,["pageToken"]);n!==void 0&&s!=null&&u(n,["_query","pageToken"],s);const l=a(t,["filter"]);n!==void 0&&l!=null&&u(n,["_query","filter"],l);const d=a(t,["queryBase"]);return n!==void 0&&d!=null&&u(n,["_url","models_url"],cc(e,d)),r}function xT(e,t,n,o){const r={},i=a(t,["pageSize"]);n!==void 0&&i!=null&&u(n,["_query","pageSize"],i);const s=a(t,["pageToken"]);n!==void 0&&s!=null&&u(n,["_query","pageToken"],s);const l=a(t,["filter"]);n!==void 0&&l!=null&&u(n,["_query","filter"],l);const d=a(t,["queryBase"]);return n!==void 0&&d!=null&&u(n,["_url","models_url"],cc(e,d)),r}function IT(e,t,n){const o={},r=a(t,["config"]);return r!=null&&_T(e,r,o),o}function RT(e,t,n){const o={},r=a(t,["config"]);return r!=null&&xT(e,r,o),o}function AT(e,t){const n={},o=a(e,["sdkHttpResponse"]);o!=null&&u(n,["sdkHttpResponse"],o);const r=a(e,["nextPageToken"]);r!=null&&u(n,["nextPageToken"],r);const i=a(e,["_self"]);if(i!=null){let s=dc(i);Array.isArray(s)&&(s=s.map(l=>Dr(l))),u(n,["models"],s)}return n}function bT(e,t){const n={},o=a(e,["sdkHttpResponse"]);o!=null&&u(n,["sdkHttpResponse"],o);const r=a(e,["nextPageToken"]);r!=null&&u(n,["nextPageToken"],r);const i=a(e,["_self"]);if(i!=null){let s=dc(i);Array.isArray(s)&&(s=s.map(l=>kr(l))),u(n,["models"],s)}return n}function NT(e,t){const n={},o=a(e,["maskMode"]);o!=null&&u(n,["maskMode"],o);const r=a(e,["segmentationClasses"]);r!=null&&u(n,["maskClasses"],r);const i=a(e,["maskDilation"]);return i!=null&&u(n,["dilation"],i),n}function Dr(e,t){const n={},o=a(e,["name"]);o!=null&&u(n,["name"],o);const r=a(e,["displayName"]);r!=null&&u(n,["displayName"],r);const i=a(e,["description"]);i!=null&&u(n,["description"],i);const s=a(e,["version"]);s!=null&&u(n,["version"],s);const l=a(e,["_self"]);l!=null&&u(n,["tunedModelInfo"],JT(l));const d=a(e,["inputTokenLimit"]);d!=null&&u(n,["inputTokenLimit"],d);const c=a(e,["outputTokenLimit"]);c!=null&&u(n,["outputTokenLimit"],c);const f=a(e,["supportedGenerationMethods"]);f!=null&&u(n,["supportedActions"],f);const p=a(e,["temperature"]);p!=null&&u(n,["temperature"],p);const h=a(e,["maxTemperature"]);h!=null&&u(n,["maxTemperature"],h);const v=a(e,["topP"]);v!=null&&u(n,["topP"],v);const y=a(e,["topK"]);y!=null&&u(n,["topK"],y);const E=a(e,["thinking"]);return E!=null&&u(n,["thinking"],E),n}function kr(e,t){const n={},o=a(e,["name"]);o!=null&&u(n,["name"],o);const r=a(e,["displayName"]);r!=null&&u(n,["displayName"],r);const i=a(e,["description"]);i!=null&&u(n,["description"],i);const s=a(e,["versionId"]);s!=null&&u(n,["version"],s);const l=a(e,["deployedModels"]);if(l!=null){let h=l;Array.isArray(h)&&(h=h.map(v=>BE(v))),u(n,["endpoints"],h)}const d=a(e,["labels"]);d!=null&&u(n,["labels"],d);const c=a(e,["_self"]);c!=null&&u(n,["tunedModelInfo"],WT(c));const f=a(e,["defaultCheckpointId"]);f!=null&&u(n,["defaultCheckpointId"],f);const p=a(e,["checkpoints"]);if(p!=null){let h=p;Array.isArray(h)&&(h=h.map(v=>v)),u(n,["checkpoints"],h)}return n}function MT(e,t){const n={},o=a(e,["mediaResolution"]);o!=null&&u(n,["mediaResolution"],o);const r=a(e,["codeExecutionResult"]);r!=null&&u(n,["codeExecutionResult"],r);const i=a(e,["executableCode"]);i!=null&&u(n,["executableCode"],i);const s=a(e,["fileData"]);s!=null&&u(n,["fileData"],qE(s));const l=a(e,["functionCall"]);l!=null&&u(n,["functionCall"],zE(l));const d=a(e,["functionResponse"]);d!=null&&u(n,["functionResponse"],d);const c=a(e,["inlineData"]);c!=null&&u(n,["inlineData"],gE(c));const f=a(e,["text"]);f!=null&&u(n,["text"],f);const p=a(e,["thought"]);p!=null&&u(n,["thought"],p);const h=a(e,["thoughtSignature"]);h!=null&&u(n,["thoughtSignature"],h);const v=a(e,["videoMetadata"]);return v!=null&&u(n,["videoMetadata"],v),n}function PT(e,t){const n={},o=a(e,["productImage"]);return o!=null&&u(n,["image"],dt(o)),n}function DT(e,t,n){const o={},r=a(e,["numberOfImages"]);t!==void 0&&r!=null&&u(t,["parameters","sampleCount"],r);const i=a(e,["baseSteps"]);t!==void 0&&i!=null&&u(t,["parameters","baseSteps"],i);const s=a(e,["outputGcsUri"]);t!==void 0&&s!=null&&u(t,["parameters","storageUri"],s);const l=a(e,["seed"]);t!==void 0&&l!=null&&u(t,["parameters","seed"],l);const d=a(e,["safetyFilterLevel"]);t!==void 0&&d!=null&&u(t,["parameters","safetySetting"],d);const c=a(e,["personGeneration"]);t!==void 0&&c!=null&&u(t,["parameters","personGeneration"],c);const f=a(e,["addWatermark"]);t!==void 0&&f!=null&&u(t,["parameters","addWatermark"],f);const p=a(e,["outputMimeType"]);t!==void 0&&p!=null&&u(t,["parameters","outputOptions","mimeType"],p);const h=a(e,["outputCompressionQuality"]);t!==void 0&&h!=null&&u(t,["parameters","outputOptions","compressionQuality"],h);const v=a(e,["enhancePrompt"]);t!==void 0&&v!=null&&u(t,["parameters","enhancePrompt"],v);const y=a(e,["labels"]);return t!==void 0&&y!=null&&u(t,["labels"],y),o}function kT(e,t,n){const o={},r=a(t,["model"]);r!=null&&u(o,["_url","model"],se(e,r));const i=a(t,["source"]);i!=null&&UT(i,o);const s=a(t,["config"]);return s!=null&&DT(s,o),o}function LT(e,t){const n={},o=a(e,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(i=>Wo(i))),u(n,["generatedImages"],r)}return n}function UT(e,t,n){const o={},r=a(e,["prompt"]);t!==void 0&&r!=null&&u(t,["instances[0]","prompt"],r);const i=a(e,["personImage"]);t!==void 0&&i!=null&&u(t,["instances[0]","personImage","image"],dt(i));const s=a(e,["productImages"]);if(t!==void 0&&s!=null){let l=s;Array.isArray(l)&&(l=l.map(d=>PT(d))),u(t,["instances[0]","productImages"],l)}return o}function FT(e,t){const n={},o=a(e,["referenceImage"]);o!=null&&u(n,["referenceImage"],dt(o));const r=a(e,["referenceId"]);r!=null&&u(n,["referenceId"],r);const i=a(e,["referenceType"]);i!=null&&u(n,["referenceType"],i);const s=a(e,["maskImageConfig"]);s!=null&&u(n,["maskImageConfig"],NT(s));const l=a(e,["controlImageConfig"]);l!=null&&u(n,["controlImageConfig"],wE(l));const d=a(e,["styleImageConfig"]);d!=null&&u(n,["styleImageConfig"],d);const c=a(e,["subjectImageConfig"]);return c!=null&&u(n,["subjectImageConfig"],c),n}function yc(e,t){const n={},o=a(e,["safetyAttributes","categories"]);o!=null&&u(n,["categories"],o);const r=a(e,["safetyAttributes","scores"]);r!=null&&u(n,["scores"],r);const i=a(e,["contentType"]);return i!=null&&u(n,["contentType"],i),n}function Ec(e,t){const n={},o=a(e,["safetyAttributes","categories"]);o!=null&&u(n,["categories"],o);const r=a(e,["safetyAttributes","scores"]);r!=null&&u(n,["scores"],r);const i=a(e,["contentType"]);return i!=null&&u(n,["contentType"],i),n}function VT(e,t){const n={},o=a(e,["category"]);if(o!=null&&u(n,["category"],o),a(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=a(e,["threshold"]);return r!=null&&u(n,["threshold"],r),n}function GT(e,t){const n={},o=a(e,["image"]);return o!=null&&u(n,["image"],dt(o)),n}function OT(e,t,n){const o={},r=a(e,["mode"]);t!==void 0&&r!=null&&u(t,["parameters","mode"],r);const i=a(e,["maxPredictions"]);t!==void 0&&i!=null&&u(t,["parameters","maxPredictions"],i);const s=a(e,["confidenceThreshold"]);t!==void 0&&s!=null&&u(t,["parameters","confidenceThreshold"],s);const l=a(e,["maskDilation"]);t!==void 0&&l!=null&&u(t,["parameters","maskDilation"],l);const d=a(e,["binaryColorThreshold"]);t!==void 0&&d!=null&&u(t,["parameters","binaryColorThreshold"],d);const c=a(e,["labels"]);return t!==void 0&&c!=null&&u(t,["labels"],c),o}function HT(e,t,n){const o={},r=a(t,["model"]);r!=null&&u(o,["_url","model"],se(e,r));const i=a(t,["source"]);i!=null&&BT(i,o);const s=a(t,["config"]);return s!=null&&OT(s,o),o}function $T(e,t){const n={},o=a(e,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(i=>pT(i))),u(n,["generatedMasks"],r)}return n}function BT(e,t,n){const o={},r=a(e,["prompt"]);t!==void 0&&r!=null&&u(t,["instances[0]","prompt"],r);const i=a(e,["image"]);t!==void 0&&i!=null&&u(t,["instances[0]","image"],dt(i));const s=a(e,["scribbleImage"]);return t!==void 0&&s!=null&&u(t,["instances[0]","scribble"],GT(s)),o}function qT(e,t){const n={},o=a(e,["retrievalConfig"]);o!=null&&u(n,["retrievalConfig"],o);const r=a(e,["functionCallingConfig"]);return r!=null&&u(n,["functionCallingConfig"],JE(r)),n}function zT(e,t){const n={};if(a(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=a(e,["computerUse"]);o!=null&&u(n,["computerUse"],o);const r=a(e,["fileSearch"]);r!=null&&u(n,["fileSearch"],r);const i=a(e,["codeExecution"]);if(i!=null&&u(n,["codeExecution"],i),a(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=a(e,["functionDeclarations"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(h=>h)),u(n,["functionDeclarations"],p)}const l=a(e,["googleMaps"]);l!=null&&u(n,["googleMaps"],ET(l));const d=a(e,["googleSearch"]);d!=null&&u(n,["googleSearch"],TT(d));const c=a(e,["googleSearchRetrieval"]);c!=null&&u(n,["googleSearchRetrieval"],c);const f=a(e,["urlContext"]);return f!=null&&u(n,["urlContext"],f),n}function Tc(e,t){const n={},o=a(e,["retrieval"]);o!=null&&u(n,["retrieval"],o);const r=a(e,["computerUse"]);if(r!=null&&u(n,["computerUse"],r),a(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=a(e,["codeExecution"]);i!=null&&u(n,["codeExecution"],i);const s=a(e,["enterpriseWebSearch"]);s!=null&&u(n,["enterpriseWebSearch"],s);const l=a(e,["functionDeclarations"]);if(l!=null){let h=l;Array.isArray(h)&&(h=h.map(v=>WE(v))),u(n,["functionDeclarations"],h)}const d=a(e,["googleMaps"]);d!=null&&u(n,["googleMaps"],d);const c=a(e,["googleSearch"]);c!=null&&u(n,["googleSearch"],c);const f=a(e,["googleSearchRetrieval"]);f!=null&&u(n,["googleSearchRetrieval"],f);const p=a(e,["urlContext"]);return p!=null&&u(n,["urlContext"],p),n}function JT(e,t){const n={},o=a(e,["baseModel"]);o!=null&&u(n,["baseModel"],o);const r=a(e,["createTime"]);r!=null&&u(n,["createTime"],r);const i=a(e,["updateTime"]);return i!=null&&u(n,["updateTime"],i),n}function WT(e,t){const n={},o=a(e,["labels","google-vertex-llm-tuning-base-model-id"]);o!=null&&u(n,["baseModel"],o);const r=a(e,["createTime"]);r!=null&&u(n,["createTime"],r);const i=a(e,["updateTime"]);return i!=null&&u(n,["updateTime"],i),n}function YT(e,t,n){const o={},r=a(e,["displayName"]);t!==void 0&&r!=null&&u(t,["displayName"],r);const i=a(e,["description"]);t!==void 0&&i!=null&&u(t,["description"],i);const s=a(e,["defaultCheckpointId"]);return t!==void 0&&s!=null&&u(t,["defaultCheckpointId"],s),o}function KT(e,t,n){const o={},r=a(e,["displayName"]);t!==void 0&&r!=null&&u(t,["displayName"],r);const i=a(e,["description"]);t!==void 0&&i!=null&&u(t,["description"],i);const s=a(e,["defaultCheckpointId"]);return t!==void 0&&s!=null&&u(t,["defaultCheckpointId"],s),o}function XT(e,t,n){const o={},r=a(t,["model"]);r!=null&&u(o,["_url","name"],se(e,r));const i=a(t,["config"]);return i!=null&&YT(i,o),o}function QT(e,t,n){const o={},r=a(t,["model"]);r!=null&&u(o,["_url","model"],se(e,r));const i=a(t,["config"]);return i!=null&&KT(i,o),o}function ZT(e,t,n){const o={},r=a(e,["outputGcsUri"]);t!==void 0&&r!=null&&u(t,["parameters","storageUri"],r);const i=a(e,["safetyFilterLevel"]);t!==void 0&&i!=null&&u(t,["parameters","safetySetting"],i);const s=a(e,["personGeneration"]);t!==void 0&&s!=null&&u(t,["parameters","personGeneration"],s);const l=a(e,["includeRaiReason"]);t!==void 0&&l!=null&&u(t,["parameters","includeRaiReason"],l);const d=a(e,["outputMimeType"]);t!==void 0&&d!=null&&u(t,["parameters","outputOptions","mimeType"],d);const c=a(e,["outputCompressionQuality"]);t!==void 0&&c!=null&&u(t,["parameters","outputOptions","compressionQuality"],c);const f=a(e,["enhanceInputImage"]);t!==void 0&&f!=null&&u(t,["parameters","upscaleConfig","enhanceInputImage"],f);const p=a(e,["imagePreservationFactor"]);t!==void 0&&p!=null&&u(t,["parameters","upscaleConfig","imagePreservationFactor"],p);const h=a(e,["labels"]);t!==void 0&&h!=null&&u(t,["labels"],h);const v=a(e,["numberOfImages"]);t!==void 0&&v!=null&&u(t,["parameters","sampleCount"],v);const y=a(e,["mode"]);return t!==void 0&&y!=null&&u(t,["parameters","mode"],y),o}function jT(e,t,n){const o={},r=a(t,["model"]);r!=null&&u(o,["_url","model"],se(e,r));const i=a(t,["image"]);i!=null&&u(o,["instances[0]","image"],dt(i));const s=a(t,["upscaleFactor"]);s!=null&&u(o,["parameters","upscaleConfig","upscaleFactor"],s);const l=a(t,["config"]);return l!=null&&ZT(l,o),o}function eC(e,t){const n={},o=a(e,["sdkHttpResponse"]);o!=null&&u(n,["sdkHttpResponse"],o);const r=a(e,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>Wo(s))),u(n,["generatedImages"],i)}return n}function tC(e,t){const n={},o=a(e,["uri"]);o!=null&&u(n,["uri"],o);const r=a(e,["encodedVideo"]);r!=null&&u(n,["videoBytes"],Mt(r));const i=a(e,["encoding"]);return i!=null&&u(n,["mimeType"],i),n}function nC(e,t){const n={},o=a(e,["gcsUri"]);o!=null&&u(n,["uri"],o);const r=a(e,["bytesBase64Encoded"]);r!=null&&u(n,["videoBytes"],Mt(r));const i=a(e,["mimeType"]);return i!=null&&u(n,["mimeType"],i),n}function oC(e,t){const n={},o=a(e,["image"]);o!=null&&u(n,["_self"],dt(o));const r=a(e,["maskMode"]);return r!=null&&u(n,["maskMode"],r),n}function rC(e,t){const n={},o=a(e,["image"]);o!=null&&u(n,["image"],Yo(o));const r=a(e,["referenceType"]);return r!=null&&u(n,["referenceType"],r),n}function iC(e,t){const n={},o=a(e,["image"]);o!=null&&u(n,["image"],dt(o));const r=a(e,["referenceType"]);return r!=null&&u(n,["referenceType"],r),n}function Cc(e,t){const n={},o=a(e,["uri"]);o!=null&&u(n,["uri"],o);const r=a(e,["videoBytes"]);r!=null&&u(n,["encodedVideo"],Mt(r));const i=a(e,["mimeType"]);return i!=null&&u(n,["encoding"],i),n}function Sc(e,t){const n={},o=a(e,["uri"]);o!=null&&u(n,["gcsUri"],o);const r=a(e,["videoBytes"]);r!=null&&u(n,["bytesBase64Encoded"],Mt(r));const i=a(e,["mimeType"]);return i!=null&&u(n,["mimeType"],i),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sC(e,t){const n={},o=a(e,["displayName"]);return t!==void 0&&o!=null&&u(t,["displayName"],o),n}function aC(e){const t={},n=a(e,["config"]);return n!=null&&sC(n,t),t}function lC(e,t){const n={},o=a(e,["force"]);return t!==void 0&&o!=null&&u(t,["_query","force"],o),n}function uC(e){const t={},n=a(e,["name"]);n!=null&&u(t,["_url","name"],n);const o=a(e,["config"]);return o!=null&&lC(o,t),t}function cC(e){const t={},n=a(e,["name"]);return n!=null&&u(t,["_url","name"],n),t}function dC(e,t){const n={},o=a(e,["customMetadata"]);if(t!==void 0&&o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),u(t,["customMetadata"],i)}const r=a(e,["chunkingConfig"]);return t!==void 0&&r!=null&&u(t,["chunkingConfig"],r),n}function fC(e){const t={},n=a(e,["name"]);n!=null&&u(t,["name"],n);const o=a(e,["metadata"]);o!=null&&u(t,["metadata"],o);const r=a(e,["done"]);r!=null&&u(t,["done"],r);const i=a(e,["error"]);i!=null&&u(t,["error"],i);const s=a(e,["response"]);return s!=null&&u(t,["response"],hC(s)),t}function pC(e){const t={},n=a(e,["fileSearchStoreName"]);n!=null&&u(t,["_url","file_search_store_name"],n);const o=a(e,["fileName"]);o!=null&&u(t,["fileName"],o);const r=a(e,["config"]);return r!=null&&dC(r,t),t}function hC(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&u(t,["sdkHttpResponse"],n);const o=a(e,["parent"]);o!=null&&u(t,["parent"],o);const r=a(e,["documentName"]);return r!=null&&u(t,["documentName"],r),t}function mC(e,t){const n={},o=a(e,["pageSize"]);t!==void 0&&o!=null&&u(t,["_query","pageSize"],o);const r=a(e,["pageToken"]);return t!==void 0&&r!=null&&u(t,["_query","pageToken"],r),n}function gC(e){const t={},n=a(e,["config"]);return n!=null&&mC(n,t),t}function vC(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&u(t,["sdkHttpResponse"],n);const o=a(e,["nextPageToken"]);o!=null&&u(t,["nextPageToken"],o);const r=a(e,["fileSearchStores"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),u(t,["fileSearchStores"],i)}return t}function wc(e,t){const n={},o=a(e,["mimeType"]);t!==void 0&&o!=null&&u(t,["mimeType"],o);const r=a(e,["displayName"]);t!==void 0&&r!=null&&u(t,["displayName"],r);const i=a(e,["customMetadata"]);if(t!==void 0&&i!=null){let l=i;Array.isArray(l)&&(l=l.map(d=>d)),u(t,["customMetadata"],l)}const s=a(e,["chunkingConfig"]);return t!==void 0&&s!=null&&u(t,["chunkingConfig"],s),n}function yC(e){const t={},n=a(e,["fileSearchStoreName"]);n!=null&&u(t,["_url","file_search_store_name"],n);const o=a(e,["config"]);return o!=null&&wc(o,t),t}function EC(e){const t={},n=a(e,["sdkHttpResponse"]);return n!=null&&u(t,["sdkHttpResponse"],n),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const TC="Content-Type",CC="X-Server-Timeout",SC="User-Agent",Lr="x-goog-api-client",wC="1.41.0",_C=`google-genai-sdk/${wC}`,xC="v1beta1",IC="v1beta",RC=5,AC=[408,429,500,502,503,504];class bC{constructor(t){var n,o,r;this.clientOptions=Object.assign({},t),this.customBaseUrl=(n=t.httpOptions)===null||n===void 0?void 0:n.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const i={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const l=t.project&&t.location||!!t.apiKey;this.customBaseUrl&&!l?(i.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?i.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(i.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),i.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:xC}else{if(!this.clientOptions.apiKey)throw new An({message:"API key must be set when using the Gemini API.",status:403});i.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:IC,i.baseUrl="https://generativelanguage.googleapis.com/"}i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,t.httpOptions))}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const t=new Headers;return await this.clientOptions.auth.addAuthHeaders(t),t}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&o.push(t.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const t=this.getBaseUrl(),n=new URL(t);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,n,o){const r=[this.getRequestUrlInternal(n)];return o&&r.push(this.getBaseResourcePath()),t!==""&&r.push(t),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(t,n){return!(n.baseUrl&&n.baseUrlResourceScope===br.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||t.path.startsWith("projects/")||t.httpMethod==="GET"&&t.path.startsWith("publishers/google/models"))}async request(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const o=this.shouldPrependVertexProjectPath(t,n),r=this.constructUrl(t.path,n,o);if(t.queryParams)for(const[s,l]of Object.entries(t.queryParams))r.searchParams.append(s,String(l));let i={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else i.body=t.body;return i=await this.includeExtraHttpOptionsToRequestInit(i,n,r.toString(),t.abortSignal),this.unaryApiCall(r,i,t.httpMethod)}patchHttpOptions(t,n){const o=JSON.parse(JSON.stringify(t));for(const[r,i]of Object.entries(n))typeof i=="object"?o[r]=Object.assign(Object.assign({},o[r]),i):i!==void 0&&(o[r]=i);return o}async requestStream(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const o=this.shouldPrependVertexProjectPath(t,n),r=this.constructUrl(t.path,n,o);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let i={};return i.body=t.body,i=await this.includeExtraHttpOptionsToRequestInit(i,n,r.toString(),t.abortSignal),this.streamApiCall(r,i,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,n,o,r){if(n&&n.timeout||r){const i=new AbortController,s=i.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const l=setTimeout(()=>i.abort(),n.timeout);l&&typeof l.unref=="function"&&l.unref()}r&&r.addEventListener("abort",()=>{i.abort()}),t.signal=s}return n&&n.extraBody!==null&&NC(t,n.extraBody),t.headers=await this.getHeadersInternal(n,o),t}async unaryApiCall(t,n,o){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:o})).then(async r=>(await Ga(r),new Nr(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(t,n,o){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:o})).then(async r=>(await Ga(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(t){return st(this,arguments,function*(){var o;const r=(o=t==null?void 0:t.body)===null||o===void 0?void 0:o.getReader(),i=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let s="";const l="data:",d=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:c,value:f}=yield K(r.read());if(c){if(s.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const p=i.decode(f,{stream:!0});try{const y=JSON.parse(p);if("error"in y){const E=JSON.parse(JSON.stringify(y.error)),T=E.status,C=E.code,x=`got status: ${T}. ${JSON.stringify(y)}`;if(C>=400&&C<600)throw new An({message:x,status:C})}}catch(y){if(y.name==="ApiError")throw y}s+=p;let h=-1,v=0;for(;;){h=-1,v=0;for(const T of d){const C=s.indexOf(T);C!==-1&&(h===-1||C<h)&&(h=C,v=T.length)}if(h===-1)break;const y=s.substring(0,h);s=s.substring(h+v);const E=y.trim();if(E.startsWith(l)){const T=E.substring(l.length).trim();try{const C=new Response(T,{headers:t==null?void 0:t.headers,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText});yield yield K(new Nr(C))}catch(C){throw new Error(`exception parsing stream chunk ${T}. ${C}`)}}}}}finally{r.releaseLock()}})}async apiCall(t,n){var o;if(!this.clientOptions.httpOptions||!this.clientOptions.httpOptions.retryOptions)return fetch(t,n);const r=this.clientOptions.httpOptions.retryOptions;return Ev(async()=>{const s=await fetch(t,n);if(s.ok)return s;throw AC.includes(s.status)?new Error(`Retryable HTTP Error: ${s.statusText}`):new tc(`Non-retryable exception ${s.statusText} sending request`)},{retries:((o=r.attempts)!==null&&o!==void 0?o:RC)-1})}getDefaultHeaders(){const t={},n=_C+" "+this.clientOptions.userAgentExtra;return t[SC]=n,t[Lr]=n,t[TC]="application/json",t}async getHeadersInternal(t,n){const o=new Headers;if(t&&t.headers){for(const[r,i]of Object.entries(t.headers))o.append(r,i);t.timeout&&t.timeout>0&&o.append(CC,String(Math.ceil(t.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(o,n),o}getFileName(t){var n;let o="";return typeof t=="string"&&(o=t.replace(/[/\\]+$/,""),o=(n=o.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),o}async uploadFile(t,n){var o;const r={};n!=null&&(r.mimeType=n.mimeType,r.name=n.name,r.displayName=n.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const i=this.clientOptions.uploader,s=await i.stat(t);r.sizeBytes=String(s.size);const l=(o=n==null?void 0:n.mimeType)!==null&&o!==void 0?o:s.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=l;const d={file:r},c=this.getFileName(t),f=L("upload/v1beta/files",d._url),p=await this.fetchUploadUrl(f,r.sizeBytes,r.mimeType,c,d,n==null?void 0:n.httpOptions);return i.upload(t,p,this)}async uploadFileToFileSearchStore(t,n,o){var r;const i=this.clientOptions.uploader,s=await i.stat(n),l=String(s.size),d=(r=o==null?void 0:o.mimeType)!==null&&r!==void 0?r:s.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const c=`upload/v1beta/${t}:uploadToFileSearchStore`,f=this.getFileName(n),p={};o!=null&&wc(o,p);const h=await this.fetchUploadUrl(c,l,d,f,p,o==null?void 0:o.httpOptions);return i.uploadToFileSearchStore(n,h,this)}async downloadFile(t){await this.clientOptions.downloader.download(t,this)}async fetchUploadUrl(t,n,o,r,i,s){var l;let d={};s?d=s:d={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${o}`},r?{"X-Goog-Upload-File-Name":r}:{})};const c=await this.request({path:t,body:JSON.stringify(i),httpMethod:"POST",httpOptions:d});if(!c||!(c!=null&&c.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const f=(l=c==null?void 0:c.headers)===null||l===void 0?void 0:l["x-goog-upload-url"];if(f===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return f}}async function Ga(e){var t;if(e===void 0)throw new Error("response is undefined");if(!e.ok){const n=e.status;let o;!((t=e.headers.get("content-type"))===null||t===void 0)&&t.includes("application/json")?o=await e.json():o={error:{message:await e.text(),code:e.status,status:e.statusText}};const r=JSON.stringify(o);throw n>=400&&n<600?new An({message:r,status:n}):new Error(r)}}function NC(e,t){if(!t||Object.keys(t).length===0)return;if(e.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof e.body=="string"&&e.body.length>0)try{const i=JSON.parse(e.body);if(typeof i=="object"&&i!==null&&!Array.isArray(i))n=i;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(i,s){const l=Object.assign({},i);for(const d in s)if(Object.prototype.hasOwnProperty.call(s,d)){const c=s[d],f=l[d];c&&typeof c=="object"&&!Array.isArray(c)&&f&&typeof f=="object"&&!Array.isArray(f)?l[d]=o(f,c):(f&&c&&typeof f!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${d}". Original type: ${typeof f}, New type: ${typeof c}. Overwriting.`),l[d]=c)}return l}const r=o(n,t);e.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const MC="mcp_used/unknown";let PC=!1;function _c(e){for(const t of e)if(DC(t)||typeof t=="object"&&"inputSchema"in t)return!0;return PC}function xc(e){var t;const n=(t=e[Lr])!==null&&t!==void 0?t:"";e[Lr]=(n+` ${MC}`).trimStart()}function DC(e){return e!==null&&typeof e=="object"&&e instanceof Ai}function kC(e){return st(this,arguments,function*(n,o=100){let r,i=0;for(;i<o;){const s=yield K(n.listTools({cursor:r}));for(const l of s.tools)yield yield K(l),i++;if(!s.nextCursor)break;r=s.nextCursor}})}class Ai{constructor(t=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=t,this.config=n}static create(t,n){return new Ai(t,n)}async initialize(){var t,n,o,r;if(this.mcpTools.length>0)return;const i={},s=[];for(const f of this.mcpClients)try{for(var l=!0,d=(n=void 0,at(kC(f))),c;c=await d.next(),t=c.done,!t;l=!0){r=c.value,l=!1;const p=r;s.push(p);const h=p.name;if(i[h])throw new Error(`Duplicate function name ${h} found in MCP tools. Please ensure function names are unique.`);i[h]=f}}catch(p){n={error:p}}finally{try{!l&&!t&&(o=d.return)&&await o.call(d)}finally{if(n)throw n.error}}this.mcpTools=s,this.functionNameToMcpClient=i}async tool(){return await this.initialize(),ay(this.mcpTools,this.config)}async callTool(t){await this.initialize();const n=[];for(const o of t)if(o.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[o.name];let i;this.config.timeout&&(i={timeout:this.config.timeout});const s=await r.callTool({name:o.name,arguments:o.args},void 0,i);n.push({functionResponse:{name:o.name,response:s.isError?{error:s}:s}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function LC(e,t,n){const o=new jv;let r;n.data instanceof Blob?r=JSON.parse(await n.data.text()):r=JSON.parse(n.data),Object.assign(o,r),t(o)}class UC{constructor(t,n,o){this.apiClient=t,this.auth=n,this.webSocketFactory=o}async connect(t){var n,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),i=this.apiClient.getApiVersion(),s=GC(this.apiClient.getDefaultHeaders()),l=this.apiClient.getApiKey(),d=`${r}/ws/google.ai.generativelanguage.${i}.GenerativeService.BidiGenerateMusic?key=${l}`;let c=()=>{};const f=new Promise(_=>{c=_}),p=t.callbacks,h=function(){c({})},v=this.apiClient,y={onopen:h,onmessage:_=>{LC(v,p.onmessage,_)},onerror:(n=p==null?void 0:p.onerror)!==null&&n!==void 0?n:function(_){},onclose:(o=p==null?void 0:p.onclose)!==null&&o!==void 0?o:function(_){}},E=this.webSocketFactory.create(d,VC(s),y);E.connect(),await f;const x={setup:{model:se(this.apiClient,t.model)}};return E.send(JSON.stringify(x)),new FC(E,this.apiClient)}}class FC{constructor(t,n){this.conn=t,this.apiClient=n}async setWeightedPrompts(t){if(!t.weightedPrompts||Object.keys(t.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=sE(t);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(t){t.musicGenerationConfig||(t.musicGenerationConfig={});const n=iE(t);this.conn.send(JSON.stringify(n))}sendPlaybackControl(t){const n={playbackControl:t};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Yt.PLAY)}pause(){this.sendPlaybackControl(Yt.PAUSE)}stop(){this.sendPlaybackControl(Yt.STOP)}resetContext(){this.sendPlaybackControl(Yt.RESET_CONTEXT)}close(){this.conn.close()}}function VC(e){const t={};return e.forEach((n,o)=>{t[o]=n}),t}function GC(e){const t=new Headers;for(const[n,o]of Object.entries(e))t.append(n,o);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const OC="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function HC(e,t,n){const o=new Zv;let r;n.data instanceof Blob?r=await n.data.text():n.data instanceof ArrayBuffer?r=new TextDecoder().decode(n.data):r=n.data;const i=JSON.parse(r);if(e.isVertexAI()){const s=uE(i);Object.assign(o,s)}else Object.assign(o,i);t(o)}class $C{constructor(t,n,o){this.apiClient=t,this.auth=n,this.webSocketFactory=o,this.music=new UC(this.apiClient,this.auth,this.webSocketFactory)}async connect(t){var n,o,r,i,s,l;if(t.config&&t.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const d=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion();let f;const p=this.apiClient.getHeaders();t.config&&t.config.tools&&_c(t.config.tools)&&xc(p);const h=JC(p);if(this.apiClient.isVertexAI()){const A=this.apiClient.getProject(),N=this.apiClient.getLocation(),P=this.apiClient.getApiKey(),O=!!A&&!!N||!!P;this.apiClient.getCustomBaseUrl()&&!O?f=d:(f=`${d}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(h,f))}else{const A=this.apiClient.getApiKey();let N="BidiGenerateContent",P="key";A!=null&&A.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),c!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),N="BidiGenerateContentConstrained",P="access_token"),f=`${d}/ws/google.ai.generativelanguage.${c}.GenerativeService.${N}?${P}=${A}`}let v=()=>{};const y=new Promise(A=>{v=A}),E=t.callbacks,T=function(){var A;(A=E==null?void 0:E.onopen)===null||A===void 0||A.call(E),v({})},C=this.apiClient,x={onopen:T,onmessage:A=>{HC(C,E.onmessage,A)},onerror:(n=E==null?void 0:E.onerror)!==null&&n!==void 0?n:function(A){},onclose:(o=E==null?void 0:E.onclose)!==null&&o!==void 0?o:function(A){}},_=this.webSocketFactory.create(f,zC(h),x);_.connect(),await y;let w=se(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&w.startsWith("publishers/")){const A=this.apiClient.getProject(),N=this.apiClient.getLocation();A&&N&&(w=`projects/${A}/locations/${N}/`+w)}let R={};this.apiClient.isVertexAI()&&((r=t.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(t.config===void 0?t.config={responseModalities:[_o.AUDIO]}:t.config.responseModalities=[_o.AUDIO]),!((i=t.config)===null||i===void 0)&&i.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const S=(l=(s=t.config)===null||s===void 0?void 0:s.tools)!==null&&l!==void 0?l:[],I=[];for(const A of S)if(this.isCallableTool(A)){const N=A;I.push(await N.tool())}else I.push(A);I.length>0&&(t.config.tools=I);const b={model:w,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?R=rE(this.apiClient,b):R=oE(this.apiClient,b),delete R.config,_.send(JSON.stringify(R)),new qC(_,this.apiClient)}isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}}const BC={turnComplete:!0};class qC{constructor(t,n){this.conn=t,this.apiClient=n}tLiveClientContent(t,n){if(n.turns!==null&&n.turns!==void 0){let o=[];try{o=Ze(n.turns),t.isVertexAI()||(o=o.map(r=>Jo(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:o,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(t,n){let o=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?o=n.functionResponses:o=[n.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const i of o){if(typeof i!="object"||i===null||!("name"in i)||!("response"in i))throw new Error(`Could not parse function response, type '${typeof i}'.`);if(!t.isVertexAI()&&!("id"in i))throw new Error(OC)}return{toolResponse:{functionResponses:o}}}sendClientContent(t){t=Object.assign(Object.assign({},BC),t);const n=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(n))}sendRealtimeInput(t){let n={};this.apiClient.isVertexAI()?n={realtimeInput:lE(t)}:n={realtimeInput:aE(t)},this.conn.send(JSON.stringify(n))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function zC(e){const t={};return e.forEach((n,o)=>{t[o]=n}),t}function JC(e){const t=new Headers;for(const[n,o]of Object.entries(e))t.append(n,o);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Oa=10;function Ha(e){var t,n,o;if(!((t=e==null?void 0:e.automaticFunctionCalling)===null||t===void 0)&&t.disable)return!0;let r=!1;for(const s of(n=e==null?void 0:e.tools)!==null&&n!==void 0?n:[])if(Zt(s)){r=!0;break}if(!r)return!0;const i=(o=e==null?void 0:e.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return i&&(i<0||!Number.isInteger(i))||i==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",i),!0):!1}function Zt(e){return"callTool"in e&&typeof e.callTool=="function"}function WC(e){var t,n,o;return(o=(n=(t=e.config)===null||t===void 0?void 0:t.tools)===null||n===void 0?void 0:n.some(r=>Zt(r)))!==null&&o!==void 0?o:!1}function $a(e){var t;const n=[];return!((t=e==null?void 0:e.config)===null||t===void 0)&&t.tools&&e.config.tools.forEach((o,r)=>{if(Zt(o))return;const i=o;i.functionDeclarations&&i.functionDeclarations.length>0&&n.push(r)}),n}function Ba(e){var t;return!(!((t=e==null?void 0:e.automaticFunctionCalling)===null||t===void 0)&&t.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class YC extends Et{constructor(t){super(),this.apiClient=t,this.generateContent=async n=>{var o,r,i,s,l;const d=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!WC(n)||Ha(n.config))return await this.generateContentInternal(d);const c=$a(n);if(c.length>0){const E=c.map(T=>`tools[${T}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${E}.`)}let f,p;const h=Ze(d.contents),v=(i=(r=(o=d.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:Oa;let y=0;for(;y<v&&(f=await this.generateContentInternal(d),!(!f.functionCalls||f.functionCalls.length===0));){const E=f.candidates[0].content,T=[];for(const C of(l=(s=n.config)===null||s===void 0?void 0:s.tools)!==null&&l!==void 0?l:[])if(Zt(C)){const _=await C.callTool(f.functionCalls);T.push(..._)}y++,p={role:"user",parts:T},d.contents=Ze(d.contents),d.contents.push(E),d.contents.push(p),Ba(d.config)&&(h.push(E),h.push(p))}return Ba(d.config)&&(f.automaticFunctionCallingHistory=h),f},this.generateContentStream=async n=>{var o,r,i,s,l;if(this.maybeMoveToResponseJsonSchem(n),Ha(n.config)){const p=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(p)}const d=$a(n);if(d.length>0){const p=d.map(h=>`tools[${h}]`).join(", ");throw new Error(`Incompatible tools found at ${p}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const c=(i=(r=(o=n==null?void 0:n.config)===null||o===void 0?void 0:o.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||i===void 0?void 0:i.streamFunctionCallArguments,f=(l=(s=n==null?void 0:n.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||l===void 0?void 0:l.disable;if(c&&!f)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(o=>{var r;let i;const s=[];if(o!=null&&o.generatedImages)for(const d of o.generatedImages)d&&(d!=null&&d.safetyAttributes)&&((r=d==null?void 0:d.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?i=d==null?void 0:d.safetyAttributes:s.push(d);let l;return i?l={generatedImages:s,positivePromptSafetyAttributes:i,sdkHttpResponse:o.sdkHttpResponse}:l={generatedImages:s,sdkHttpResponse:o.sdkHttpResponse},l}),this.list=async n=>{var o;const s={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!s.config.queryBase){if(!((o=s.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");s.config.filter="labels.tune-type:*"}return new Ft(yt.PAGED_ITEM_MODELS,l=>this.listInternal(l),await this.listInternal(s),s)},this.editImage=async n=>{const o={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(o.referenceImages=n.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async n=>{let o={numberOfImages:1,mode:"upscale"};n.config&&(o=Object.assign(Object.assign({},o),n.config));const r={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:o};return await this.upscaleImageInternal(r)},this.generateVideos=async n=>{var o,r,i,s,l,d;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((o=n.video)===null||o===void 0)&&o.uri&&(!((r=n.video)===null||r===void 0)&&r.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((s=(i=n.source)===null||i===void 0?void 0:i.video)===null||s===void 0)&&s.uri&&(!((d=(l=n.source)===null||l===void 0?void 0:l.video)===null||d===void 0)&&d.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(t){t.config&&t.config.responseSchema&&(t.config.responseJsonSchema||Object.keys(t.config.responseSchema).includes("$schema")&&(t.config.responseJsonSchema=t.config.responseSchema,delete t.config.responseSchema))}async processParamsMaybeAddMcpUsage(t){var n,o,r;const i=(n=t.config)===null||n===void 0?void 0:n.tools;if(!i)return t;const s=await Promise.all(i.map(async d=>Zt(d)?await d.tool():d)),l={model:t.model,contents:t.contents,config:Object.assign(Object.assign({},t.config),{tools:s})};if(l.config.tools=s,t.config&&t.config.tools&&_c(t.config.tools)){const d=(r=(o=t.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&r!==void 0?r:{};let c=Object.assign({},d);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),xc(c),l.config.httpOptions=Object.assign(Object.assign({},t.config.httpOptions),{headers:c})}return l}async initAfcToolsMap(t){var n,o,r;const i=new Map;for(const s of(o=(n=t.config)===null||n===void 0?void 0:n.tools)!==null&&o!==void 0?o:[])if(Zt(s)){const l=s,d=await l.tool();for(const c of(r=d.functionDeclarations)!==null&&r!==void 0?r:[]){if(!c.name)throw new Error("Function declaration name is required.");if(i.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);i.set(c.name,l)}}return i}async processAfcStream(t){var n,o,r;const i=(r=(o=(n=t.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&r!==void 0?r:Oa;let s=!1,l=0;const d=await this.initAfcToolsMap(t);return(function(c,f,p){return st(this,arguments,function*(){for(var h,v,y,E,T,C;l<i;){s&&(l++,s=!1);const R=yield K(c.processParamsMaybeAddMcpUsage(p)),S=yield K(c.generateContentStreamInternal(R)),I=[],b=[];try{for(var x=!0,_=(v=void 0,at(S)),w;w=yield K(_.next()),h=w.done,!h;x=!0){E=w.value,x=!1;const A=E;if(yield yield K(A),A.candidates&&(!((T=A.candidates[0])===null||T===void 0)&&T.content)){b.push(A.candidates[0].content);for(const N of(C=A.candidates[0].content.parts)!==null&&C!==void 0?C:[])if(l<i&&N.functionCall){if(!N.functionCall.name)throw new Error("Function call name was not returned by the model.");if(f.has(N.functionCall.name)){const P=yield K(f.get(N.functionCall.name).callTool([N.functionCall]));I.push(...P)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${f.keys()}, mising tool: ${N.functionCall.name}`)}}}}catch(A){v={error:A}}finally{try{!x&&!h&&(y=_.return)&&(yield K(y.call(_)))}finally{if(v)throw v.error}}if(I.length>0){s=!0;const A=new hn;A.candidates=[{content:{role:"user",parts:I}}],yield yield K(A);const N=[];N.push(...b),N.push({role:"user",parts:I});const P=Ze(p.contents).concat(N);p.contents=P}else break}})})(this,d,t)}async generateContentInternal(t){var n,o,r,i;let s,l="",d={};if(this.apiClient.isVertexAI()){const c=Ua(this.apiClient,t);return l=L("{model}:generateContent",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=Va(f),h=new hn;return Object.assign(h,p),h})}else{const c=La(this.apiClient,t);return l=L("{model}:generateContent",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=Fa(f),h=new hn;return Object.assign(h,p),h})}}async generateContentStreamInternal(t){var n,o,r,i;let s,l="",d={};if(this.apiClient.isVertexAI()){const c=Ua(this.apiClient,t);return l=L("{model}:streamGenerateContent?alt=sse",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.requestStream({path:l,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}),s.then(function(p){return st(this,arguments,function*(){var h,v,y,E;try{for(var T=!0,C=at(p),x;x=yield K(C.next()),h=x.done,!h;T=!0){E=x.value,T=!1;const _=E,w=Va(yield K(_.json()),t);w.sdkHttpResponse={headers:_.headers};const R=new hn;Object.assign(R,w),yield yield K(R)}}catch(_){v={error:_}}finally{try{!T&&!h&&(y=C.return)&&(yield K(y.call(C)))}finally{if(v)throw v.error}}})})}else{const c=La(this.apiClient,t);return l=L("{model}:streamGenerateContent?alt=sse",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.requestStream({path:l,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}),s.then(function(p){return st(this,arguments,function*(){var h,v,y,E;try{for(var T=!0,C=at(p),x;x=yield K(C.next()),h=x.done,!h;T=!0){E=x.value,T=!1;const _=E,w=Fa(yield K(_.json()),t);w.sdkHttpResponse={headers:_.headers};const R=new hn;Object.assign(R,w),yield yield K(R)}}catch(_){v={error:_}}finally{try{!T&&!h&&(y=C.return)&&(yield K(y.call(C)))}finally{if(v)throw v.error}}})})}}async embedContent(t){var n,o,r,i;let s,l="",d={};if(this.apiClient.isVertexAI()){const c=OE(this.apiClient,t);return l=L("{model}:predict",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=$E(f),h=new ya;return Object.assign(h,p),h})}else{const c=GE(this.apiClient,t);return l=L("{model}:batchEmbedContents",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=HE(f),h=new ya;return Object.assign(h,p),h})}}async generateImagesInternal(t){var n,o,r,i;let s,l="",d={};if(this.apiClient.isVertexAI()){const c=jE(this.apiClient,t);return l=L("{model}:predict",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=tT(f),h=new Ea;return Object.assign(h,p),h})}else{const c=ZE(this.apiClient,t);return l=L("{model}:predict",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=eT(f),h=new Ea;return Object.assign(h,p),h})}}async editImageInternal(t){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI()){const l=LE(this.apiClient,t);return i=L("{model}:predict",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:d.headers},f})),r.then(d=>{const c=UE(d),f=new Ov;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(t){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI()){const l=jT(this.apiClient,t);return i=L("{model}:predict",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:d.headers},f})),r.then(d=>{const c=eC(d),f=new Hv;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(t){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI()){const l=kT(this.apiClient,t);return i=L("{model}:predict",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r.then(d=>{const c=LT(d),f=new $v;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(t){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI()){const l=HT(this.apiClient,t);return i=L("{model}:predict",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r.then(d=>{const c=$T(d),f=new Bv;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(t){var n,o,r,i;let s,l="",d={};if(this.apiClient.isVertexAI()){const c=yT(this.apiClient,t);return l=L("{name}",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>kr(f))}else{const c=vT(this.apiClient,t);return l=L("{name}",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>Dr(f))}}async listInternal(t){var n,o,r,i;let s,l="",d={};if(this.apiClient.isVertexAI()){const c=RT(this.apiClient,t);return l=L("{models_url}",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=bT(f),h=new Ta;return Object.assign(h,p),h})}else{const c=IT(this.apiClient,t);return l=L("{models_url}",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=AT(f),h=new Ta;return Object.assign(h,p),h})}}async update(t){var n,o,r,i;let s,l="",d={};if(this.apiClient.isVertexAI()){const c=QT(this.apiClient,t);return l=L("{model}",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>kr(f))}else{const c=XT(this.apiClient,t);return l=L("{name}",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>Dr(f))}}async delete(t){var n,o,r,i;let s,l="",d={};if(this.apiClient.isVertexAI()){const c=ME(this.apiClient,t);return l=L("{name}",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=DE(f),h=new Ca;return Object.assign(h,p),h})}else{const c=NE(this.apiClient,t);return l=L("{name}",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=PE(f),h=new Ca;return Object.assign(h,p),h})}}async countTokens(t){var n,o,r,i;let s,l="",d={};if(this.apiClient.isVertexAI()){const c=RE(this.apiClient,t);return l=L("{model}:countTokens",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=bE(f),h=new Sa;return Object.assign(h,p),h})}else{const c=IE(this.apiClient,t);return l=L("{model}:countTokens",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=AE(f),h=new Sa;return Object.assign(h,p),h})}}async computeTokens(t){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI()){const l=EE(this.apiClient,t);return i=L("{model}:computeTokens",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:d.headers},f})),r.then(d=>{const c=TE(d),f=new qv;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(t){var n,o,r,i;let s,l="",d={};if(this.apiClient.isVertexAI()){const c=aT(this.apiClient,t);return l=L("{model}:predictLongRunning",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>{const p=iT(f),h=new xo;return Object.assign(h,p),h})}else{const c=sT(this.apiClient,t);return l=L("{model}:predictLongRunning",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>{const p=rT(f),h=new xo;return Object.assign(h,p),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class KC extends Et{constructor(t){super(),this.apiClient=t}async getVideosOperation(t){const n=t.operation,o=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let i;o&&"httpOptions"in o&&(i=o.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:i}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(t){const n=t.operation,o=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let i;o&&"httpOptions"in o&&(i=o.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:i}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(t){var n,o,r,i;let s,l="",d={};if(this.apiClient.isVertexAI()){const c=kv(t);return l=L("{operationName}",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s}else{const c=Dv(t);return l=L("{operationName}",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s}}async fetchPredictVideosOperationInternal(t){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI()){const l=Iv(t);return i=L("{resourceName}:fetchPredictOperation",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function XC(e){const t={},n=a(e,["data"]);if(n!=null&&u(t,["data"],n),a(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=a(e,["mimeType"]);return o!=null&&u(t,["mimeType"],o),t}function QC(e){const t={},n=a(e,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>sS(i))),u(t,["parts"],r)}const o=a(e,["role"]);return o!=null&&u(t,["role"],o),t}function ZC(e,t,n){const o={},r=a(t,["expireTime"]);n!==void 0&&r!=null&&u(n,["expireTime"],r);const i=a(t,["newSessionExpireTime"]);n!==void 0&&i!=null&&u(n,["newSessionExpireTime"],i);const s=a(t,["uses"]);n!==void 0&&s!=null&&u(n,["uses"],s);const l=a(t,["liveConnectConstraints"]);n!==void 0&&l!=null&&u(n,["bidiGenerateContentSetup"],iS(e,l));const d=a(t,["lockAdditionalFields"]);return n!==void 0&&d!=null&&u(n,["fieldMask"],d),o}function jC(e,t){const n={},o=a(t,["config"]);return o!=null&&u(n,["config"],ZC(e,o,n)),n}function eS(e){const t={};if(a(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(e,["fileUri"]);n!=null&&u(t,["fileUri"],n);const o=a(e,["mimeType"]);return o!=null&&u(t,["mimeType"],o),t}function tS(e){const t={},n=a(e,["id"]);n!=null&&u(t,["id"],n);const o=a(e,["args"]);o!=null&&u(t,["args"],o);const r=a(e,["name"]);if(r!=null&&u(t,["name"],r),a(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function nS(e){const t={};if(a(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(e,["enableWidget"]);return n!=null&&u(t,["enableWidget"],n),t}function oS(e){const t={};if(a(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=a(e,["timeRangeFilter"]);return n!=null&&u(t,["timeRangeFilter"],n),t}function rS(e,t){const n={},o=a(e,["generationConfig"]);t!==void 0&&o!=null&&u(t,["setup","generationConfig"],o);const r=a(e,["responseModalities"]);t!==void 0&&r!=null&&u(t,["setup","generationConfig","responseModalities"],r);const i=a(e,["temperature"]);t!==void 0&&i!=null&&u(t,["setup","generationConfig","temperature"],i);const s=a(e,["topP"]);t!==void 0&&s!=null&&u(t,["setup","generationConfig","topP"],s);const l=a(e,["topK"]);t!==void 0&&l!=null&&u(t,["setup","generationConfig","topK"],l);const d=a(e,["maxOutputTokens"]);t!==void 0&&d!=null&&u(t,["setup","generationConfig","maxOutputTokens"],d);const c=a(e,["mediaResolution"]);t!==void 0&&c!=null&&u(t,["setup","generationConfig","mediaResolution"],c);const f=a(e,["seed"]);t!==void 0&&f!=null&&u(t,["setup","generationConfig","seed"],f);const p=a(e,["speechConfig"]);t!==void 0&&p!=null&&u(t,["setup","generationConfig","speechConfig"],Ri(p));const h=a(e,["thinkingConfig"]);t!==void 0&&h!=null&&u(t,["setup","generationConfig","thinkingConfig"],h);const v=a(e,["enableAffectiveDialog"]);t!==void 0&&v!=null&&u(t,["setup","generationConfig","enableAffectiveDialog"],v);const y=a(e,["systemInstruction"]);t!==void 0&&y!=null&&u(t,["setup","systemInstruction"],QC(Fe(y)));const E=a(e,["tools"]);if(t!==void 0&&E!=null){let S=an(E);Array.isArray(S)&&(S=S.map(I=>lS(sn(I)))),u(t,["setup","tools"],S)}const T=a(e,["sessionResumption"]);t!==void 0&&T!=null&&u(t,["setup","sessionResumption"],aS(T));const C=a(e,["inputAudioTranscription"]);t!==void 0&&C!=null&&u(t,["setup","inputAudioTranscription"],C);const x=a(e,["outputAudioTranscription"]);t!==void 0&&x!=null&&u(t,["setup","outputAudioTranscription"],x);const _=a(e,["realtimeInputConfig"]);t!==void 0&&_!=null&&u(t,["setup","realtimeInputConfig"],_);const w=a(e,["contextWindowCompression"]);t!==void 0&&w!=null&&u(t,["setup","contextWindowCompression"],w);const R=a(e,["proactivity"]);if(t!==void 0&&R!=null&&u(t,["setup","proactivity"],R),a(e,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function iS(e,t){const n={},o=a(t,["model"]);o!=null&&u(n,["setup","model"],se(e,o));const r=a(t,["config"]);return r!=null&&u(n,["config"],rS(r,n)),n}function sS(e){const t={},n=a(e,["mediaResolution"]);n!=null&&u(t,["mediaResolution"],n);const o=a(e,["codeExecutionResult"]);o!=null&&u(t,["codeExecutionResult"],o);const r=a(e,["executableCode"]);r!=null&&u(t,["executableCode"],r);const i=a(e,["fileData"]);i!=null&&u(t,["fileData"],eS(i));const s=a(e,["functionCall"]);s!=null&&u(t,["functionCall"],tS(s));const l=a(e,["functionResponse"]);l!=null&&u(t,["functionResponse"],l);const d=a(e,["inlineData"]);d!=null&&u(t,["inlineData"],XC(d));const c=a(e,["text"]);c!=null&&u(t,["text"],c);const f=a(e,["thought"]);f!=null&&u(t,["thought"],f);const p=a(e,["thoughtSignature"]);p!=null&&u(t,["thoughtSignature"],p);const h=a(e,["videoMetadata"]);return h!=null&&u(t,["videoMetadata"],h),t}function aS(e){const t={},n=a(e,["handle"]);if(n!=null&&u(t,["handle"],n),a(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function lS(e){const t={};if(a(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=a(e,["computerUse"]);n!=null&&u(t,["computerUse"],n);const o=a(e,["fileSearch"]);o!=null&&u(t,["fileSearch"],o);const r=a(e,["codeExecution"]);if(r!=null&&u(t,["codeExecution"],r),a(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=a(e,["functionDeclarations"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(p=>p)),u(t,["functionDeclarations"],f)}const s=a(e,["googleMaps"]);s!=null&&u(t,["googleMaps"],nS(s));const l=a(e,["googleSearch"]);l!=null&&u(t,["googleSearch"],oS(l));const d=a(e,["googleSearchRetrieval"]);d!=null&&u(t,["googleSearchRetrieval"],d);const c=a(e,["urlContext"]);return c!=null&&u(t,["urlContext"],c),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function uS(e){const t=[];for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const o=e[n];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const r=Object.keys(o).map(i=>`${n}.${i}`);t.push(...r)}else t.push(n)}return t.join(",")}function cS(e,t){let n=null;const o=e.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const i=o.setup;typeof i=="object"&&i!==null?(e.bidiGenerateContentSetup=i,n=i):delete e.bidiGenerateContentSetup}else o!==void 0&&delete e.bidiGenerateContentSetup;const r=e.fieldMask;if(n){const i=uS(n);if(Array.isArray(t==null?void 0:t.lockAdditionalFields)&&(t==null?void 0:t.lockAdditionalFields.length)===0)i?e.fieldMask=i:delete e.fieldMask;else if(t!=null&&t.lockAdditionalFields&&t.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const s=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let l=[];r.length>0&&(l=r.map(c=>s.includes(c)?`generationConfig.${c}`:c));const d=[];i&&d.push(i),l.length>0&&d.push(...l),d.length>0?e.fieldMask=d.join(","):delete e.fieldMask}else delete e.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?e.fieldMask=r.join(","):delete e.fieldMask;return e}class dS extends Et{constructor(t){super(),this.apiClient=t}async create(t){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const l=jC(this.apiClient,t);i=L("auth_tokens",l._url),s=l._query,delete l.config,delete l._url,delete l._query;const d=cS(l,t.config);return r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>c)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fS(e,t){const n={},o=a(e,["force"]);return t!==void 0&&o!=null&&u(t,["_query","force"],o),n}function pS(e){const t={},n=a(e,["name"]);n!=null&&u(t,["_url","name"],n);const o=a(e,["config"]);return o!=null&&fS(o,t),t}function hS(e){const t={},n=a(e,["name"]);return n!=null&&u(t,["_url","name"],n),t}function mS(e,t){const n={},o=a(e,["pageSize"]);t!==void 0&&o!=null&&u(t,["_query","pageSize"],o);const r=a(e,["pageToken"]);return t!==void 0&&r!=null&&u(t,["_query","pageToken"],r),n}function gS(e){const t={},n=a(e,["parent"]);n!=null&&u(t,["_url","parent"],n);const o=a(e,["config"]);return o!=null&&mS(o,t),t}function vS(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&u(t,["sdkHttpResponse"],n);const o=a(e,["nextPageToken"]);o!=null&&u(t,["nextPageToken"],o);const r=a(e,["documents"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),u(t,["documents"],i)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yS extends Et{constructor(t){super(),this.apiClient=t,this.list=async n=>new Ft(yt.PAGED_ITEM_DOCUMENTS,o=>this.listInternal({parent:n.parent,config:o.config}),await this.listInternal(n),n)}async get(t){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=hS(t);return i=L("{name}",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r.then(d=>d)}}async delete(t){var n,o;let r="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=pS(t);r=L("{name}",s._url),i=s._query,delete s._url,delete s._query,await this.apiClient.request({path:r,queryParams:i,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(t){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=gS(t);return i=L("{parent}/documents",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r.then(d=>{const c=vS(d),f=new zv;return Object.assign(f,c),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ES extends Et{constructor(t,n=new yS(t)){super(),this.apiClient=t,this.documents=n,this.list=async(o={})=>new Ft(yt.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(o),o)}async uploadToFileSearchStore(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(t.fileSearchStoreName,t.file,t.config)}async create(t){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=aC(t);return i=L("fileSearchStores",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r.then(d=>d)}}async get(t){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=cC(t);return i=L("{name}",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r.then(d=>d)}}async delete(t){var n,o;let r="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=uC(t);r=L("{name}",s._url),i=s._query,delete s._url,delete s._query,await this.apiClient.request({path:r,queryParams:i,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(t){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=gC(t);return i=L("fileSearchStores",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r.then(d=>{const c=vC(d),f=new Jv;return Object.assign(f,c),f})}}async uploadToFileSearchStoreInternal(t){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=yC(t);return i=L("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r.then(d=>{const c=EC(d),f=new Wv;return Object.assign(f,c),f})}}async importFile(t){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=pC(t);return i=L("{file_search_store_name}:importFile",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r.then(d=>{const c=fC(d),f=new Si;return Object.assign(f,c),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Ic=function(){const{crypto:e}=globalThis;if(e!=null&&e.randomUUID)return Ic=e.randomUUID.bind(e),e.randomUUID();const t=new Uint8Array(1),n=e?()=>e.getRandomValues(t)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,o=>(+o^n()&15>>+o/4).toString(16))};const TS=()=>Ic();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ur(e){return typeof e=="object"&&e!==null&&("name"in e&&e.name==="AbortError"||"message"in e&&String(e.message).includes("FetchRequestCanceledException"))}const Fr=e=>{if(e instanceof Error)return e;if(typeof e=="object"&&e!==null){try{if(Object.prototype.toString.call(e)==="[object Error]"){const t=new Error(e.message,e.cause?{cause:e.cause}:{});return e.stack&&(t.stack=e.stack),e.cause&&!t.cause&&(t.cause=e.cause),e.name&&(t.name=e.name),t}}catch{}try{return new Error(JSON.stringify(e))}catch{}}return new Error(e)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class et extends Error{}class $e extends et{constructor(t,n,o,r){super(`${$e.makeMessage(t,n,o)}`),this.status=t,this.headers=r,this.error=n}static makeMessage(t,n,o){const r=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):o;return t&&r?`${t} ${r}`:t?`${t} status code (no body)`:r||"(no status code or body)"}static generate(t,n,o,r){if(!t||!r)return new Ko({message:o,cause:Fr(n)});const i=n;return t===400?new Ac(t,i,o,r):t===401?new bc(t,i,o,r):t===403?new Nc(t,i,o,r):t===404?new Mc(t,i,o,r):t===409?new Pc(t,i,o,r):t===422?new Dc(t,i,o,r):t===429?new kc(t,i,o,r):t>=500?new Lc(t,i,o,r):new $e(t,i,o,r)}}class Vr extends $e{constructor({message:t}={}){super(void 0,void 0,t||"Request was aborted.",void 0)}}class Ko extends $e{constructor({message:t,cause:n}){super(void 0,void 0,t||"Connection error.",void 0),n&&(this.cause=n)}}class Rc extends Ko{constructor({message:t}={}){super({message:t??"Request timed out."})}}class Ac extends $e{}class bc extends $e{}class Nc extends $e{}class Mc extends $e{}class Pc extends $e{}class Dc extends $e{}class kc extends $e{}class Lc extends $e{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const CS=/^[a-z][a-z0-9+.-]*:/i,SS=e=>CS.test(e);let Gr=e=>(Gr=Array.isArray,Gr(e));const wS=Gr;let _S=wS;const qa=_S;function xS(e){if(!e)return!0;for(const t in e)return!1;return!0}function IS(e,t){return Object.prototype.hasOwnProperty.call(e,t)}const RS=(e,t)=>{if(typeof t!="number"||!Number.isInteger(t))throw new et(`${e} must be an integer`);if(t<0)throw new et(`${e} must be a positive integer`);return t},AS=e=>{try{return JSON.parse(e)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const bS=e=>new Promise(t=>setTimeout(t,e));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Wt="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function NS(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const MS=()=>{var e,t,n,o,r;const i=NS();if(i==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Wt,"X-Stainless-OS":Ja(Deno.build.os),"X-Stainless-Arch":za(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(t=(e=Deno.version)===null||e===void 0?void 0:e.deno)!==null&&t!==void 0?t:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Wt,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(i==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Wt,"X-Stainless-OS":Ja((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":za((o=globalThis.process.arch)!==null&&o!==void 0?o:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const s=PS();return s?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Wt,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${s.browser}`,"X-Stainless-Runtime-Version":s.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Wt,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function PS(){if(typeof navigator>"u"||!navigator)return null;const e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:n}of e){const o=n.exec(navigator.userAgent);if(o){const r=o[1]||0,i=o[2]||0,s=o[3]||0;return{browser:t,version:`${r}.${i}.${s}`}}}return null}const za=e=>e==="x32"?"x32":e==="x86_64"||e==="x64"?"x64":e==="arm"?"arm":e==="aarch64"||e==="arm64"?"arm64":e?`other:${e}`:"unknown",Ja=e=>(e=e.toLowerCase(),e.includes("ios")?"iOS":e==="android"?"Android":e==="darwin"?"MacOS":e==="win32"?"Windows":e==="freebsd"?"FreeBSD":e==="openbsd"?"OpenBSD":e==="linux"?"Linux":e?`Other:${e}`:"Unknown");let Kn;const DS=()=>Kn??(Kn=MS());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kS(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function Uc(...e){const t=globalThis.ReadableStream;if(typeof t>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new t(...e)}function LS(e){let t=Symbol.asyncIterator in e?e[Symbol.asyncIterator]():e[Symbol.iterator]();return Uc({start(){},async pull(n){const{done:o,value:r}=await t.next();o?n.close():n.enqueue(r)},async cancel(){var n;await((n=t.return)===null||n===void 0?void 0:n.call(t))}})}function Fc(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{async next(){try{const n=await t.read();return n!=null&&n.done&&t.releaseLock(),n}catch(n){throw t.releaseLock(),n}},async return(){const n=t.cancel();return t.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function US(e){var t,n;if(e===null||typeof e!="object")return;if(e[Symbol.asyncIterator]){await((n=(t=e[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(t));return}const o=e.getReader(),r=o.cancel();o.releaseLock(),await r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const FS=({headers:e,body:t})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(t)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Vc=()=>{var e;if(typeof File>"u"){const{process:t}=globalThis,n=typeof((e=t==null?void 0:t.versions)===null||e===void 0?void 0:e.node)=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function pr(e,t,n){return Vc(),new File(e,t??"unknown_file",n)}function VS(e){return(typeof e=="object"&&e!==null&&("name"in e&&e.name&&String(e.name)||"url"in e&&e.url&&String(e.url)||"filename"in e&&e.filename&&String(e.filename)||"path"in e&&e.path&&String(e.path))||"").split(/[\\/]/).pop()||void 0}const GS=e=>e!=null&&typeof e=="object"&&typeof e[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Gc=e=>e!=null&&typeof e=="object"&&typeof e.size=="number"&&typeof e.type=="string"&&typeof e.text=="function"&&typeof e.slice=="function"&&typeof e.arrayBuffer=="function",OS=e=>e!=null&&typeof e=="object"&&typeof e.name=="string"&&typeof e.lastModified=="number"&&Gc(e),HS=e=>e!=null&&typeof e=="object"&&typeof e.url=="string"&&typeof e.blob=="function";async function $S(e,t,n){if(Vc(),e=await e,OS(e))return e instanceof File?e:pr([await e.arrayBuffer()],e.name);if(HS(e)){const r=await e.blob();return t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()),pr(await Or(r),t,n)}const o=await Or(e);if(t||(t=VS(e)),!(n!=null&&n.type)){const r=o.find(i=>typeof i=="object"&&"type"in i&&i.type);typeof r=="string"&&(n=Object.assign(Object.assign({},n),{type:r}))}return pr(o,t,n)}async function Or(e){var t,n,o,r,i;let s=[];if(typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)s.push(e);else if(Gc(e))s.push(e instanceof Blob?e:await e.arrayBuffer());else if(GS(e))try{for(var l=!0,d=at(e),c;c=await d.next(),t=c.done,!t;l=!0){r=c.value,l=!1;const f=r;s.push(...await Or(f))}}catch(f){n={error:f}}finally{try{!l&&!t&&(o=d.return)&&await o.call(d)}finally{if(n)throw n.error}}else{const f=(i=e==null?void 0:e.constructor)===null||i===void 0?void 0:i.name;throw new Error(`Unexpected data type: ${typeof e}${f?`; constructor: ${f}`:""}${BS(e)}`)}return s}function BS(e){return typeof e!="object"||e===null?"":`; props: [${Object.getOwnPropertyNames(e).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Oc{constructor(t){this._client=t}}Oc._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Hc(e){return e.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Wa=Object.freeze(Object.create(null)),qS=(e=Hc)=>(function(n,...o){if(n.length===1)return n[0];let r=!1;const i=[],s=n.reduce((f,p,h)=>{var v,y,E;/[?#]/.test(p)&&(r=!0);const T=o[h];let C=(r?encodeURIComponent:e)(""+T);return h!==o.length&&(T==null||typeof T=="object"&&T.toString===((E=Object.getPrototypeOf((y=Object.getPrototypeOf((v=T.hasOwnProperty)!==null&&v!==void 0?v:Wa))!==null&&y!==void 0?y:Wa))===null||E===void 0?void 0:E.toString))&&(C=T+"",i.push({start:f.length+p.length,length:C.length,error:`Value of type ${Object.prototype.toString.call(T).slice(8,-1)} is not a valid path parameter`})),f+p+(h===o.length?"":C)},""),l=s.split(/[?#]/,1)[0],d=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let c;for(;(c=d.exec(l))!==null;)i.push({start:c.index,length:c[0].length,error:`Value "${c[0]}" can't be safely passed as a path parameter`});if(i.sort((f,p)=>f.start-p.start),i.length>0){let f=0;const p=i.reduce((h,v)=>{const y=" ".repeat(v.start-f),E="^".repeat(v.length);return f=v.start+v.length,h+y+E},"");throw new et(`Path parameters result in path with invalid segments:
${i.map(h=>h.error).join(`
`)}
${s}
${p}`)}return s}),Xn=qS(Hc);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $c extends Oc{create(t,n){var o;const{api_version:r=this._client.apiVersion}=t,i=Ro(t,["api_version"]);if("model"in i&&"agent_config"in i)throw new et("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in i&&"generation_config"in i)throw new et("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Xn`/${r}/interactions`,Object.assign(Object.assign({body:i},n),{stream:(o=t.stream)!==null&&o!==void 0?o:!1}))}delete(t,n={},o){const{api_version:r=this._client.apiVersion}=n??{};return this._client.delete(Xn`/${r}/interactions/${t}`,o)}cancel(t,n={},o){const{api_version:r=this._client.apiVersion}=n??{};return this._client.post(Xn`/${r}/interactions/${t}/cancel`,o)}get(t,n={},o){var r;const i=n??{},{api_version:s=this._client.apiVersion}=i,l=Ro(i,["api_version"]);return this._client.get(Xn`/${s}/interactions/${t}`,Object.assign(Object.assign({query:l},o),{stream:(r=n==null?void 0:n.stream)!==null&&r!==void 0?r:!1}))}}$c._key=Object.freeze(["interactions"]);class Bc extends $c{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zS(e){let t=0;for(const r of e)t+=r.length;const n=new Uint8Array(t);let o=0;for(const r of e)n.set(r,o),o+=r.length;return n}let Qn;function bi(e){let t;return(Qn??(t=new globalThis.TextEncoder,Qn=t.encode.bind(t)))(e)}let Zn;function Ya(e){let t;return(Zn??(t=new globalThis.TextDecoder,Zn=t.decode.bind(t)))(e)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Xo{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(t){if(t==null)return[];const n=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?bi(t):t;this.buffer=zS([this.buffer,n]);const o=[];let r;for(;(r=JS(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){o.push(Ya(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const i=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,s=Ya(this.buffer.subarray(0,i));o.push(s),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return o}flush(){return this.buffer.length?this.decode(`
`):[]}}Xo.NEWLINE_CHARS=new Set([`
`,"\r"]);Xo.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function JS(e,t){for(let r=t??0;r<e.length;r++){if(e[r]===10)return{preceding:r,index:r+1,carriage:!1};if(e[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function WS(e){for(let o=0;o<e.length-1;o++){if(e[o]===10&&e[o+1]===10||e[o]===13&&e[o+1]===13)return o+2;if(e[o]===13&&e[o+1]===10&&o+3<e.length&&e[o+2]===13&&e[o+3]===10)return o+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ao={off:0,error:200,warn:300,info:400,debug:500},Ka=(e,t,n)=>{if(e){if(IS(Ao,e))return e;He(n).warn(`${t} was set to ${JSON.stringify(e)}, expected one of ${JSON.stringify(Object.keys(Ao))}`)}};function yn(){}function jn(e,t,n){return!t||Ao[e]>Ao[n]?yn:t[e].bind(t)}const YS={error:yn,warn:yn,info:yn,debug:yn};let Xa=new WeakMap;function He(e){var t;const n=e.logger,o=(t=e.logLevel)!==null&&t!==void 0?t:"off";if(!n)return YS;const r=Xa.get(n);if(r&&r[0]===o)return r[1];const i={error:jn("error",n,o),warn:jn("warn",n,o),info:jn("info",n,o),debug:jn("debug",n,o)};return Xa.set(n,[o,i]),i}const Dt=e=>(e.options&&(e.options=Object.assign({},e.options),delete e.options.headers),e.headers&&(e.headers=Object.fromEntries((e.headers instanceof Headers?[...e.headers]:Object.entries(e.headers)).map(([t,n])=>[t,t.toLowerCase()==="x-goog-api-key"||t.toLowerCase()==="authorization"||t.toLowerCase()==="cookie"||t.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in e&&(e.retryOfRequestLogID&&(e.retryOf=e.retryOfRequestLogID),delete e.retryOfRequestLogID),e);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Kt{constructor(t,n,o){this.iterator=t,this.controller=n,this.client=o}static fromSSEResponse(t,n,o){let r=!1;const i=o?He(o):console;function s(){return st(this,arguments,function*(){var d,c,f,p;if(r)throw new et("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let h=!1;try{try{for(var v=!0,y=at(KS(t,n)),E;E=yield K(y.next()),d=E.done,!d;v=!0){p=E.value,v=!1;const T=p;if(!h)if(T.data.startsWith("[DONE]")){h=!0;continue}else try{yield yield K(JSON.parse(T.data))}catch(C){throw i.error("Could not parse message into JSON:",T.data),i.error("From chunk:",T.raw),C}}}catch(T){c={error:T}}finally{try{!v&&!d&&(f=y.return)&&(yield K(f.call(y)))}finally{if(c)throw c.error}}h=!0}catch(T){if(Ur(T))return yield K(void 0);throw T}finally{h||n.abort()}})}return new Kt(s,n,o)}static fromReadableStream(t,n,o){let r=!1;function i(){return st(this,arguments,function*(){var d,c,f,p;const h=new Xo,v=Fc(t);try{for(var y=!0,E=at(v),T;T=yield K(E.next()),d=T.done,!d;y=!0){p=T.value,y=!1;const C=p;for(const x of h.decode(C))yield yield K(x)}}catch(C){c={error:C}}finally{try{!y&&!d&&(f=E.return)&&(yield K(f.call(E)))}finally{if(c)throw c.error}}for(const C of h.flush())yield yield K(C)})}function s(){return st(this,arguments,function*(){var d,c,f,p;if(r)throw new et("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let h=!1;try{try{for(var v=!0,y=at(i()),E;E=yield K(y.next()),d=E.done,!d;v=!0){p=E.value,v=!1;const T=p;h||T&&(yield yield K(JSON.parse(T)))}}catch(T){c={error:T}}finally{try{!v&&!d&&(f=y.return)&&(yield K(f.call(y)))}finally{if(c)throw c.error}}h=!0}catch(T){if(Ur(T))return yield K(void 0);throw T}finally{h||n.abort()}})}return new Kt(s,n,o)}[Symbol.asyncIterator](){return this.iterator()}tee(){const t=[],n=[],o=this.iterator(),r=i=>({next:()=>{if(i.length===0){const s=o.next();t.push(s),n.push(s)}return i.shift()}});return[new Kt(()=>r(t),this.controller,this.client),new Kt(()=>r(n),this.controller,this.client)]}toReadableStream(){const t=this;let n;return Uc({async start(){n=t[Symbol.asyncIterator]()},async pull(o){try{const{value:r,done:i}=await n.next();if(i)return o.close();const s=bi(JSON.stringify(r)+`
`);o.enqueue(s)}catch(r){o.error(r)}},async cancel(){var o;await((o=n.return)===null||o===void 0?void 0:o.call(n))}})}}function KS(e,t){return st(this,arguments,function*(){var o,r,i,s;if(!e.body)throw t.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new et("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new et("Attempted to iterate over a response with no body");const l=new QS,d=new Xo,c=Fc(e.body);try{for(var f=!0,p=at(XS(c)),h;h=yield K(p.next()),o=h.done,!o;f=!0){s=h.value,f=!1;const v=s;for(const y of d.decode(v)){const E=l.decode(y);E&&(yield yield K(E))}}}catch(v){r={error:v}}finally{try{!f&&!o&&(i=p.return)&&(yield K(i.call(p)))}finally{if(r)throw r.error}}for(const v of d.flush()){const y=l.decode(v);y&&(yield yield K(y))}})}function XS(e){return st(this,arguments,function*(){var n,o,r,i;let s=new Uint8Array;try{for(var l=!0,d=at(e),c;c=yield K(d.next()),n=c.done,!n;l=!0){i=c.value,l=!1;const f=i;if(f==null)continue;const p=f instanceof ArrayBuffer?new Uint8Array(f):typeof f=="string"?bi(f):f;let h=new Uint8Array(s.length+p.length);h.set(s),h.set(p,s.length),s=h;let v;for(;(v=WS(s))!==-1;)yield yield K(s.slice(0,v)),s=s.slice(v)}}catch(f){o={error:f}}finally{try{!l&&!n&&(r=d.return)&&(yield K(r.call(d)))}finally{if(o)throw o.error}}s.length>0&&(yield yield K(s))})}class QS{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(t){if(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),!t){if(!this.event&&!this.data.length)return null;const i={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],i}if(this.chunks.push(t),t.startsWith(":"))return null;let[n,o,r]=ZS(t,":");return r.startsWith(" ")&&(r=r.substring(1)),n==="event"?this.event=r:n==="data"&&this.data.push(r),null}}function ZS(e,t){const n=e.indexOf(t);return n!==-1?[e.substring(0,n),t,e.substring(n+t.length)]:[e,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function jS(e,t){const{response:n,requestLogID:o,retryOfRequestLogID:r,startTime:i}=t,s=await(async()=>{var l;if(t.options.stream)return He(e).debug("response",n.status,n.url,n.headers,n.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(n,t.controller,e):Kt.fromSSEResponse(n,t.controller,e);if(n.status===204)return null;if(t.options.__binaryResponse)return n;const d=n.headers.get("content-type"),c=(l=d==null?void 0:d.split(";")[0])===null||l===void 0?void 0:l.trim();return(c==null?void 0:c.includes("application/json"))||(c==null?void 0:c.endsWith("+json"))?n.headers.get("content-length")==="0"?void 0:await n.json():await n.text()})();return He(e).debug(`[${o}] response parsed`,Dt({retryOfRequestLogID:r,url:n.url,status:n.status,body:s,durationMs:Date.now()-i})),s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ni extends Promise{constructor(t,n,o=jS){super(r=>{r(null)}),this.responsePromise=n,this.parseResponse=o,this.client=t}_thenUnwrap(t){return new Ni(this.client,this.responsePromise,async(n,o)=>t(await this.parseResponse(n,o),o))}asResponse(){return this.responsePromise.then(t=>t.response)}async withResponse(){const[t,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:t,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(t=>this.parseResponse(this.client,t))),this.parsedPromise}then(t,n){return this.parse().then(t,n)}catch(t){return this.parse().catch(t)}finally(t){return this.parse().finally(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qc=Symbol("brand.privateNullableHeaders");function*ew(e){if(!e)return;if(qc in e){const{values:o,nulls:r}=e;yield*o.entries();for(const i of r)yield[i,null];return}let t=!1,n;e instanceof Headers?n=e.entries():qa(e)?n=e:(t=!0,n=Object.entries(e??{}));for(let o of n){const r=o[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const i=qa(o[1])?o[1]:[o[1]];let s=!1;for(const l of i)l!==void 0&&(t&&!s&&(s=!0,yield[r,null]),yield[r,l])}}const mn=e=>{const t=new Headers,n=new Set;for(const o of e){const r=new Set;for(const[i,s]of ew(o)){const l=i.toLowerCase();r.has(l)||(t.delete(i),r.add(l)),s===null?(t.delete(i),n.add(l)):(t.append(i,s),n.delete(l))}}return{[qc]:!0,values:t,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const hr=e=>{var t,n,o,r,i,s;if(typeof globalThis.process<"u")return(o=(n=(t=Tv)===null||t===void 0?void 0:t[e])===null||n===void 0?void 0:n.trim())!==null&&o!==void 0?o:void 0;if(typeof globalThis.Deno<"u")return(s=(i=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||i===void 0?void 0:i.call(r,e))===null||s===void 0?void 0:s.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var zc;class Qo{constructor(t){var n,o,r,i,s,l,d,{baseURL:c=hr("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:f=(n=hr("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:p="v1beta"}=t,h=Ro(t,["baseURL","apiKey","apiVersion"]);const v=Object.assign(Object.assign({apiKey:f,apiVersion:p},h),{baseURL:c||"https://generativelanguage.googleapis.com"});this.baseURL=v.baseURL,this.timeout=(o=v.timeout)!==null&&o!==void 0?o:Qo.DEFAULT_TIMEOUT,this.logger=(r=v.logger)!==null&&r!==void 0?r:console;const y="warn";this.logLevel=y,this.logLevel=(s=(i=Ka(v.logLevel,"ClientOptions.logLevel",this))!==null&&i!==void 0?i:Ka(hr("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&s!==void 0?s:y,this.fetchOptions=v.fetchOptions,this.maxRetries=(l=v.maxRetries)!==null&&l!==void 0?l:2,this.fetch=(d=v.fetch)!==null&&d!==void 0?d:kS(),this.encoder=FS,this._options=v,this.apiKey=f,this.apiVersion=p,this.clientAdapter=v.clientAdapter}withOptions(t){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),t))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:t,nulls:n}){if(!(t.has("authorization")||t.has("x-goog-api-key"))&&!(this.apiKey&&t.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(t){const n=mn([t.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return mn([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return mn([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(t){return Object.entries(t).filter(([n,o])=>typeof o<"u").map(([n,o])=>{if(typeof o=="string"||typeof o=="number"||typeof o=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(o)}`;if(o===null)return`${encodeURIComponent(n)}=`;throw new et(`Cannot stringify type ${typeof o}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Wt}`}defaultIdempotencyKey(){return`stainless-node-retry-${TS()}`}makeStatusError(t,n,o,r){return $e.generate(t,n,o,r)}buildURL(t,n,o){const r=!this.baseURLOverridden()&&o||this.baseURL,i=SS(t)?new URL(t):new URL(r+(r.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),s=this.defaultQuery();return xS(s)||(n=Object.assign(Object.assign({},s),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(i.search=this.stringifyQuery(n)),i.toString()}async prepareOptions(t){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!t.path.startsWith(`/${this.apiVersion}/projects/`)){const n=t.path.slice(this.apiVersion.length+1);t.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(t,{url:n,options:o}){}get(t,n){return this.methodRequest("get",t,n)}post(t,n){return this.methodRequest("post",t,n)}patch(t,n){return this.methodRequest("patch",t,n)}put(t,n){return this.methodRequest("put",t,n)}delete(t,n){return this.methodRequest("delete",t,n)}methodRequest(t,n,o){return this.request(Promise.resolve(o).then(r=>Object.assign({method:t,path:n},r)))}request(t,n=null){return new Ni(this,this.makeRequest(t,n,void 0))}async makeRequest(t,n,o){var r,i,s;const l=await t,d=(r=l.maxRetries)!==null&&r!==void 0?r:this.maxRetries;n==null&&(n=d),await this.prepareOptions(l);const{req:c,url:f,timeout:p}=await this.buildRequest(l,{retryCount:d-n});await this.prepareRequest(c,{url:f,options:l});const h="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),v=o===void 0?"":`, retryOf: ${o}`,y=Date.now();if(He(this).debug(`[${h}] sending request`,Dt({retryOfRequestLogID:o,method:l.method,url:f,options:l,headers:c.headers})),!((i=l.signal)===null||i===void 0)&&i.aborted)throw new Vr;const E=new AbortController,T=await this.fetchWithTimeout(f,c,p,E).catch(Fr),C=Date.now();if(T instanceof globalThis.Error){const _=`retrying, ${n} attempts remaining`;if(!((s=l.signal)===null||s===void 0)&&s.aborted)throw new Vr;const w=Ur(T)||/timed? ?out/i.test(String(T)+("cause"in T?String(T.cause):""));if(n)return He(this).info(`[${h}] connection ${w?"timed out":"failed"} - ${_}`),He(this).debug(`[${h}] connection ${w?"timed out":"failed"} (${_})`,Dt({retryOfRequestLogID:o,url:f,durationMs:C-y,message:T.message})),this.retryRequest(l,n,o??h);throw He(this).info(`[${h}] connection ${w?"timed out":"failed"} - error; no more retries left`),He(this).debug(`[${h}] connection ${w?"timed out":"failed"} (error; no more retries left)`,Dt({retryOfRequestLogID:o,url:f,durationMs:C-y,message:T.message})),w?new Rc:new Ko({cause:T})}const x=`[${h}${v}] ${c.method} ${f} ${T.ok?"succeeded":"failed"} with status ${T.status} in ${C-y}ms`;if(!T.ok){const _=await this.shouldRetry(T);if(n&&_){const A=`retrying, ${n} attempts remaining`;return await US(T.body),He(this).info(`${x} - ${A}`),He(this).debug(`[${h}] response error (${A})`,Dt({retryOfRequestLogID:o,url:T.url,status:T.status,headers:T.headers,durationMs:C-y})),this.retryRequest(l,n,o??h,T.headers)}const w=_?"error; no more retries left":"error; not retryable";He(this).info(`${x} - ${w}`);const R=await T.text().catch(A=>Fr(A).message),S=AS(R),I=S?void 0:R;throw He(this).debug(`[${h}] response error (${w})`,Dt({retryOfRequestLogID:o,url:T.url,status:T.status,headers:T.headers,message:I,durationMs:Date.now()-y})),this.makeStatusError(T.status,S,I,T.headers)}return He(this).info(x),He(this).debug(`[${h}] response start`,Dt({retryOfRequestLogID:o,url:T.url,status:T.status,headers:T.headers,durationMs:C-y})),{response:T,options:l,controller:E,requestLogID:h,retryOfRequestLogID:o,startTime:y}}async fetchWithTimeout(t,n,o,r){const i=n||{},{signal:s,method:l}=i,d=Ro(i,["signal","method"]),c=this._makeAbort(r);s&&s.addEventListener("abort",c,{once:!0});const f=setTimeout(c,o),p=globalThis.ReadableStream&&d.body instanceof globalThis.ReadableStream||typeof d.body=="object"&&d.body!==null&&Symbol.asyncIterator in d.body,h=Object.assign(Object.assign(Object.assign({signal:r.signal},p?{duplex:"half"}:{}),{method:"GET"}),d);l&&(h.method=l.toUpperCase());try{return await this.fetch.call(void 0,t,h)}finally{clearTimeout(f)}}async shouldRetry(t){const n=t.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:t.status===408||t.status===409||t.status===429||t.status>=500}async retryRequest(t,n,o,r){var i;let s;const l=r==null?void 0:r.get("retry-after-ms");if(l){const c=parseFloat(l);Number.isNaN(c)||(s=c)}const d=r==null?void 0:r.get("retry-after");if(d&&!s){const c=parseFloat(d);Number.isNaN(c)?s=Date.parse(d)-Date.now():s=c*1e3}if(!(s&&0<=s&&s<60*1e3)){const c=(i=t.maxRetries)!==null&&i!==void 0?i:this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(n,c)}return await bS(s),this.makeRequest(t,n-1,o)}calculateDefaultRetryTimeoutMillis(t,n){const i=n-t,s=Math.min(.5*Math.pow(2,i),8),l=1-Math.random()*.25;return s*l*1e3}async buildRequest(t,{retryCount:n=0}={}){var o,r,i;const s=Object.assign({},t),{method:l,path:d,query:c,defaultBaseURL:f}=s,p=this.buildURL(d,c,f);"timeout"in s&&RS("timeout",s.timeout),s.timeout=(o=s.timeout)!==null&&o!==void 0?o:this.timeout;const{bodyHeaders:h,body:v}=this.buildBody({options:s}),y=await this.buildHeaders({options:t,method:l,bodyHeaders:h,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:l,headers:y},s.signal&&{signal:s.signal}),globalThis.ReadableStream&&v instanceof globalThis.ReadableStream&&{duplex:"half"}),v&&{body:v}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(i=s.fetchOptions)!==null&&i!==void 0?i:{}),url:p,timeout:s.timeout}}async buildHeaders({options:t,method:n,bodyHeaders:o,retryCount:r}){let i={};this.idempotencyHeader&&n!=="get"&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),i[this.idempotencyHeader]=t.idempotencyKey);const s=await this.authHeaders(t);let l=mn([i,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},t.timeout?{"X-Stainless-Timeout":String(Math.trunc(t.timeout/1e3))}:{}),DS()),this._options.defaultHeaders,o,t.headers,s]);return this.validateHeaders(l),l.values}_makeAbort(t){return()=>t.abort()}buildBody({options:{body:t,headers:n}}){if(!t)return{bodyHeaders:void 0,body:void 0};const o=mn([n]);return ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof DataView||typeof t=="string"&&o.values.has("content-type")||globalThis.Blob&&t instanceof globalThis.Blob||t instanceof FormData||t instanceof URLSearchParams||globalThis.ReadableStream&&t instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:t}:typeof t=="object"&&(Symbol.asyncIterator in t||Symbol.iterator in t&&"next"in t&&typeof t.next=="function")?{bodyHeaders:void 0,body:LS(t)}:this.encoder({body:t,headers:o})}}Qo.DEFAULT_TIMEOUT=6e4;class ke extends Qo{constructor(){super(...arguments),this.interactions=new Bc(this)}}zc=ke;ke.GeminiNextGenAPIClient=zc;ke.GeminiNextGenAPIClientError=et;ke.APIError=$e;ke.APIConnectionError=Ko;ke.APIConnectionTimeoutError=Rc;ke.APIUserAbortError=Vr;ke.NotFoundError=Mc;ke.ConflictError=Pc;ke.RateLimitError=kc;ke.BadRequestError=Ac;ke.AuthenticationError=bc;ke.InternalServerError=Lc;ke.PermissionDeniedError=Nc;ke.UnprocessableEntityError=Dc;ke.toFile=$S;ke.Interactions=Bc;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tw(e,t){const n={},o=a(e,["name"]);return o!=null&&u(n,["_url","name"],o),n}function nw(e,t){const n={},o=a(e,["name"]);return o!=null&&u(n,["_url","name"],o),n}function ow(e,t){const n={},o=a(e,["sdkHttpResponse"]);return o!=null&&u(n,["sdkHttpResponse"],o),n}function rw(e,t){const n={},o=a(e,["sdkHttpResponse"]);return o!=null&&u(n,["sdkHttpResponse"],o),n}function iw(e,t,n){const o={};if(a(e,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=a(e,["tunedModelDisplayName"]);if(t!==void 0&&r!=null&&u(t,["displayName"],r),a(e,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const i=a(e,["epochCount"]);t!==void 0&&i!=null&&u(t,["tuningTask","hyperparameters","epochCount"],i);const s=a(e,["learningRateMultiplier"]);if(s!=null&&u(o,["tuningTask","hyperparameters","learningRateMultiplier"],s),a(e,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(a(e,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(a(e,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");if(a(e,["tuningMode"])!==void 0)throw new Error("tuningMode parameter is not supported in Gemini API.");if(a(e,["customBaseModel"])!==void 0)throw new Error("customBaseModel parameter is not supported in Gemini API.");const l=a(e,["batchSize"]);t!==void 0&&l!=null&&u(t,["tuningTask","hyperparameters","batchSize"],l);const d=a(e,["learningRate"]);if(t!==void 0&&d!=null&&u(t,["tuningTask","hyperparameters","learningRate"],d),a(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(a(e,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");if(a(e,["baseTeacherModel"])!==void 0)throw new Error("baseTeacherModel parameter is not supported in Gemini API.");if(a(e,["tunedTeacherModelSource"])!==void 0)throw new Error("tunedTeacherModelSource parameter is not supported in Gemini API.");if(a(e,["sftLossWeightMultiplier"])!==void 0)throw new Error("sftLossWeightMultiplier parameter is not supported in Gemini API.");if(a(e,["outputUri"])!==void 0)throw new Error("outputUri parameter is not supported in Gemini API.");if(a(e,["encryptionSpec"])!==void 0)throw new Error("encryptionSpec parameter is not supported in Gemini API.");return o}function sw(e,t,n){const o={};let r=a(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const S=a(e,["validationDataset"]);t!==void 0&&S!=null&&u(t,["supervisedTuningSpec"],mr(S))}else if(r==="PREFERENCE_TUNING"){const S=a(e,["validationDataset"]);t!==void 0&&S!=null&&u(t,["preferenceOptimizationSpec"],mr(S))}else if(r==="DISTILLATION"){const S=a(e,["validationDataset"]);t!==void 0&&S!=null&&u(t,["distillationSpec"],mr(S))}const i=a(e,["tunedModelDisplayName"]);t!==void 0&&i!=null&&u(t,["tunedModelDisplayName"],i);const s=a(e,["description"]);t!==void 0&&s!=null&&u(t,["description"],s);let l=a(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const S=a(e,["epochCount"]);t!==void 0&&S!=null&&u(t,["supervisedTuningSpec","hyperParameters","epochCount"],S)}else if(l==="PREFERENCE_TUNING"){const S=a(e,["epochCount"]);t!==void 0&&S!=null&&u(t,["preferenceOptimizationSpec","hyperParameters","epochCount"],S)}else if(l==="DISTILLATION"){const S=a(e,["epochCount"]);t!==void 0&&S!=null&&u(t,["distillationSpec","hyperParameters","epochCount"],S)}let d=a(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const S=a(e,["learningRateMultiplier"]);t!==void 0&&S!=null&&u(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],S)}else if(d==="PREFERENCE_TUNING"){const S=a(e,["learningRateMultiplier"]);t!==void 0&&S!=null&&u(t,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],S)}else if(d==="DISTILLATION"){const S=a(e,["learningRateMultiplier"]);t!==void 0&&S!=null&&u(t,["distillationSpec","hyperParameters","learningRateMultiplier"],S)}let c=a(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const S=a(e,["exportLastCheckpointOnly"]);t!==void 0&&S!=null&&u(t,["supervisedTuningSpec","exportLastCheckpointOnly"],S)}else if(c==="PREFERENCE_TUNING"){const S=a(e,["exportLastCheckpointOnly"]);t!==void 0&&S!=null&&u(t,["preferenceOptimizationSpec","exportLastCheckpointOnly"],S)}else if(c==="DISTILLATION"){const S=a(e,["exportLastCheckpointOnly"]);t!==void 0&&S!=null&&u(t,["distillationSpec","exportLastCheckpointOnly"],S)}let f=a(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const S=a(e,["adapterSize"]);t!==void 0&&S!=null&&u(t,["supervisedTuningSpec","hyperParameters","adapterSize"],S)}else if(f==="PREFERENCE_TUNING"){const S=a(e,["adapterSize"]);t!==void 0&&S!=null&&u(t,["preferenceOptimizationSpec","hyperParameters","adapterSize"],S)}else if(f==="DISTILLATION"){const S=a(e,["adapterSize"]);t!==void 0&&S!=null&&u(t,["distillationSpec","hyperParameters","adapterSize"],S)}let p=a(n,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const S=a(e,["tuningMode"]);t!==void 0&&S!=null&&u(t,["supervisedTuningSpec","tuningMode"],S)}const h=a(e,["customBaseModel"]);t!==void 0&&h!=null&&u(t,["customBaseModel"],h);let v=a(n,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const S=a(e,["batchSize"]);t!==void 0&&S!=null&&u(t,["supervisedTuningSpec","hyperParameters","batchSize"],S)}let y=a(n,["config","method"]);if(y===void 0&&(y="SUPERVISED_FINE_TUNING"),y==="SUPERVISED_FINE_TUNING"){const S=a(e,["learningRate"]);t!==void 0&&S!=null&&u(t,["supervisedTuningSpec","hyperParameters","learningRate"],S)}const E=a(e,["labels"]);t!==void 0&&E!=null&&u(t,["labels"],E);const T=a(e,["beta"]);t!==void 0&&T!=null&&u(t,["preferenceOptimizationSpec","hyperParameters","beta"],T);const C=a(e,["baseTeacherModel"]);t!==void 0&&C!=null&&u(t,["distillationSpec","baseTeacherModel"],C);const x=a(e,["tunedTeacherModelSource"]);t!==void 0&&x!=null&&u(t,["distillationSpec","tunedTeacherModelSource"],x);const _=a(e,["sftLossWeightMultiplier"]);t!==void 0&&_!=null&&u(t,["distillationSpec","hyperParameters","sftLossWeightMultiplier"],_);const w=a(e,["outputUri"]);t!==void 0&&w!=null&&u(t,["outputUri"],w);const R=a(e,["encryptionSpec"]);return t!==void 0&&R!=null&&u(t,["encryptionSpec"],R),o}function aw(e,t){const n={},o=a(e,["baseModel"]);o!=null&&u(n,["baseModel"],o);const r=a(e,["preTunedModel"]);r!=null&&u(n,["preTunedModel"],r);const i=a(e,["trainingDataset"]);i!=null&&yw(i);const s=a(e,["config"]);return s!=null&&iw(s,n),n}function lw(e,t){const n={},o=a(e,["baseModel"]);o!=null&&u(n,["baseModel"],o);const r=a(e,["preTunedModel"]);r!=null&&u(n,["preTunedModel"],r);const i=a(e,["trainingDataset"]);i!=null&&Ew(i,n,t);const s=a(e,["config"]);return s!=null&&sw(s,n,t),n}function uw(e,t){const n={},o=a(e,["name"]);return o!=null&&u(n,["_url","name"],o),n}function cw(e,t){const n={},o=a(e,["name"]);return o!=null&&u(n,["_url","name"],o),n}function dw(e,t,n){const o={},r=a(e,["pageSize"]);t!==void 0&&r!=null&&u(t,["_query","pageSize"],r);const i=a(e,["pageToken"]);t!==void 0&&i!=null&&u(t,["_query","pageToken"],i);const s=a(e,["filter"]);return t!==void 0&&s!=null&&u(t,["_query","filter"],s),o}function fw(e,t,n){const o={},r=a(e,["pageSize"]);t!==void 0&&r!=null&&u(t,["_query","pageSize"],r);const i=a(e,["pageToken"]);t!==void 0&&i!=null&&u(t,["_query","pageToken"],i);const s=a(e,["filter"]);return t!==void 0&&s!=null&&u(t,["_query","filter"],s),o}function pw(e,t){const n={},o=a(e,["config"]);return o!=null&&dw(o,n),n}function hw(e,t){const n={},o=a(e,["config"]);return o!=null&&fw(o,n),n}function mw(e,t){const n={},o=a(e,["sdkHttpResponse"]);o!=null&&u(n,["sdkHttpResponse"],o);const r=a(e,["nextPageToken"]);r!=null&&u(n,["nextPageToken"],r);const i=a(e,["tunedModels"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>Jc(l))),u(n,["tuningJobs"],s)}return n}function gw(e,t){const n={},o=a(e,["sdkHttpResponse"]);o!=null&&u(n,["sdkHttpResponse"],o);const r=a(e,["nextPageToken"]);r!=null&&u(n,["nextPageToken"],r);const i=a(e,["tuningJobs"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>Hr(l))),u(n,["tuningJobs"],s)}return n}function vw(e,t){const n={},o=a(e,["name"]);o!=null&&u(n,["model"],o);const r=a(e,["name"]);return r!=null&&u(n,["endpoint"],r),n}function yw(e,t){const n={};if(a(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(a(e,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const o=a(e,["examples"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(i=>i)),u(n,["examples","examples"],r)}return n}function Ew(e,t,n){const o={};let r=a(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const s=a(e,["gcsUri"]);t!==void 0&&s!=null&&u(t,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(r==="PREFERENCE_TUNING"){const s=a(e,["gcsUri"]);t!==void 0&&s!=null&&u(t,["preferenceOptimizationSpec","trainingDatasetUri"],s)}else if(r==="DISTILLATION"){const s=a(e,["gcsUri"]);t!==void 0&&s!=null&&u(t,["distillationSpec","promptDatasetUri"],s)}let i=a(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const s=a(e,["vertexDatasetResource"]);t!==void 0&&s!=null&&u(t,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(i==="PREFERENCE_TUNING"){const s=a(e,["vertexDatasetResource"]);t!==void 0&&s!=null&&u(t,["preferenceOptimizationSpec","trainingDatasetUri"],s)}else if(i==="DISTILLATION"){const s=a(e,["vertexDatasetResource"]);t!==void 0&&s!=null&&u(t,["distillationSpec","promptDatasetUri"],s)}if(a(e,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return o}function Jc(e,t){const n={},o=a(e,["sdkHttpResponse"]);o!=null&&u(n,["sdkHttpResponse"],o);const r=a(e,["name"]);r!=null&&u(n,["name"],r);const i=a(e,["state"]);i!=null&&u(n,["state"],lc(i));const s=a(e,["createTime"]);s!=null&&u(n,["createTime"],s);const l=a(e,["tuningTask","startTime"]);l!=null&&u(n,["startTime"],l);const d=a(e,["tuningTask","completeTime"]);d!=null&&u(n,["endTime"],d);const c=a(e,["updateTime"]);c!=null&&u(n,["updateTime"],c);const f=a(e,["description"]);f!=null&&u(n,["description"],f);const p=a(e,["baseModel"]);p!=null&&u(n,["baseModel"],p);const h=a(e,["_self"]);return h!=null&&u(n,["tunedModel"],vw(h)),n}function Hr(e,t){const n={},o=a(e,["sdkHttpResponse"]);o!=null&&u(n,["sdkHttpResponse"],o);const r=a(e,["name"]);r!=null&&u(n,["name"],r);const i=a(e,["state"]);i!=null&&u(n,["state"],lc(i));const s=a(e,["createTime"]);s!=null&&u(n,["createTime"],s);const l=a(e,["startTime"]);l!=null&&u(n,["startTime"],l);const d=a(e,["endTime"]);d!=null&&u(n,["endTime"],d);const c=a(e,["updateTime"]);c!=null&&u(n,["updateTime"],c);const f=a(e,["error"]);f!=null&&u(n,["error"],f);const p=a(e,["description"]);p!=null&&u(n,["description"],p);const h=a(e,["baseModel"]);h!=null&&u(n,["baseModel"],h);const v=a(e,["tunedModel"]);v!=null&&u(n,["tunedModel"],v);const y=a(e,["preTunedModel"]);y!=null&&u(n,["preTunedModel"],y);const E=a(e,["supervisedTuningSpec"]);E!=null&&u(n,["supervisedTuningSpec"],E);const T=a(e,["preferenceOptimizationSpec"]);T!=null&&u(n,["preferenceOptimizationSpec"],T);const C=a(e,["distillationSpec"]);C!=null&&u(n,["distillationSpec"],C);const x=a(e,["tuningDataStats"]);x!=null&&u(n,["tuningDataStats"],x);const _=a(e,["encryptionSpec"]);_!=null&&u(n,["encryptionSpec"],_);const w=a(e,["partnerModelTuningSpec"]);w!=null&&u(n,["partnerModelTuningSpec"],w);const R=a(e,["customBaseModel"]);R!=null&&u(n,["customBaseModel"],R);const S=a(e,["experiment"]);S!=null&&u(n,["experiment"],S);const I=a(e,["labels"]);I!=null&&u(n,["labels"],I);const b=a(e,["outputUri"]);b!=null&&u(n,["outputUri"],b);const A=a(e,["pipelineJob"]);A!=null&&u(n,["pipelineJob"],A);const N=a(e,["serviceAccount"]);N!=null&&u(n,["serviceAccount"],N);const P=a(e,["tunedModelDisplayName"]);P!=null&&u(n,["tunedModelDisplayName"],P);const O=a(e,["veoTuningSpec"]);return O!=null&&u(n,["veoTuningSpec"],O),n}function Tw(e,t){const n={},o=a(e,["sdkHttpResponse"]);o!=null&&u(n,["sdkHttpResponse"],o);const r=a(e,["name"]);r!=null&&u(n,["name"],r);const i=a(e,["metadata"]);i!=null&&u(n,["metadata"],i);const s=a(e,["done"]);s!=null&&u(n,["done"],s);const l=a(e,["error"]);return l!=null&&u(n,["error"],l),n}function mr(e,t){const n={},o=a(e,["gcsUri"]);o!=null&&u(n,["validationDatasetUri"],o);const r=a(e,["vertexDatasetResource"]);return r!=null&&u(n,["validationDatasetUri"],r),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Cw extends Et{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new Ft(yt.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var o;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const r={tunedModelName:n.baseModel};!((o=n.config)===null||o===void 0)&&o.preTunedModelCheckpointId&&(r.checkpointId=n.config.preTunedModelCheckpointId);const i=Object.assign(Object.assign({},n),{preTunedModel:r});return i.baseModel=void 0,await this.tuneInternal(i)}else{const r=Object.assign({},n);return await this.tuneInternal(r)}else{const r=Object.assign({},n),i=await this.tuneMldevInternal(r);let s="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?s=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(s=i.name.split("/operations/")[0]),{name:s,state:Ar.JOB_STATE_QUEUED}}}}async getInternal(t){var n,o,r,i;let s,l="",d={};if(this.apiClient.isVertexAI()){const c=cw(t);return l=L("{name}",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>Hr(f))}else{const c=uw(t);return l=L("{name}",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>Jc(f))}}async listInternal(t){var n,o,r,i;let s,l="",d={};if(this.apiClient.isVertexAI()){const c=hw(t);return l=L("tuningJobs",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=gw(f),h=new wa;return Object.assign(h,p),h})}else{const c=pw(t);return l=L("tunedModels",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=mw(f),h=new wa;return Object.assign(h,p),h})}}async cancel(t){var n,o,r,i;let s,l="",d={};if(this.apiClient.isVertexAI()){const c=nw(t);return l=L("{name}:cancel",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=rw(f),h=new _a;return Object.assign(h,p),h})}else{const c=tw(t);return l=L("{name}:cancel",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=ow(f),h=new _a;return Object.assign(h,p),h})}}async tuneInternal(t){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI()){const l=lw(t,t);return i=L("tuningJobs",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:d.headers},f})),r.then(d=>Hr(d))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(t){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=aw(t);return i=L("tunedModels",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:d.headers},f})),r.then(d=>Tw(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Sw{async download(t,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const ww=1024*1024*8,_w=3,xw=1e3,Iw=2,bo="x-goog-upload-status";async function Rw(e,t,n){var o;const r=await Wc(e,t,n),i=await(r==null?void 0:r.json());if(((o=r==null?void 0:r.headers)===null||o===void 0?void 0:o[bo])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return i.file}async function Aw(e,t,n){var o;const r=await Wc(e,t,n),i=await(r==null?void 0:r.json());if(((o=r==null?void 0:r.headers)===null||o===void 0?void 0:o[bo])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const s=nc(i),l=new wi;return Object.assign(l,s),l}async function Wc(e,t,n){var o,r;let i=0,s=0,l=new Nr(new Response),d="upload";for(i=e.size;s<i;){const c=Math.min(ww,i-s),f=e.slice(s,s+c);s+c>=i&&(d+=", finalize");let p=0,h=xw;for(;p<_w&&(l=await n.request({path:"",body:f,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":d,"X-Goog-Upload-Offset":String(s),"Content-Length":String(c)}}}),!(!((o=l==null?void 0:l.headers)===null||o===void 0)&&o[bo]));)p++,await Nw(h),h=h*Iw;if(s+=c,((r=l==null?void 0:l.headers)===null||r===void 0?void 0:r[bo])!=="active")break;if(i<=s)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return l}async function bw(e){return{size:e.size,type:e.type}}function Nw(e){return new Promise(t=>setTimeout(t,e))}class Mw{async upload(t,n,o){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await Rw(t,n,o)}async uploadToFileSearchStore(t,n,o){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await Aw(t,n,o)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await bw(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Pw{create(t,n,o){return new Dw(t,n,o)}}class Dw{constructor(t,n,o){this.url=t,this.headers=n,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Qa="x-goog-api-key";class kw{constructor(t){this.apiKey=t}async addAuthHeaders(t,n){if(t.get(Qa)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");t.append(Qa,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Lw="gl-node/";class Uw{get interactions(){var t;if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const n=this.httpOptions;n!=null&&n.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const o=new ke({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:n==null?void 0:n.timeout,maxRetries:(t=n==null?void 0:n.retryOptions)===null||t===void 0?void 0:t.attempts});return this._interactions=o.interactions,this._interactions}constructor(t){var n;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=t.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=t.apiKey;const o=_v(t.httpOptions,t.vertexai,void 0,void 0);o&&(t.httpOptions?t.httpOptions.baseUrl=o:t.httpOptions={baseUrl:o}),this.apiVersion=t.apiVersion,this.httpOptions=t.httpOptions;const r=new kw(this.apiKey);this.apiClient=new bC({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:Lw+"web",uploader:new Mw,downloader:new Sw}),this.models=new YC(this.apiClient),this.live=new $C(this.apiClient,r,new Pw),this.batches=new e0(this.apiClient),this.chats=new L0(this.models,this.apiClient),this.caches=new P0(this.apiClient),this.files=new W0(this.apiClient),this.operations=new KC(this.apiClient),this.authTokens=new dS(this.apiClient),this.tunings=new Cw(this.apiClient),this.fileSearchStores=new ES(this.apiClient)}}const Fw="AIzaSyBuA_aT3NJc7vlpXPUg4o1Bye1mNqk2Mgk",Vw="gemini-1.5-flash";function Gw(){return new Uw({apiKey:Fw})}const Ow=_n.join(", "),Hw=`${Se.LOW}, ${Se.MEDIUM}, ${Se.HIGH}`,$w=`You are a task extraction assistant. Extract tasks from the user's natural language input.
Return a JSON object with a "tasks" array. Each task has:
- title: string (short, clear task name)
- priority: one of ${Hw} (default: medium)
- time: number (duration in minutes, 0 if not specified)
- category: one of ${Ow} or null if unclear

Handle Ukrainian and English. Examples:
"   18:00" -> priority medium, time 0, category null
":   , 1 , '" -> priority high, time 60, category career
" 45  '" -> priority medium, time 45, category health

Return ONLY valid JSON, no markdown or extra text.`;async function Bw(e){if(!e.trim())return[];const o=(await Gw().models.generateContent({model:Vw,contents:`${$w}

User input:
${e}`,config:{temperature:.2,maxOutputTokens:2048,responseMimeType:"application/json"}})).text;if(!o)throw new Error("Empty response from Gemini");let r;try{r=JSON.parse(o)}catch{throw new Error("Invalid JSON from AI")}return Array.isArray(r.tasks)?r.tasks.filter(i=>i&&typeof i.title=="string").map(i=>({title:String(i.title).trim(),priority:qw(i.priority),time:Math.max(0,Number(i.time)||0),category:zw(i.category)})).filter(i=>i.title.length>0):[]}function qw(e){return e===Se.LOW||e===Se.MEDIUM||e===Se.HIGH?e:Se.MEDIUM}function zw(e){return typeof e=="string"&&_n.includes(e)?e:null}function Jw({isOpen:e,onClose:t,onAddTasks:n,containerId:o}){const[r,i]=g.useState(""),[s,l]=g.useState(!1),[d,c]=g.useState(null),{t:f}=Ye(),p=async()=>{if(r.trim()){l(!0),c(null);try{const E=await Bw(r.trim());if(E.length===0){rr.info(f("ai.no_tasks_found"));return}c(E)}catch(E){console.error("AI parse error:",E),rr.error(f("ai.parse_error"))}finally{l(!1)}}},h=()=>{if(!d||d.length===0)return;const E=d.map(T=>ku(T.title,T.priority,T.time*60,!1,0,[],!1));n(E,o),rr.success(f("ai.tasks_added",{count:E.length})),v(),t()},v=()=>{i(""),c(null)},y=()=>{v(),t()};return m.jsx(vi,{isOpen:e,setOpen:E=>!E&&y(),className:"p-4 md:p-6",children:m.jsxs("div",{className:"flex flex-col gap-4",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(so,{className:"w-5 h-5 text-indigo-400"}),m.jsx("h3",{className:"text-xl font-semibold",children:f("ai.dialog_title")})]}),m.jsx("p",{className:"text-sm text-zinc-400",children:f("ai.dialog_description")}),m.jsx("textarea",{value:r,onChange:E=>i(E.target.value),placeholder:f("ai.placeholder"),className:"min-h-[120px] w-full rounded-lg bg-zinc-900/50 border border-zinc-800 px-4 py-3 text-sm text-white placeholder:text-zinc-500 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 resize-none",disabled:s}),s&&m.jsxs("div",{className:"flex items-center gap-2 text-sm text-zinc-400",children:[m.jsx(Gi,{className:"w-4 h-4 animate-spin"}),f("ai.parsing")]}),d&&d.length>0&&m.jsxs("div",{className:"rounded-lg border border-white/10 bg-white/5 p-3 space-y-2",children:[m.jsxs("p",{className:"text-xs text-zinc-500 font-medium",children:[f("ai.preview_title")," (",d.length,")"]}),m.jsx("ul",{className:"space-y-1 text-sm",children:d.map((E,T)=>m.jsxs("li",{className:"flex justify-between items-center",children:[m.jsx("span",{className:"text-white truncate max-w-[70%]",children:E.title}),m.jsxs("span",{className:"text-zinc-500 text-xs",children:[E.time>0?`${E.time} `:"","  ",E.priority]})]},T))})]}),m.jsxs("div",{className:"flex gap-2 justify-end",children:[m.jsx(ve,{variant:"ghost",onClick:y,children:f("common.cancel")}),d?m.jsxs(ve,{onClick:h,className:"chrono-dialog-submit",children:[f("ai.add_tasks")," (",d.length,")"]}):m.jsxs(ve,{onClick:p,disabled:!r.trim()||s,className:"chrono-dialog-submit",children:[s?m.jsx(Gi,{className:"w-4 h-4 animate-spin"}):m.jsx(so,{className:"w-4 h-4 mr-1"}),f("ai.parse")]})]})]})})}function EI({adjustScale:e=!1,cancelDrop:t,columns:n,handle:o=!1,items:r,containerStyle:i,coordinateGetter:s=Xh,getItemStyles:l=()=>({}),wrapperStyle:d=()=>({}),minimal:c=!1,modifiers:f,renderItem:p,strategy:h=es,trashable:v=!1,vertical:y=!1,templated:E=!0,scrollable:T,onChangeTasks:C=()=>{},onEditPlannedTask:x,onDeletePlannedTask:_}){const[w]=Ye(),[R,S]=g.useState(r),I=Qr(H=>H.size),[b,A]=g.useState(R.map(H=>H.id)),N=Qe(H=>H.playingTask);g.useEffect(()=>{S(r)},[r]);const[P,O]=g.useState(null),[k,G]=g.useState(null),[ee,te]=g.useState(!1),[z,oe]=g.useState(null),U=g.useRef(null),ae=g.useRef(!1),Ee=z?b.includes(z):!1,M=Qe(H=>H.updatedTask),[V,$]=g.useState(!1),[F,B]=g.useState(null),[Q,ie]=g.useState(!1),[j,Z]=g.useState(null),Ve=g.useRef(null),Ge=ag({activeId:z,items:R,lastOverId:U,recentlyMovedToNewContainer:ae}),{onDragOver:ot,onDragEnd:q,onDragCancel:rt,onDragStart:it}=dg({items:R,setItems:S,recentlyMovedToNewContainer:ae,setActiveId:oe,onDeletePlannedTask:_,onChangeTasks:C}),{handleAddColumn:Ct,handleRemove:Ht}=cv({items:R,setItems:S,setContainers:A,onDeletePlannedTask:_,onChangeTasks:C}),St=g.useCallback((H,Y)=>{S(le=>{const ue=le.map(de=>({...de,tasks:de.tasks.map(_e=>_e.id===H?{..._e,timeDone:Y}:_e)}));return C(ue),ue})},[C]);g.useEffect(()=>{M&&M.id!==Ve.current&&(St(M.id,M.timeDone),Ve.current=M.id)},[M,St]);const Le=wp(sr(Dl),sr(kl),sr(ii,{coordinateGetter:s})),ft=g.useCallback((H,Y)=>{S(le=>{const ue=le.map(de=>({...de,tasks:de.tasks.map(_e=>{if(_e.id===H){const ze={..._e,isDone:Y};return(ze.isPlanned||ze.isDetermined)&&(x==null||x(ze)),ze}else return _e})}));return C(ue),ue})},[C,x]),wt=g.useCallback((H,Y)=>{S&&S(le=>{const ue=le.map(de=>de.id===Y?{...de,tasks:[...de.tasks,H]}:de);return C(ue),ue})},[C]),pt=g.useCallback((H,Y)=>{!S||H.length===0||S(le=>{const ue=le.map(de=>de.id===Y?{...de,tasks:[...de.tasks,...H]}:de);return C(ue),ue})},[C]),$t=g.useCallback((H,Y)=>{x&&H.isPlanned&&x(H),S(le=>{const ue=le.map(de=>de.id===Y?{...de,tasks:de.tasks.map(_e=>_e.id===H.id?{...H}:_e)}:de);return C(ue),ue})},[x,C]),Bt=g.useCallback((H,Y)=>{S(le=>{const ue=le.map(de=>de.id===Y?{...de,title:H}:de);return C(ue),ue}),A(le=>le.map(ue=>Y===Y?Y:ue))},[C]);return g.useEffect(()=>{requestAnimationFrame(()=>{ae.current=!1})},[R]),m.jsxs(m.Fragment,{children:[j&&m.jsx(Jw,{isOpen:Q,onClose:()=>{ie(!1),Z(null)},onAddTasks:pt,containerId:j}),m.jsx(dv,{isOpen:V,setIsOpen:$,title:w("task_manager.dialog_category.delete.title"),description:w("task_manager.dialog_category.delete.description"),buttonYesTitle:w("task_manager.dialog_category.delete.yes"),buttonNoTitle:w("task_manager.dialog_category.delete.no"),onAgree:H=>{$(!1),H&&F&&Ht(F)}}),m.jsx(lv,{isOpen:ee,containerId:P,task:k,templated:E,onChangeTask:(H,Y,le)=>{if(!Y){console.error("Container ID is required for task operations.");return}le?$t(H,Y):Y&&wt(H,Y),te(!1),O(null),G(null)},setOpen:H=>{O(null),G(null),te(H)}},(k==null?void 0:k.id)??"new-task"),m.jsx(hl,{children:!E&&N&&m.jsx(xn.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"60px"},exit:{opacity:0,height:0},transition:{duration:.3},style:{top:I},className:"sticky flex h-[60px] justify-center items-center z-30 bg-background/50 backdrop-blur-xs",children:m.jsx(uv,{})})}),m.jsxs(Eh,{sensors:Le,collisionDetection:Ge,measuring:{droppable:{strategy:jt.Always}},onDragStart:({active:H})=>{it(H)},onDragOver:({active:H,over:Y})=>ot(H,Y),onDragEnd:({active:H,over:Y})=>q(H,Y),cancelDrop:t,onDragCancel:rt,modifiers:f,children:[m.jsx("div",{className:`${E&&"mt-5"}`,children:m.jsxs(ts,{items:[...b,us],strategy:y?es:Oh,children:[R.map(H=>m.jsx(ls,{id:H.id,templated:E,label:c?void 0:H.title,columns:n,items:H.tasks,scrollable:T,style:i,options:_n,onAddTask:Y=>{O(Y),te(!0)},onAddTaskWithAI:Y=>{Z(Y),ie(!0)},onChangeCategory:Y=>Bt(Y,H.id),...c?{unstyled:!0}:{},onRemove:()=>{$(!0),B(H.id)},children:m.jsx(ts,{items:H.tasks.map(Y=>Y.id),strategy:h,children:H.tasks.length===0?m.jsx("li",{className:`rounded-lg border border-dashed border-white/5 flex items-center justify-center text-zinc-600 text-xs transition-all duration-200 bg-white/[0.02]
    ${H.tasks.length>0?"invisible absolute":""}
  `,style:{minHeight:"56px",height:"56px"},children:w("task_manager.drag_task_here")}):H.tasks.length>10?m.jsx("ul",{children:H.tasks.map((Y,le)=>m.jsx(ps,{disabled:Ee,id:Y.id,templated:E,index:le,handle:o,items:R,style:l,wrapperStyle:d,renderItem:p,containerId:H.id,getIndex:Eo,task:Y,onToggle:ft,onEditTask:ue=>{G(null),setTimeout(()=>{G(ue),O(H.id),te(!0)},0)}},Y.id))}):m.jsx(ff,{children:H.tasks.map((Y,le)=>m.jsx(ps,{disabled:Ee,id:Y.id,templated:E,index:le,handle:o,items:R,style:l,wrapperStyle:d,renderItem:p,containerId:H.id,getIndex:Eo,task:Y,onToggle:ft,onEditTask:ue=>{G(null),setTimeout(()=>{G(ue),O(H.id),te(!0)},0)}},Y.id))})})},H.id)),!c&&m.jsx(ls,{id:us,templated:E,options:_n,disabled:Ee,items:[],onClick:Ct,placeholder:!0,children:m.jsx("div",{className:"flex justify-center items-center",children:m.jsx(Nt,{className:"w-full",children:m.jsx(we,{animValue:1.09,hoverTypeElement:Ne.LINK,hoverStyleElement:Me.quad,className:"w-full",children:m.jsx(ve,{className:"w-full uppercase hover:bg-transparent hover:text-primary",variant:"ghost",children:w("task_manager.add_container")})})})})})]})}),kt.createPortal(m.jsx(Uh,{adjustScale:e,dropAnimation:cg,children:z?b.includes(z)?m.jsx(wg,{items:R,getItemStyles:l,handle:o,renderItem:p,columns:n,containerId:z,templated:E,options:_n}):m.jsx(_g,{items:R,templated:E,getItemStyles:l,handle:o,renderItem:p,id:z}):null}),document.body),v&&z&&!b.includes(z)?m.jsx(Sg,{id:yo}):null]})]})}const TI=()=>{const e=Qr(t=>t.size);return m.jsx("div",{className:"fixed w-full left-0 z-20 bottom-0 flex items-center justify-center bg-background/10 backdrop-blur-xs caret-transparent",style:{minHeight:`calc(100vh - ${e}px)`},children:m.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-foreground"})})},Ww=()=>Kd((e,t)=>({playingTask:null,startedAt:null,updatedTask:null,setPlayingTask:n=>{const o=Date.now(),r=t().playingTask,i=t().startedAt;if(r&&i){const s=Math.floor((o-i)/1e3);e({playingTask:n,startedAt:o}),r.id!==(n==null?void 0:n.id)&&t().updateTaskTime(r.id,r.timeDone+s)}else e({playingTask:n,startedAt:o})},stopPlayingTask:()=>{const n=Date.now(),o=t().playingTask,r=t().startedAt;if(o&&r){const i=Math.floor((n-r)/1e3);t().updateTaskTime(o.id,o.timeDone+i)}e({playingTask:null,startedAt:null})},updateTaskTime:(n,o)=>{e({updatedTask:{id:n,timeDone:o}})}})),CI=({children:e})=>{const t=g.useMemo(()=>Ww(),[]);return m.jsx(Nu.Provider,{value:t,children:e})};var gr="rovingFocusGroup.onEntryFocus",Yw={bubbles:!1,cancelable:!0},Un="RovingFocusGroup",[$r,Yc,Kw]=fl(Un),[Xw,Kc]=tn(Un,[Kw]),[Qw,Zw]=Xw(Un),Xc=g.forwardRef((e,t)=>m.jsx($r.Provider,{scope:e.__scopeRovingFocusGroup,children:m.jsx($r.Slot,{scope:e.__scopeRovingFocusGroup,children:m.jsx(jw,{...e,ref:t})})}));Xc.displayName=Un;var jw=g.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:o,loop:r=!1,dir:i,currentTabStopId:s,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:d,onEntryFocus:c,preventScrollOnEntryFocus:f=!1,...p}=e,h=g.useRef(null),v=Ue(t,h),y=Xr(i),[E,T]=Po({prop:s,defaultProp:l??null,onChange:d,caller:Un}),[C,x]=g.useState(!1),_=ht(c),w=Yc(n),R=g.useRef(!1),[S,I]=g.useState(0);return g.useEffect(()=>{const b=h.current;if(b)return b.addEventListener(gr,_),()=>b.removeEventListener(gr,_)},[_]),m.jsx(Qw,{scope:n,orientation:o,dir:y,loop:r,currentTabStopId:E,onItemFocus:g.useCallback(b=>T(b),[T]),onItemShiftTab:g.useCallback(()=>x(!0),[]),onFocusableItemAdd:g.useCallback(()=>I(b=>b+1),[]),onFocusableItemRemove:g.useCallback(()=>I(b=>b-1),[]),children:m.jsx(fe.div,{tabIndex:C||S===0?-1:0,"data-orientation":o,...p,ref:v,style:{outline:"none",...e.style},onMouseDown:X(e.onMouseDown,()=>{R.current=!0}),onFocus:X(e.onFocus,b=>{const A=!R.current;if(b.target===b.currentTarget&&A&&!C){const N=new CustomEvent(gr,Yw);if(b.currentTarget.dispatchEvent(N),!N.defaultPrevented){const P=w().filter(te=>te.focusable),O=P.find(te=>te.active),k=P.find(te=>te.id===E),ee=[O,k,...P].filter(Boolean).map(te=>te.ref.current);jc(ee,f)}}R.current=!1}),onBlur:X(e.onBlur,()=>x(!1))})})}),Qc="RovingFocusGroupItem",Zc=g.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:o=!0,active:r=!1,tabStopId:i,children:s,...l}=e,d=Xe(),c=i||d,f=Zw(Qc,n),p=f.currentTabStopId===c,h=Yc(n),{onFocusableItemAdd:v,onFocusableItemRemove:y,currentTabStopId:E}=f;return g.useEffect(()=>{if(o)return v(),()=>y()},[o,v,y]),m.jsx($r.ItemSlot,{scope:n,id:c,focusable:o,active:r,children:m.jsx(fe.span,{tabIndex:p?0:-1,"data-orientation":f.orientation,...l,ref:t,onMouseDown:X(e.onMouseDown,T=>{o?f.onItemFocus(c):T.preventDefault()}),onFocus:X(e.onFocus,()=>f.onItemFocus(c)),onKeyDown:X(e.onKeyDown,T=>{if(T.key==="Tab"&&T.shiftKey){f.onItemShiftTab();return}if(T.target!==T.currentTarget)return;const C=n_(T,f.orientation,f.dir);if(C!==void 0){if(T.metaKey||T.ctrlKey||T.altKey||T.shiftKey)return;T.preventDefault();let _=h().filter(w=>w.focusable).map(w=>w.ref.current);if(C==="last")_.reverse();else if(C==="prev"||C==="next"){C==="prev"&&_.reverse();const w=_.indexOf(T.currentTarget);_=f.loop?o_(_,w+1):_.slice(w+1)}setTimeout(()=>jc(_))}}),children:typeof s=="function"?s({isCurrentTabStop:p,hasTabStop:E!=null}):s})})});Zc.displayName=Qc;var e_={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function t_(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function n_(e,t,n){const o=t_(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(o))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(o)))return e_[o]}function jc(e,t=!1){const n=document.activeElement;for(const o of e)if(o===n||(o.focus({preventScroll:t}),document.activeElement!==n))return}function o_(e,t){return e.map((n,o)=>e[(t+o)%e.length])}var r_=Xc,i_=Zc,Br=["Enter"," "],s_=["ArrowDown","PageUp","Home"],ed=["ArrowUp","PageDown","End"],a_=[...s_,...ed],l_={ltr:[...Br,"ArrowRight"],rtl:[...Br,"ArrowLeft"]},u_={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Fn="Menu",[bn,c_,d_]=fl(Fn),[Vt,td]=tn(Fn,[d_,pl,Kc]),Zo=pl(),nd=Kc(),[f_,Gt]=Vt(Fn),[p_,Vn]=Vt(Fn),od=e=>{const{__scopeMenu:t,open:n=!1,children:o,dir:r,onOpenChange:i,modal:s=!0}=e,l=Zo(t),[d,c]=g.useState(null),f=g.useRef(!1),p=ht(i),h=Xr(r);return g.useEffect(()=>{const v=()=>{f.current=!0,document.addEventListener("pointerdown",y,{capture:!0,once:!0}),document.addEventListener("pointermove",y,{capture:!0,once:!0})},y=()=>f.current=!1;return document.addEventListener("keydown",v,{capture:!0}),()=>{document.removeEventListener("keydown",v,{capture:!0}),document.removeEventListener("pointerdown",y,{capture:!0}),document.removeEventListener("pointermove",y,{capture:!0})}},[]),m.jsx(pf,{...l,children:m.jsx(f_,{scope:t,open:n,onOpenChange:p,content:d,onContentChange:c,children:m.jsx(p_,{scope:t,onClose:g.useCallback(()=>p(!1),[p]),isUsingKeyboardRef:f,dir:h,modal:s,children:o})})})};od.displayName=Fn;var h_="MenuAnchor",Mi=g.forwardRef((e,t)=>{const{__scopeMenu:n,...o}=e,r=Zo(n);return m.jsx(hf,{...r,...o,ref:t})});Mi.displayName=h_;var Pi="MenuPortal",[m_,rd]=Vt(Pi,{forceMount:void 0}),id=e=>{const{__scopeMenu:t,forceMount:n,children:o,container:r}=e,i=Gt(Pi,t);return m.jsx(m_,{scope:t,forceMount:n,children:m.jsx(tt,{present:n||i.open,children:m.jsx(rl,{asChild:!0,container:r,children:o})})})};id.displayName=Pi;var je="MenuContent",[g_,Di]=Vt(je),sd=g.forwardRef((e,t)=>{const n=rd(je,e.__scopeMenu),{forceMount:o=n.forceMount,...r}=e,i=Gt(je,e.__scopeMenu),s=Vn(je,e.__scopeMenu);return m.jsx(bn.Provider,{scope:e.__scopeMenu,children:m.jsx(tt,{present:o||i.open,children:m.jsx(bn.Slot,{scope:e.__scopeMenu,children:s.modal?m.jsx(v_,{...r,ref:t}):m.jsx(y_,{...r,ref:t})})})})}),v_=g.forwardRef((e,t)=>{const n=Gt(je,e.__scopeMenu),o=g.useRef(null),r=Ue(t,o);return g.useEffect(()=>{const i=o.current;if(i)return il(i)},[]),m.jsx(ki,{...e,ref:r,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:X(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),y_=g.forwardRef((e,t)=>{const n=Gt(je,e.__scopeMenu);return m.jsx(ki,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),E_=cl("MenuContent.ScrollLock"),ki=g.forwardRef((e,t)=>{const{__scopeMenu:n,loop:o=!1,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,disableOutsidePointerEvents:l,onEntryFocus:d,onEscapeKeyDown:c,onPointerDownOutside:f,onFocusOutside:p,onInteractOutside:h,onDismiss:v,disableOutsideScroll:y,...E}=e,T=Gt(je,n),C=Vn(je,n),x=Zo(n),_=nd(n),w=c_(n),[R,S]=g.useState(null),I=g.useRef(null),b=Ue(t,I,T.onContentChange),A=g.useRef(0),N=g.useRef(""),P=g.useRef(0),O=g.useRef(null),k=g.useRef("right"),G=g.useRef(0),ee=y?sl:g.Fragment,te=y?{as:E_,allowPinchZoom:!0}:void 0,z=U=>{var Q,ie;const ae=N.current+U,Ee=w().filter(j=>!j.disabled),M=document.activeElement,V=(Q=Ee.find(j=>j.ref.current===M))==null?void 0:Q.textValue,$=Ee.map(j=>j.textValue),F=M_($,ae,V),B=(ie=Ee.find(j=>j.textValue===F))==null?void 0:ie.ref.current;(function j(Z){N.current=Z,window.clearTimeout(A.current),Z!==""&&(A.current=window.setTimeout(()=>j(""),1e3))})(ae),B&&setTimeout(()=>B.focus())};g.useEffect(()=>()=>window.clearTimeout(A.current),[]),al();const oe=g.useCallback(U=>{var Ee,M;return k.current===((Ee=O.current)==null?void 0:Ee.side)&&D_(U,(M=O.current)==null?void 0:M.area)},[]);return m.jsx(g_,{scope:n,searchRef:N,onItemEnter:g.useCallback(U=>{oe(U)&&U.preventDefault()},[oe]),onItemLeave:g.useCallback(U=>{var ae;oe(U)||((ae=I.current)==null||ae.focus(),S(null))},[oe]),onTriggerLeave:g.useCallback(U=>{oe(U)&&U.preventDefault()},[oe]),pointerGraceTimerRef:P,onPointerGraceIntentChange:g.useCallback(U=>{O.current=U},[]),children:m.jsx(ee,{...te,children:m.jsx(ll,{asChild:!0,trapped:r,onMountAutoFocus:X(i,U=>{var ae;U.preventDefault(),(ae=I.current)==null||ae.focus({preventScroll:!0})}),onUnmountAutoFocus:s,children:m.jsx(ul,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:c,onPointerDownOutside:f,onFocusOutside:p,onInteractOutside:h,onDismiss:v,children:m.jsx(r_,{asChild:!0,..._,dir:C.dir,orientation:"vertical",loop:o,currentTabStopId:R,onCurrentTabStopIdChange:S,onEntryFocus:X(d,U=>{C.isUsingKeyboardRef.current||U.preventDefault()}),preventScrollOnEntryFocus:!0,children:m.jsx(mf,{role:"menu","aria-orientation":"vertical","data-state":Sd(T.open),"data-radix-menu-content":"",dir:C.dir,...x,...E,ref:b,style:{outline:"none",...E.style},onKeyDown:X(E.onKeyDown,U=>{const Ee=U.target.closest("[data-radix-menu-content]")===U.currentTarget,M=U.ctrlKey||U.altKey||U.metaKey,V=U.key.length===1;Ee&&(U.key==="Tab"&&U.preventDefault(),!M&&V&&z(U.key));const $=I.current;if(U.target!==$||!a_.includes(U.key))return;U.preventDefault();const B=w().filter(Q=>!Q.disabled).map(Q=>Q.ref.current);ed.includes(U.key)&&B.reverse(),b_(B)}),onBlur:X(e.onBlur,U=>{U.currentTarget.contains(U.target)||(window.clearTimeout(A.current),N.current="")}),onPointerMove:X(e.onPointerMove,Nn(U=>{const ae=U.target,Ee=G.current!==U.clientX;if(U.currentTarget.contains(ae)&&Ee){const M=U.clientX>G.current?"right":"left";k.current=M,G.current=U.clientX}}))})})})})})})});sd.displayName=je;var T_="MenuGroup",Li=g.forwardRef((e,t)=>{const{__scopeMenu:n,...o}=e;return m.jsx(fe.div,{role:"group",...o,ref:t})});Li.displayName=T_;var C_="MenuLabel",ad=g.forwardRef((e,t)=>{const{__scopeMenu:n,...o}=e;return m.jsx(fe.div,{...o,ref:t})});ad.displayName=C_;var No="MenuItem",Za="menu.itemSelect",jo=g.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:o,...r}=e,i=g.useRef(null),s=Vn(No,e.__scopeMenu),l=Di(No,e.__scopeMenu),d=Ue(t,i),c=g.useRef(!1),f=()=>{const p=i.current;if(!n&&p){const h=new CustomEvent(Za,{bubbles:!0,cancelable:!0});p.addEventListener(Za,v=>o==null?void 0:o(v),{once:!0}),gf(p,h),h.defaultPrevented?c.current=!1:s.onClose()}};return m.jsx(ld,{...r,ref:d,disabled:n,onClick:X(e.onClick,f),onPointerDown:p=>{var h;(h=e.onPointerDown)==null||h.call(e,p),c.current=!0},onPointerUp:X(e.onPointerUp,p=>{var h;c.current||(h=p.currentTarget)==null||h.click()}),onKeyDown:X(e.onKeyDown,p=>{const h=l.searchRef.current!=="";n||h&&p.key===" "||Br.includes(p.key)&&(p.currentTarget.click(),p.preventDefault())})})});jo.displayName=No;var ld=g.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:o=!1,textValue:r,...i}=e,s=Di(No,n),l=nd(n),d=g.useRef(null),c=Ue(t,d),[f,p]=g.useState(!1),[h,v]=g.useState("");return g.useEffect(()=>{const y=d.current;y&&v((y.textContent??"").trim())},[i.children]),m.jsx(bn.ItemSlot,{scope:n,disabled:o,textValue:r??h,children:m.jsx(i_,{asChild:!0,...l,focusable:!o,children:m.jsx(fe.div,{role:"menuitem","data-highlighted":f?"":void 0,"aria-disabled":o||void 0,"data-disabled":o?"":void 0,...i,ref:c,onPointerMove:X(e.onPointerMove,Nn(y=>{o?s.onItemLeave(y):(s.onItemEnter(y),y.defaultPrevented||y.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:X(e.onPointerLeave,Nn(y=>s.onItemLeave(y))),onFocus:X(e.onFocus,()=>p(!0)),onBlur:X(e.onBlur,()=>p(!1))})})})}),S_="MenuCheckboxItem",ud=g.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:o,...r}=e;return m.jsx(hd,{scope:e.__scopeMenu,checked:n,children:m.jsx(jo,{role:"menuitemcheckbox","aria-checked":Mo(n)?"mixed":n,...r,ref:t,"data-state":Fi(n),onSelect:X(r.onSelect,()=>o==null?void 0:o(Mo(n)?!0:!n),{checkForDefaultPrevented:!1})})})});ud.displayName=S_;var cd="MenuRadioGroup",[w_,__]=Vt(cd,{value:void 0,onValueChange:()=>{}}),dd=g.forwardRef((e,t)=>{const{value:n,onValueChange:o,...r}=e,i=ht(o);return m.jsx(w_,{scope:e.__scopeMenu,value:n,onValueChange:i,children:m.jsx(Li,{...r,ref:t})})});dd.displayName=cd;var fd="MenuRadioItem",pd=g.forwardRef((e,t)=>{const{value:n,...o}=e,r=__(fd,e.__scopeMenu),i=n===r.value;return m.jsx(hd,{scope:e.__scopeMenu,checked:i,children:m.jsx(jo,{role:"menuitemradio","aria-checked":i,...o,ref:t,"data-state":Fi(i),onSelect:X(o.onSelect,()=>{var s;return(s=r.onValueChange)==null?void 0:s.call(r,n)},{checkForDefaultPrevented:!1})})})});pd.displayName=fd;var Ui="MenuItemIndicator",[hd,x_]=Vt(Ui,{checked:!1}),md=g.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:o,...r}=e,i=x_(Ui,n);return m.jsx(tt,{present:o||Mo(i.checked)||i.checked===!0,children:m.jsx(fe.span,{...r,ref:t,"data-state":Fi(i.checked)})})});md.displayName=Ui;var I_="MenuSeparator",gd=g.forwardRef((e,t)=>{const{__scopeMenu:n,...o}=e;return m.jsx(fe.div,{role:"separator","aria-orientation":"horizontal",...o,ref:t})});gd.displayName=I_;var R_="MenuArrow",vd=g.forwardRef((e,t)=>{const{__scopeMenu:n,...o}=e,r=Zo(n);return m.jsx(vf,{...r,...o,ref:t})});vd.displayName=R_;var A_="MenuSub",[SI,yd]=Vt(A_),En="MenuSubTrigger",Ed=g.forwardRef((e,t)=>{const n=Gt(En,e.__scopeMenu),o=Vn(En,e.__scopeMenu),r=yd(En,e.__scopeMenu),i=Di(En,e.__scopeMenu),s=g.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:d}=i,c={__scopeMenu:e.__scopeMenu},f=g.useCallback(()=>{s.current&&window.clearTimeout(s.current),s.current=null},[]);return g.useEffect(()=>f,[f]),g.useEffect(()=>{const p=l.current;return()=>{window.clearTimeout(p),d(null)}},[l,d]),m.jsx(Mi,{asChild:!0,...c,children:m.jsx(ld,{id:r.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":r.contentId,"data-state":Sd(n.open),...e,ref:vt(t,r.onTriggerChange),onClick:p=>{var h;(h=e.onClick)==null||h.call(e,p),!(e.disabled||p.defaultPrevented)&&(p.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:X(e.onPointerMove,Nn(p=>{i.onItemEnter(p),!p.defaultPrevented&&!e.disabled&&!n.open&&!s.current&&(i.onPointerGraceIntentChange(null),s.current=window.setTimeout(()=>{n.onOpenChange(!0),f()},100))})),onPointerLeave:X(e.onPointerLeave,Nn(p=>{var v,y;f();const h=(v=n.content)==null?void 0:v.getBoundingClientRect();if(h){const E=(y=n.content)==null?void 0:y.dataset.side,T=E==="right",C=T?-5:5,x=h[T?"left":"right"],_=h[T?"right":"left"];i.onPointerGraceIntentChange({area:[{x:p.clientX+C,y:p.clientY},{x,y:h.top},{x:_,y:h.top},{x:_,y:h.bottom},{x,y:h.bottom}],side:E}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(p),p.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:X(e.onKeyDown,p=>{var v;const h=i.searchRef.current!=="";e.disabled||h&&p.key===" "||l_[o.dir].includes(p.key)&&(n.onOpenChange(!0),(v=n.content)==null||v.focus(),p.preventDefault())})})})});Ed.displayName=En;var Td="MenuSubContent",Cd=g.forwardRef((e,t)=>{const n=rd(je,e.__scopeMenu),{forceMount:o=n.forceMount,...r}=e,i=Gt(je,e.__scopeMenu),s=Vn(je,e.__scopeMenu),l=yd(Td,e.__scopeMenu),d=g.useRef(null),c=Ue(t,d);return m.jsx(bn.Provider,{scope:e.__scopeMenu,children:m.jsx(tt,{present:o||i.open,children:m.jsx(bn.Slot,{scope:e.__scopeMenu,children:m.jsx(ki,{id:l.contentId,"aria-labelledby":l.triggerId,...r,ref:c,align:"start",side:s.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:f=>{var p;s.isUsingKeyboardRef.current&&((p=d.current)==null||p.focus()),f.preventDefault()},onCloseAutoFocus:f=>f.preventDefault(),onFocusOutside:X(e.onFocusOutside,f=>{f.target!==l.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:X(e.onEscapeKeyDown,f=>{s.onClose(),f.preventDefault()}),onKeyDown:X(e.onKeyDown,f=>{var v;const p=f.currentTarget.contains(f.target),h=u_[s.dir].includes(f.key);p&&h&&(i.onOpenChange(!1),(v=l.trigger)==null||v.focus(),f.preventDefault())})})})})})});Cd.displayName=Td;function Sd(e){return e?"open":"closed"}function Mo(e){return e==="indeterminate"}function Fi(e){return Mo(e)?"indeterminate":e?"checked":"unchecked"}function b_(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function N_(e,t){return e.map((n,o)=>e[(t+o)%e.length])}function M_(e,t,n){const r=t.length>1&&Array.from(t).every(c=>c===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let s=N_(e,Math.max(i,0));r.length===1&&(s=s.filter(c=>c!==n));const d=s.find(c=>c.toLowerCase().startsWith(r.toLowerCase()));return d!==n?d:void 0}function P_(e,t){const{x:n,y:o}=e;let r=!1;for(let i=0,s=t.length-1;i<t.length;s=i++){const l=t[i],d=t[s],c=l.x,f=l.y,p=d.x,h=d.y;f>o!=h>o&&n<(p-c)*(o-f)/(h-f)+c&&(r=!r)}return r}function D_(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return P_(n,t)}function Nn(e){return t=>t.pointerType==="mouse"?e(t):void 0}var k_=od,L_=Mi,U_=id,F_=sd,V_=Li,G_=ad,O_=jo,H_=ud,$_=dd,B_=pd,q_=md,z_=gd,J_=vd,W_=Ed,Y_=Cd,er="DropdownMenu",[K_]=tn(er,[td]),qe=td(),[X_,wd]=K_(er),_d=e=>{const{__scopeDropdownMenu:t,children:n,dir:o,open:r,defaultOpen:i,onOpenChange:s,modal:l=!0}=e,d=qe(t),c=g.useRef(null),[f,p]=Po({prop:r,defaultProp:i??!1,onChange:s,caller:er});return m.jsx(X_,{scope:t,triggerId:Xe(),triggerRef:c,contentId:Xe(),open:f,onOpenChange:p,onOpenToggle:g.useCallback(()=>p(h=>!h),[p]),modal:l,children:m.jsx(k_,{...d,open:f,onOpenChange:p,dir:o,modal:l,children:n})})};_d.displayName=er;var xd="DropdownMenuTrigger",Id=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:o=!1,...r}=e,i=wd(xd,n),s=qe(n);return m.jsx(L_,{asChild:!0,...s,children:m.jsx(fe.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":o?"":void 0,disabled:o,...r,ref:vt(t,i.triggerRef),onPointerDown:X(e.onPointerDown,l=>{!o&&l.button===0&&l.ctrlKey===!1&&(i.onOpenToggle(),i.open||l.preventDefault())}),onKeyDown:X(e.onKeyDown,l=>{o||(["Enter"," "].includes(l.key)&&i.onOpenToggle(),l.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});Id.displayName=xd;var Q_="DropdownMenuPortal",Rd=e=>{const{__scopeDropdownMenu:t,...n}=e,o=qe(t);return m.jsx(U_,{...o,...n})};Rd.displayName=Q_;var Ad="DropdownMenuContent",bd=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,r=wd(Ad,n),i=qe(n),s=g.useRef(!1);return m.jsx(F_,{id:r.contentId,"aria-labelledby":r.triggerId,...i,...o,ref:t,onCloseAutoFocus:X(e.onCloseAutoFocus,l=>{var d;s.current||(d=r.triggerRef.current)==null||d.focus(),s.current=!1,l.preventDefault()}),onInteractOutside:X(e.onInteractOutside,l=>{const d=l.detail.originalEvent,c=d.button===0&&d.ctrlKey===!0,f=d.button===2||c;(!r.modal||f)&&(s.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});bd.displayName=Ad;var Z_="DropdownMenuGroup",j_=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,r=qe(n);return m.jsx(V_,{...r,...o,ref:t})});j_.displayName=Z_;var ex="DropdownMenuLabel",Nd=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,r=qe(n);return m.jsx(G_,{...r,...o,ref:t})});Nd.displayName=ex;var tx="DropdownMenuItem",nx=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,r=qe(n);return m.jsx(O_,{...r,...o,ref:t})});nx.displayName=tx;var ox="DropdownMenuCheckboxItem",Md=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,r=qe(n);return m.jsx(H_,{...r,...o,ref:t})});Md.displayName=ox;var rx="DropdownMenuRadioGroup",Pd=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,r=qe(n);return m.jsx($_,{...r,...o,ref:t})});Pd.displayName=rx;var ix="DropdownMenuRadioItem",Dd=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,r=qe(n);return m.jsx(B_,{...r,...o,ref:t})});Dd.displayName=ix;var sx="DropdownMenuItemIndicator",kd=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,r=qe(n);return m.jsx(q_,{...r,...o,ref:t})});kd.displayName=sx;var ax="DropdownMenuSeparator",Ld=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,r=qe(n);return m.jsx(z_,{...r,...o,ref:t})});Ld.displayName=ax;var lx="DropdownMenuArrow",ux=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,r=qe(n);return m.jsx(J_,{...r,...o,ref:t})});ux.displayName=lx;var cx="DropdownMenuSubTrigger",dx=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,r=qe(n);return m.jsx(W_,{...r,...o,ref:t})});dx.displayName=cx;var fx="DropdownMenuSubContent",px=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,r=qe(n);return m.jsx(Y_,{...r,...o,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});px.displayName=fx;var hx=_d,mx=Id,gx=Rd,vx=bd,yx=Nd,Ex=Md,Tx=Pd,Cx=Dd,Ud=kd,Sx=Ld;function wI({...e}){return m.jsx(hx,{"data-slot":"dropdown-menu",...e})}function _I({...e}){return m.jsx(mx,{"data-slot":"dropdown-menu-trigger",...e})}function xI({className:e,sideOffset:t=4,...n}){return m.jsx(gx,{children:m.jsx(vx,{"data-slot":"dropdown-menu-content",sideOffset:t,className:ye("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-[100000] max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",e),...n})})}function II({className:e,children:t,checked:n,...o}){return m.jsxs(Ex,{"data-slot":"dropdown-menu-checkbox-item",className:ye("focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),checked:n,...o,children:[m.jsx("span",{className:"pointer-events-none absolute left-2 flex size-3.5 items-center justify-center",children:m.jsx(Ud,{children:m.jsx(ml,{className:"size-4"})})}),t]})}function RI({...e}){return m.jsx(Tx,{"data-slot":"dropdown-menu-radio-group",...e})}function AI({className:e,children:t,...n}){return m.jsxs(Cx,{"data-slot":"dropdown-menu-radio-item",className:ye("focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...n,children:[m.jsx("span",{className:"pointer-events-none absolute left-2 flex size-3.5 items-center justify-center",children:m.jsx(Ud,{children:m.jsx(bf,{className:"size-2 fill-current"})})}),t]})}function bI({className:e,inset:t,...n}){return m.jsx(yx,{"data-slot":"dropdown-menu-label","data-inset":t,className:ye("px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",e),...n})}function NI({className:e,...t}){return m.jsx(Sx,{"data-slot":"dropdown-menu-separator",className:ye("bg-border -mx-1 my-1 h-px",e),...t})}function MI(e){const t=[];for(const n of e)for(const o of n.tasks)t.push({...o,categoryId:n.id,categoryName:n.title});return t}function PI(e){const t=new Map;for(const n of e){t.has(n.categoryId)||t.set(n.categoryId,{id:n.categoryId,title:n.categoryName,tasks:[]});const{tasks:o}=t.get(n.categoryId);o.push({id:n.id,title:n.title,isDone:n.isDone,time:n.time,timeDone:n.timeDone,priority:n.priority,isPlanned:n.isPlanned,whenDo:n.whenDo,isDetermined:n.isDetermined})}return Array.from(t.values())}function wx({className:e,children:t,...n}){return m.jsxs(iv,{"data-slot":"scroll-area",className:ye("relative",e),...n,children:[m.jsx(sv,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:t}),m.jsx(_x,{}),m.jsx(av,{})]})}function _x({className:e,orientation:t="vertical",...n}){return m.jsx(Ju,{"data-slot":"scroll-area-scrollbar",orientation:t,className:ye("flex touch-none p-px transition-colors select-none",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",e),...n,children:m.jsx(Xu,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}function xx(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}const Fd=D.createContext({drawerRef:{current:null},overlayRef:{current:null},onPress:()=>{},onRelease:()=>{},onDrag:()=>{},onNestedDrag:()=>{},onNestedOpenChange:()=>{},onNestedRelease:()=>{},openProp:void 0,dismissible:!1,isOpen:!1,isDragging:!1,keyboardIsOpen:{current:!1},snapPointsOffset:null,snapPoints:null,handleOnly:!1,modal:!1,shouldFade:!1,activeSnapPoint:null,onOpenChange:()=>{},setActiveSnapPoint:()=>{},closeDrawer:()=>{},direction:"bottom",shouldAnimate:{current:!0},shouldScaleBackground:!1,setBackgroundColorOnScale:!0,noBodyStyles:!1,container:null,autoFocus:!1}),Gn=()=>{const e=D.useContext(Fd);if(!e)throw new Error("useDrawerContext must be used within a Drawer.Root");return e};xx(`[data-vaul-drawer]{touch-action:none;will-change:transform;transition:transform .5s cubic-bezier(.32, .72, 0, 1);animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=open]{animation-name:slideFromBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=closed]{animation-name:slideToBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=open]{animation-name:slideFromTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=closed]{animation-name:slideToTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=open]{animation-name:slideFromLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=closed]{animation-name:slideToLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=open]{animation-name:slideFromRight}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=closed]{animation-name:slideToRight}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--initial-transform,100%),0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--initial-transform,100%),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-overlay][data-vaul-snap-points=false]{animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-overlay][data-vaul-snap-points=false][data-state=open]{animation-name:fadeIn}[data-vaul-overlay][data-state=closed]{animation-name:fadeOut}[data-vaul-animate=false]{animation:none!important}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:0;transition:opacity .5s cubic-bezier(.32, .72, 0, 1)}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:1}[data-vaul-drawer]:not([data-vaul-custom-container=true])::after{content:'';position:absolute;background:inherit;background-color:inherit}[data-vaul-drawer][data-vaul-drawer-direction=top]::after{top:initial;bottom:100%;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=bottom]::after{top:100%;bottom:initial;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=left]::after{left:initial;right:100%;top:0;bottom:0;width:200%}[data-vaul-drawer][data-vaul-drawer-direction=right]::after{left:100%;right:initial;top:0;bottom:0;width:200%}[data-vaul-overlay][data-vaul-snap-points=true]:not([data-vaul-snap-points-overlay=true]):not(
[data-state=closed]
){opacity:0}[data-vaul-overlay][data-vaul-snap-points-overlay=true]{opacity:1}[data-vaul-handle]{display:block;position:relative;opacity:.7;background:#e2e2e4;margin-left:auto;margin-right:auto;height:5px;width:32px;border-radius:1rem;touch-action:pan-y}[data-vaul-handle]:active,[data-vaul-handle]:hover{opacity:1}[data-vaul-handle-hitarea]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:max(100%,2.75rem);height:max(100%,2.75rem);touch-action:inherit}@media (hover:hover) and (pointer:fine){[data-vaul-drawer]{user-select:none}}@media (pointer:fine){[data-vaul-handle-hitarea]:{width:100%;height:100%}}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes fadeOut{to{opacity:0}}@keyframes slideFromBottom{from{transform:translate3d(0,var(--initial-transform,100%),0)}to{transform:translate3d(0,0,0)}}@keyframes slideToBottom{to{transform:translate3d(0,var(--initial-transform,100%),0)}}@keyframes slideFromTop{from{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}to{transform:translate3d(0,0,0)}}@keyframes slideToTop{to{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}}@keyframes slideFromLeft{from{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToLeft{to{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}}@keyframes slideFromRight{from{transform:translate3d(var(--initial-transform,100%),0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToRight{to{transform:translate3d(var(--initial-transform,100%),0,0)}}`);function Ix(){const e=navigator.userAgent;return typeof window<"u"&&(/Firefox/.test(e)&&/Mobile/.test(e)||/FxiOS/.test(e))}function Rx(){return Vi(/^Mac/)}function Ax(){return Vi(/^iPhone/)}function ja(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function bx(){return Vi(/^iPad/)||Rx()&&navigator.maxTouchPoints>1}function Vd(){return Ax()||bx()}function Vi(e){return typeof window<"u"&&window.navigator!=null?e.test(window.navigator.platform):void 0}const Nx=24,Mx=typeof window<"u"?g.useLayoutEffect:g.useEffect;function el(...e){return(...t)=>{for(let n of e)typeof n=="function"&&n(...t)}}const vr=typeof document<"u"&&window.visualViewport;function tl(e){let t=window.getComputedStyle(e);return/(auto|scroll)/.test(t.overflow+t.overflowX+t.overflowY)}function Gd(e){for(tl(e)&&(e=e.parentElement);e&&!tl(e);)e=e.parentElement;return e||document.scrollingElement||document.documentElement}const Px=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);let eo=0,yr;function Dx(e={}){let{isDisabled:t}=e;Mx(()=>{if(!t)return eo++,eo===1&&Vd()&&(yr=kx()),()=>{eo--,eo===0&&(yr==null||yr())}},[t])}function kx(){let e,t=0,n=p=>{e=Gd(p.target),!(e===document.documentElement&&e===document.body)&&(t=p.changedTouches[0].pageY)},o=p=>{if(!e||e===document.documentElement||e===document.body){p.preventDefault();return}let h=p.changedTouches[0].pageY,v=e.scrollTop,y=e.scrollHeight-e.clientHeight;y!==0&&((v<=0&&h>t||v>=y&&h<t)&&p.preventDefault(),t=h)},r=p=>{let h=p.target;qr(h)&&h!==document.activeElement&&(p.preventDefault(),h.style.transform="translateY(-2000px)",h.focus(),requestAnimationFrame(()=>{h.style.transform=""}))},i=p=>{let h=p.target;qr(h)&&(h.style.transform="translateY(-2000px)",requestAnimationFrame(()=>{h.style.transform="",vr&&(vr.height<window.innerHeight?requestAnimationFrame(()=>{nl(h)}):vr.addEventListener("resize",()=>nl(h),{once:!0}))}))},s=()=>{window.scrollTo(0,0)},l=window.pageXOffset,d=window.pageYOffset,c=el(Lx(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`));window.scrollTo(0,0);let f=el(gn(document,"touchstart",n,{passive:!1,capture:!0}),gn(document,"touchmove",o,{passive:!1,capture:!0}),gn(document,"touchend",r,{passive:!1,capture:!0}),gn(document,"focus",i,!0),gn(window,"scroll",s));return()=>{c(),f(),window.scrollTo(l,d)}}function Lx(e,t,n){let o=e.style[t];return e.style[t]=n,()=>{e.style[t]=o}}function gn(e,t,n,o){return e.addEventListener(t,n,o),()=>{e.removeEventListener(t,n,o)}}function nl(e){let t=document.scrollingElement||document.documentElement;for(;e&&e!==t;){let n=Gd(e);if(n!==document.documentElement&&n!==document.body&&n!==e){let o=n.getBoundingClientRect().top,r=e.getBoundingClientRect().top,i=e.getBoundingClientRect().bottom;const s=n.getBoundingClientRect().bottom+Nx;i>s&&(n.scrollTop+=r-o)}e=n.parentElement}}function qr(e){return e instanceof HTMLInputElement&&!Px.has(e.type)||e instanceof HTMLTextAreaElement||e instanceof HTMLElement&&e.isContentEditable}function Ux(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function Fx(...e){return t=>e.forEach(n=>Ux(n,t))}function Od(...e){return g.useCallback(Fx(...e),e)}const Hd=new WeakMap;function Ae(e,t,n=!1){if(!e||!(e instanceof HTMLElement))return;let o={};Object.entries(t).forEach(([r,i])=>{if(r.startsWith("--")){e.style.setProperty(r,i);return}o[r]=e.style[r],e.style[r]=i}),!n&&Hd.set(e,o)}function Vx(e,t){if(!e||!(e instanceof HTMLElement))return;let n=Hd.get(e);n&&(e.style[t]=n[t])}const Re=e=>{switch(e){case"top":case"bottom":return!0;case"left":case"right":return!1;default:return e}};function to(e,t){if(!e)return null;const n=window.getComputedStyle(e),o=n.transform||n.webkitTransform||n.mozTransform;let r=o.match(/^matrix3d\((.+)\)$/);return r?parseFloat(r[1].split(", ")[Re(t)?13:12]):(r=o.match(/^matrix\((.+)\)$/),r?parseFloat(r[1].split(", ")[Re(t)?5:4]):null)}function Gx(e){return 8*(Math.log(e+1)-2)}function Er(e,t){if(!e)return()=>{};const n=e.style.cssText;return Object.assign(e.style,t),()=>{e.style.cssText=n}}function Ox(...e){return(...t)=>{for(const n of e)typeof n=="function"&&n(...t)}}const Ce={DURATION:.5,EASE:[.32,.72,0,1]},$d=.4,Hx=.25,$x=100,Bd=8,Pt=16,zr=26,Tr="vaul-dragging";function qd(e){const t=D.useRef(e);return D.useEffect(()=>{t.current=e}),D.useMemo(()=>(...n)=>t.current==null?void 0:t.current.call(t,...n),[])}function Bx({defaultProp:e,onChange:t}){const n=D.useState(e),[o]=n,r=D.useRef(o),i=qd(t);return D.useEffect(()=>{r.current!==o&&(i(o),r.current=o)},[o,r,i]),n}function zd({prop:e,defaultProp:t,onChange:n=()=>{}}){const[o,r]=Bx({defaultProp:t,onChange:n}),i=e!==void 0,s=i?e:o,l=qd(n),d=D.useCallback(c=>{if(i){const p=typeof c=="function"?c(e):c;p!==e&&l(p)}else r(c)},[i,e,r,l]);return[s,d]}function qx({activeSnapPointProp:e,setActiveSnapPointProp:t,snapPoints:n,drawerRef:o,overlayRef:r,fadeFromIndex:i,onSnapPointChange:s,direction:l="bottom",container:d,snapToSequentialPoint:c}){const[f,p]=zd({prop:e,defaultProp:n==null?void 0:n[0],onChange:t}),[h,v]=D.useState(typeof window<"u"?{innerWidth:window.innerWidth,innerHeight:window.innerHeight}:void 0);D.useEffect(()=>{function I(){v({innerWidth:window.innerWidth,innerHeight:window.innerHeight})}return window.addEventListener("resize",I),()=>window.removeEventListener("resize",I)},[]);const y=D.useMemo(()=>f===(n==null?void 0:n[n.length-1])||null,[n,f]),E=D.useMemo(()=>{var I;return(I=n==null?void 0:n.findIndex(b=>b===f))!=null?I:null},[n,f]),T=n&&n.length>0&&(i||i===0)&&!Number.isNaN(i)&&n[i]===f||!n,C=D.useMemo(()=>{const I=d?{width:d.getBoundingClientRect().width,height:d.getBoundingClientRect().height}:typeof window<"u"?{width:window.innerWidth,height:window.innerHeight}:{width:0,height:0};var b;return(b=n==null?void 0:n.map(A=>{const N=typeof A=="string";let P=0;if(N&&(P=parseInt(A,10)),Re(l)){const k=N?P:h?A*I.height:0;return h?l==="bottom"?I.height-k:-I.height+k:k}const O=N?P:h?A*I.width:0;return h?l==="right"?I.width-O:-I.width+O:O}))!=null?b:[]},[n,h,d]),x=D.useMemo(()=>E!==null?C==null?void 0:C[E]:null,[C,E]),_=D.useCallback(I=>{var b;const A=(b=C==null?void 0:C.findIndex(N=>N===I))!=null?b:null;s(A),Ae(o.current,{transition:`transform ${Ce.DURATION}s cubic-bezier(${Ce.EASE.join(",")})`,transform:Re(l)?`translate3d(0, ${I}px, 0)`:`translate3d(${I}px, 0, 0)`}),C&&A!==C.length-1&&i!==void 0&&A!==i&&A<i?Ae(r.current,{transition:`opacity ${Ce.DURATION}s cubic-bezier(${Ce.EASE.join(",")})`,opacity:"0"}):Ae(r.current,{transition:`opacity ${Ce.DURATION}s cubic-bezier(${Ce.EASE.join(",")})`,opacity:"1"}),p(n==null?void 0:n[Math.max(A,0)])},[o.current,n,C,i,r,p]);D.useEffect(()=>{if(f||e){var I;const b=(I=n==null?void 0:n.findIndex(A=>A===e||A===f))!=null?I:-1;C&&b!==-1&&typeof C[b]=="number"&&_(C[b])}},[f,e,n,C,_]);function w({draggedDistance:I,closeDrawer:b,velocity:A,dismissible:N}){if(i===void 0)return;const P=l==="bottom"||l==="right"?(x??0)-I:(x??0)+I,O=E===i-1,k=E===0,G=I>0;if(O&&Ae(r.current,{transition:`opacity ${Ce.DURATION}s cubic-bezier(${Ce.EASE.join(",")})`}),!c&&A>2&&!G){N?b():_(C[0]);return}if(!c&&A>2&&G&&C&&n){_(C[n.length-1]);return}const ee=C==null?void 0:C.reduce((z,oe)=>typeof z!="number"||typeof oe!="number"?z:Math.abs(oe-P)<Math.abs(z-P)?oe:z),te=Re(l)?window.innerHeight:window.innerWidth;if(A>$d&&Math.abs(I)<te*.4){const z=G?1:-1;if(z>0&&y&&n){_(C[n.length-1]);return}if(k&&z<0&&N&&b(),E===null)return;_(C[E+z]);return}_(ee)}function R({draggedDistance:I}){if(x===null)return;const b=l==="bottom"||l==="right"?x-I:x+I;(l==="bottom"||l==="right")&&b<C[C.length-1]||(l==="top"||l==="left")&&b>C[C.length-1]||Ae(o.current,{transform:Re(l)?`translate3d(0, ${b}px, 0)`:`translate3d(${b}px, 0, 0)`})}function S(I,b){if(!n||typeof E!="number"||!C||i===void 0)return null;const A=E===i-1;if(E>=i&&b)return 0;if(A&&!b)return 1;if(!T&&!A)return null;const P=A?E+1:E-1,O=A?C[P]-C[P-1]:C[P+1]-C[P],k=I/Math.abs(O);return A?1-k:k}return{isLastSnapPoint:y,activeSnapPoint:f,shouldFade:T,getPercentageDragged:S,setActiveSnapPoint:p,activeSnapPointIndex:E,onRelease:w,onDrag:R,snapPointsOffset:C}}const zx=()=>()=>{};function Jx(){const{direction:e,isOpen:t,shouldScaleBackground:n,setBackgroundColorOnScale:o,noBodyStyles:r}=Gn(),i=D.useRef(null),s=g.useMemo(()=>document.body.style.backgroundColor,[]);function l(){return(window.innerWidth-zr)/window.innerWidth}D.useEffect(()=>{if(t&&n){i.current&&clearTimeout(i.current);const d=document.querySelector("[data-vaul-drawer-wrapper]")||document.querySelector("[vaul-drawer-wrapper]");if(!d)return;Ox(o&&!r?Er(document.body,{background:"black"}):zx,Er(d,{transformOrigin:Re(e)?"top":"left",transitionProperty:"transform, border-radius",transitionDuration:`${Ce.DURATION}s`,transitionTimingFunction:`cubic-bezier(${Ce.EASE.join(",")})`}));const c=Er(d,{borderRadius:`${Bd}px`,overflow:"hidden",...Re(e)?{transform:`scale(${l()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`}:{transform:`scale(${l()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`}});return()=>{c(),i.current=window.setTimeout(()=>{s?document.body.style.background=s:document.body.style.removeProperty("background")},Ce.DURATION*1e3)}}},[t,n,s])}let vn=null;function Wx({isOpen:e,modal:t,nested:n,hasBeenOpened:o,preventScrollRestoration:r,noBodyStyles:i}){const[s,l]=D.useState(()=>typeof window<"u"?window.location.href:""),d=D.useRef(0),c=D.useCallback(()=>{if(ja()&&vn===null&&e&&!i){vn={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left,height:document.body.style.height,right:"unset"};const{scrollX:p,innerHeight:h}=window;document.body.style.setProperty("position","fixed","important"),Object.assign(document.body.style,{top:`${-d.current}px`,left:`${-p}px`,right:"0px",height:"auto"}),window.setTimeout(()=>window.requestAnimationFrame(()=>{const v=h-window.innerHeight;v&&d.current>=h&&(document.body.style.top=`${-(d.current+v)}px`)}),300)}},[e]),f=D.useCallback(()=>{if(ja()&&vn!==null&&!i){const p=-parseInt(document.body.style.top,10),h=-parseInt(document.body.style.left,10);Object.assign(document.body.style,vn),window.requestAnimationFrame(()=>{if(r&&s!==window.location.href){l(window.location.href);return}window.scrollTo(h,p)}),vn=null}},[s]);return D.useEffect(()=>{function p(){d.current=window.scrollY}return p(),window.addEventListener("scroll",p),()=>{window.removeEventListener("scroll",p)}},[]),D.useEffect(()=>{if(t)return()=>{typeof document>"u"||document.querySelector("[data-vaul-drawer]")||f()}},[t,f]),D.useEffect(()=>{n||!o||(e?(!window.matchMedia("(display-mode: standalone)").matches&&c(),t||window.setTimeout(()=>{f()},500)):f())},[e,o,s,t,n,c,f]),{restorePositionSetting:f}}function Yx({open:e,onOpenChange:t,children:n,onDrag:o,onRelease:r,snapPoints:i,shouldScaleBackground:s=!1,setBackgroundColorOnScale:l=!0,closeThreshold:d=Hx,scrollLockTimeout:c=$x,dismissible:f=!0,handleOnly:p=!1,fadeFromIndex:h=i&&i.length-1,activeSnapPoint:v,setActiveSnapPoint:y,fixed:E,modal:T=!0,onClose:C,nested:x,noBodyStyles:_=!1,direction:w="bottom",defaultOpen:R=!1,disablePreventScroll:S=!0,snapToSequentialPoint:I=!1,preventScrollRestoration:b=!1,repositionInputs:A=!0,onAnimationEnd:N,container:P,autoFocus:O=!1}){var k,G;const[ee=!1,te]=zd({defaultProp:R,prop:e,onChange:J=>{t==null||t(J),!J&&!x&&Y(),setTimeout(()=>{N==null||N(J)},Ce.DURATION*1e3),J&&!T&&typeof window<"u"&&window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"}),J||(document.body.style.pointerEvents="auto")}}),[z,oe]=D.useState(!1),[U,ae]=D.useState(!1),[Ee,M]=D.useState(!1),V=D.useRef(null),$=D.useRef(null),F=D.useRef(null),B=D.useRef(null),Q=D.useRef(null),ie=D.useRef(!1),j=D.useRef(null),Z=D.useRef(0),Ve=D.useRef(!1),Ge=D.useRef(!R),ot=D.useRef(0),q=D.useRef(null),rt=D.useRef(((k=q.current)==null?void 0:k.getBoundingClientRect().height)||0),it=D.useRef(((G=q.current)==null?void 0:G.getBoundingClientRect().width)||0),Ct=D.useRef(0),Ht=D.useCallback(J=>{i&&J===pt.length-1&&($.current=new Date)},[]),{activeSnapPoint:St,activeSnapPointIndex:Le,setActiveSnapPoint:ft,onRelease:wt,snapPointsOffset:pt,onDrag:$t,shouldFade:Bt,getPercentageDragged:H}=qx({snapPoints:i,activeSnapPointProp:v,setActiveSnapPointProp:y,drawerRef:q,fadeFromIndex:h,overlayRef:V,onSnapPointChange:Ht,direction:w,container:P,snapToSequentialPoint:I});Dx({isDisabled:!ee||U||!T||Ee||!z||!A||!S});const{restorePositionSetting:Y}=Wx({isOpen:ee,modal:T,nested:x??!1,hasBeenOpened:z,preventScrollRestoration:b,noBodyStyles:_});function le(){return(window.innerWidth-zr)/window.innerWidth}function ue(J){var ce,pe;!f&&!i||q.current&&!q.current.contains(J.target)||(rt.current=((ce=q.current)==null?void 0:ce.getBoundingClientRect().height)||0,it.current=((pe=q.current)==null?void 0:pe.getBoundingClientRect().width)||0,ae(!0),F.current=new Date,Vd()&&window.addEventListener("touchend",()=>ie.current=!1,{once:!0}),J.target.setPointerCapture(J.pointerId),Z.current=Re(w)?J.pageY:J.pageX)}function de(J,ce){var pe;let W=J;const re=(pe=window.getSelection())==null?void 0:pe.toString(),he=q.current?to(q.current,w):null,Te=new Date;if(W.tagName==="SELECT"||W.hasAttribute("data-vaul-no-drag")||W.closest("[data-vaul-no-drag]"))return!1;if(w==="right"||w==="left")return!0;if($.current&&Te.getTime()-$.current.getTime()<500)return!1;if(he!==null&&(w==="bottom"?he>0:he<0))return!0;if(re&&re.length>0)return!1;if(Q.current&&Te.getTime()-Q.current.getTime()<c&&he===0||ce)return Q.current=Te,!1;for(;W;){if(W.scrollHeight>W.clientHeight){if(W.scrollTop!==0)return Q.current=new Date,!1;if(W.getAttribute("role")==="dialog")return!0}W=W.parentNode}return!0}function _e(J){if(q.current&&U){const ce=w==="bottom"||w==="right"?1:-1,pe=(Z.current-(Re(w)?J.pageY:J.pageX))*ce,W=pe>0,re=i&&!f&&!W;if(re&&Le===0)return;const he=Math.abs(pe),Te=document.querySelector("[data-vaul-drawer-wrapper]"),xe=w==="bottom"||w==="top"?rt.current:it.current;let ge=he/xe;const Pe=H(he,W);if(Pe!==null&&(ge=Pe),re&&ge>=1||!ie.current&&!de(J.target,W))return;if(q.current.classList.add(Tr),ie.current=!0,Ae(q.current,{transition:"none"}),Ae(V.current,{transition:"none"}),i&&$t({draggedDistance:pe}),W&&!i){const me=Gx(pe),Je=Math.min(me*-1,0)*ce;Ae(q.current,{transform:Re(w)?`translate3d(0, ${Je}px, 0)`:`translate3d(${Je}px, 0, 0)`});return}const Oe=1-ge;if((Bt||h&&Le===h-1)&&(o==null||o(J,ge),Ae(V.current,{opacity:`${Oe}`,transition:"none"},!0)),Te&&V.current&&s){const me=Math.min(le()+ge*(1-le()),1),Je=8-ge*8,We=Math.max(0,14-ge*14);Ae(Te,{borderRadius:`${Je}px`,transform:Re(w)?`scale(${me}) translate3d(0, ${We}px, 0)`:`scale(${me}) translate3d(${We}px, 0, 0)`,transition:"none"},!0)}if(!i){const me=he*ce;Ae(q.current,{transform:Re(w)?`translate3d(0, ${me}px, 0)`:`translate3d(${me}px, 0, 0)`})}}}D.useEffect(()=>{window.requestAnimationFrame(()=>{Ge.current=!0})},[]),D.useEffect(()=>{var J;function ce(){if(!q.current||!A)return;const pe=document.activeElement;if(qr(pe)||Ve.current){var W;const re=((W=window.visualViewport)==null?void 0:W.height)||0,he=window.innerHeight;let Te=he-re;const xe=q.current.getBoundingClientRect().height||0,ge=xe>he*.8;Ct.current||(Ct.current=xe);const Pe=q.current.getBoundingClientRect().top;if(Math.abs(ot.current-Te)>60&&(Ve.current=!Ve.current),i&&i.length>0&&pt&&Le){const Oe=pt[Le]||0;Te+=Oe}if(ot.current=Te,xe>re||Ve.current){const Oe=q.current.getBoundingClientRect().height;let me=Oe;Oe>re&&(me=re-(ge?Pe:zr)),E?q.current.style.height=`${Oe-Math.max(Te,0)}px`:q.current.style.height=`${Math.max(me,re-Pe)}px`}else Ix()||(q.current.style.height=`${Ct.current}px`);i&&i.length>0&&!Ve.current?q.current.style.bottom="0px":q.current.style.bottom=`${Math.max(Te,0)}px`}}return(J=window.visualViewport)==null||J.addEventListener("resize",ce),()=>{var pe;return(pe=window.visualViewport)==null?void 0:pe.removeEventListener("resize",ce)}},[Le,i,pt]);function ze(J){tr(),C==null||C(),J||te(!1),setTimeout(()=>{i&&ft(i[0])},Ce.DURATION*1e3)}function On(){if(!q.current)return;const J=document.querySelector("[data-vaul-drawer-wrapper]"),ce=to(q.current,w);Ae(q.current,{transform:"translate3d(0, 0, 0)",transition:`transform ${Ce.DURATION}s cubic-bezier(${Ce.EASE.join(",")})`}),Ae(V.current,{transition:`opacity ${Ce.DURATION}s cubic-bezier(${Ce.EASE.join(",")})`,opacity:"1"}),s&&ce&&ce>0&&ee&&Ae(J,{borderRadius:`${Bd}px`,overflow:"hidden",...Re(w)?{transform:`scale(${le()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`,transformOrigin:"top"}:{transform:`scale(${le()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`,transformOrigin:"left"},transitionProperty:"transform, border-radius",transitionDuration:`${Ce.DURATION}s`,transitionTimingFunction:`cubic-bezier(${Ce.EASE.join(",")})`},!0)}function tr(){!U||!q.current||(q.current.classList.remove(Tr),ie.current=!1,ae(!1),B.current=new Date)}function un(J){if(!U||!q.current)return;q.current.classList.remove(Tr),ie.current=!1,ae(!1),B.current=new Date;const ce=to(q.current,w);if(!J||!de(J.target,!1)||!ce||Number.isNaN(ce)||F.current===null)return;const pe=B.current.getTime()-F.current.getTime(),W=Z.current-(Re(w)?J.pageY:J.pageX),re=Math.abs(W)/pe;if(re>.05&&(M(!0),setTimeout(()=>{M(!1)},200)),i){wt({draggedDistance:W*(w==="bottom"||w==="right"?1:-1),closeDrawer:ze,velocity:re,dismissible:f}),r==null||r(J,!0);return}if(w==="bottom"||w==="right"?W>0:W<0){On(),r==null||r(J,!0);return}if(re>$d){ze(),r==null||r(J,!1);return}var he;const Te=Math.min((he=q.current.getBoundingClientRect().height)!=null?he:0,window.innerHeight);var xe;const ge=Math.min((xe=q.current.getBoundingClientRect().width)!=null?xe:0,window.innerWidth),Pe=w==="left"||w==="right";if(Math.abs(ce)>=(Pe?ge:Te)*d){ze(),r==null||r(J,!1);return}r==null||r(J,!0),On()}D.useEffect(()=>(ee&&(Ae(document.documentElement,{scrollBehavior:"auto"}),$.current=new Date),()=>{Vx(document.documentElement,"scrollBehavior")}),[ee]);function Hn(J){const ce=J?(window.innerWidth-Pt)/window.innerWidth:1,pe=J?-Pt:0;j.current&&window.clearTimeout(j.current),Ae(q.current,{transition:`transform ${Ce.DURATION}s cubic-bezier(${Ce.EASE.join(",")})`,transform:Re(w)?`scale(${ce}) translate3d(0, ${pe}px, 0)`:`scale(${ce}) translate3d(${pe}px, 0, 0)`}),!J&&q.current&&(j.current=setTimeout(()=>{const W=to(q.current,w);Ae(q.current,{transition:"none",transform:Re(w)?`translate3d(0, ${W}px, 0)`:`translate3d(${W}px, 0, 0)`})},500))}function nr(J,ce){if(ce<0)return;const pe=(window.innerWidth-Pt)/window.innerWidth,W=pe+ce*(1-pe),re=-Pt+ce*Pt;Ae(q.current,{transform:Re(w)?`scale(${W}) translate3d(0, ${re}px, 0)`:`scale(${W}) translate3d(${re}px, 0, 0)`,transition:"none"})}function $n(J,ce){const pe=Re(w)?window.innerHeight:window.innerWidth,W=ce?(pe-Pt)/pe:1,re=ce?-Pt:0;ce&&Ae(q.current,{transition:`transform ${Ce.DURATION}s cubic-bezier(${Ce.EASE.join(",")})`,transform:Re(w)?`scale(${W}) translate3d(0, ${re}px, 0)`:`scale(${W}) translate3d(${re}px, 0, 0)`})}return D.useEffect(()=>{T||window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"})},[T]),D.createElement(du,{defaultOpen:R,onOpenChange:J=>{!f&&!J||(J?oe(!0):ze(!0),te(J))},open:ee},D.createElement(Fd.Provider,{value:{activeSnapPoint:St,snapPoints:i,setActiveSnapPoint:ft,drawerRef:q,overlayRef:V,onOpenChange:t,onPress:ue,onRelease:un,onDrag:_e,dismissible:f,shouldAnimate:Ge,handleOnly:p,isOpen:ee,isDragging:U,shouldFade:Bt,closeDrawer:ze,onNestedDrag:nr,onNestedOpenChange:Hn,onNestedRelease:$n,keyboardIsOpen:Ve,modal:T,snapPointsOffset:pt,activeSnapPointIndex:Le,direction:w,shouldScaleBackground:s,setBackgroundColorOnScale:l,noBodyStyles:_,container:P,autoFocus:O}},n))}const Jd=D.forwardRef(function({...e},t){const{overlayRef:n,snapPoints:o,onRelease:r,shouldFade:i,isOpen:s,modal:l,shouldAnimate:d}=Gn(),c=Od(t,n),f=o&&o.length>0;if(!l)return null;const p=D.useCallback(h=>r(h),[r]);return D.createElement(pu,{onMouseUp:p,ref:c,"data-vaul-overlay":"","data-vaul-snap-points":s&&f?"true":"false","data-vaul-snap-points-overlay":s&&i?"true":"false","data-vaul-animate":d!=null&&d.current?"true":"false",...e})});Jd.displayName="Drawer.Overlay";const Wd=D.forwardRef(function({onPointerDownOutside:e,style:t,onOpenAutoFocus:n,...o},r){const{drawerRef:i,onPress:s,onRelease:l,onDrag:d,keyboardIsOpen:c,snapPointsOffset:f,activeSnapPointIndex:p,modal:h,isOpen:v,direction:y,snapPoints:E,container:T,handleOnly:C,shouldAnimate:x,autoFocus:_}=Gn(),[w,R]=D.useState(!1),S=Od(r,i),I=D.useRef(null),b=D.useRef(null),A=D.useRef(!1),N=E&&E.length>0;Jx();const P=(k,G,ee=0)=>{if(A.current)return!0;const te=Math.abs(k.y),z=Math.abs(k.x),oe=z>te,U=["bottom","right"].includes(G)?1:-1;if(G==="left"||G==="right"){if(!(k.x*U<0)&&z>=0&&z<=ee)return oe}else if(!(k.y*U<0)&&te>=0&&te<=ee)return!oe;return A.current=!0,!0};D.useEffect(()=>{N&&window.requestAnimationFrame(()=>{R(!0)})},[]);function O(k){I.current=null,A.current=!1,l(k)}return D.createElement(hu,{"data-vaul-drawer-direction":y,"data-vaul-drawer":"","data-vaul-delayed-snap-points":w?"true":"false","data-vaul-snap-points":v&&N?"true":"false","data-vaul-custom-container":T?"true":"false","data-vaul-animate":x!=null&&x.current?"true":"false",...o,ref:S,style:f&&f.length>0?{"--snap-point-height":`${f[p??0]}px`,...t}:t,onPointerDown:k=>{C||(o.onPointerDown==null||o.onPointerDown.call(o,k),I.current={x:k.pageX,y:k.pageY},s(k))},onOpenAutoFocus:k=>{n==null||n(k),_||k.preventDefault()},onPointerDownOutside:k=>{if(e==null||e(k),!h||k.defaultPrevented){k.preventDefault();return}c.current&&(c.current=!1)},onFocusOutside:k=>{if(!h){k.preventDefault();return}},onPointerMove:k=>{if(b.current=k,C||(o.onPointerMove==null||o.onPointerMove.call(o,k),!I.current))return;const G=k.pageY-I.current.y,ee=k.pageX-I.current.x,te=k.pointerType==="touch"?10:2;P({x:ee,y:G},y,te)?d(k):(Math.abs(ee)>te||Math.abs(G)>te)&&(I.current=null)},onPointerUp:k=>{o.onPointerUp==null||o.onPointerUp.call(o,k),I.current=null,A.current=!1,l(k)},onPointerOut:k=>{o.onPointerOut==null||o.onPointerOut.call(o,k),O(b.current)},onContextMenu:k=>{o.onContextMenu==null||o.onContextMenu.call(o,k),b.current&&O(b.current)}})});Wd.displayName="Drawer.Content";const Kx=250,Xx=120,Qx=D.forwardRef(function({preventCycle:e=!1,children:t,...n},o){const{closeDrawer:r,isDragging:i,snapPoints:s,activeSnapPoint:l,setActiveSnapPoint:d,dismissible:c,handleOnly:f,isOpen:p,onPress:h,onDrag:v}=Gn(),y=D.useRef(null),E=D.useRef(!1);function T(){if(E.current){_();return}window.setTimeout(()=>{C()},Xx)}function C(){if(i||e||E.current){_();return}if(_(),!s||s.length===0){c||r();return}if(l===s[s.length-1]&&c){r();return}const R=s.findIndex(I=>I===l);if(R===-1)return;const S=s[R+1];d(S)}function x(){y.current=window.setTimeout(()=>{E.current=!0},Kx)}function _(){y.current&&window.clearTimeout(y.current),E.current=!1}return D.createElement("div",{onClick:T,onPointerCancel:_,onPointerDown:w=>{f&&h(w),x()},onPointerMove:w=>{f&&v(w)},ref:o,"data-vaul-drawer-visible":p?"true":"false","data-vaul-handle":"","aria-hidden":"true",...n},D.createElement("span",{"data-vaul-handle-hitarea":"","aria-hidden":"true"},t))});Qx.displayName="Drawer.Handle";function Zx(e){const t=Gn(),{container:n=t.container,...o}=e;return D.createElement(fu,{container:n,...o})}const Ot={Root:Yx,Content:Wd,Overlay:Jd,Trigger:gm,Portal:Zx,Title:vm,Description:ym};function jx({...e}){return m.jsx(Ot.Root,{"data-slot":"drawer",...e})}function eI({...e}){return m.jsx(Ot.Trigger,{"data-slot":"drawer-trigger",...e})}function tI({...e}){return m.jsx(Ot.Portal,{"data-slot":"drawer-portal",...e})}function nI({className:e,...t}){return m.jsx(Ot.Overlay,{"data-slot":"drawer-overlay",className:ye("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function oI({className:e,children:t,...n}){return m.jsxs(tI,{"data-slot":"drawer-portal",children:[m.jsx(nI,{}),m.jsxs(Ot.Content,{"data-slot":"drawer-content",className:ye("group/drawer-content bg-background fixed z-50 flex h-auto flex-col","data-[vaul-drawer-direction=top]:inset-x-0 data-[vaul-drawer-direction=top]:top-0 data-[vaul-drawer-direction=top]:mb-24 data-[vaul-drawer-direction=top]:max-h-[80vh] data-[vaul-drawer-direction=top]:rounded-b-lg data-[vaul-drawer-direction=top]:border-b","data-[vaul-drawer-direction=bottom]:inset-x-0 data-[vaul-drawer-direction=bottom]:bottom-0 data-[vaul-drawer-direction=bottom]:mt-24 data-[vaul-drawer-direction=bottom]:max-h-[80vh] data-[vaul-drawer-direction=bottom]:rounded-t-lg data-[vaul-drawer-direction=bottom]:border-t","data-[vaul-drawer-direction=right]:inset-y-0 data-[vaul-drawer-direction=right]:right-0 data-[vaul-drawer-direction=right]:w-3/4 data-[vaul-drawer-direction=right]:border-l data-[vaul-drawer-direction=right]:sm:max-w-sm","data-[vaul-drawer-direction=left]:inset-y-0 data-[vaul-drawer-direction=left]:left-0 data-[vaul-drawer-direction=left]:w-3/4 data-[vaul-drawer-direction=left]:border-r data-[vaul-drawer-direction=left]:sm:max-w-sm",e),...n,children:[m.jsx("div",{className:"bg-muted mx-auto mt-4 hidden h-2 w-[100px] shrink-0 rounded-full group-data-[vaul-drawer-direction=bottom]/drawer-content:block"}),t]})]})}function rI({className:e,...t}){return m.jsx("div",{"data-slot":"drawer-header",className:ye("flex flex-col gap-0.5 p-4 group-data-[vaul-drawer-direction=bottom]/drawer-content:text-center group-data-[vaul-drawer-direction=top]/drawer-content:text-center md:gap-1.5 md:text-left",e),...t})}function iI({className:e,...t}){return m.jsx(Ot.Title,{"data-slot":"drawer-title",className:ye("text-foreground font-semibold",e),...t})}function sI({className:e,...t}){return m.jsx(Ot.Description,{"data-slot":"drawer-description",className:ye("text-muted-foreground text-sm",e),...t})}function aI(e){g.useEffect(()=>{e?document.documentElement.style.scrollBehavior="auto":setTimeout(()=>{document.documentElement.style.scrollBehavior="smooth"},10)},[e])}const DI=({title:e,description:t,children:n})=>{const[o,r]=g.useState(!1);aI(o);const[i]=Ye(),s=Qr(l=>l.size);return m.jsxs(jx,{open:o,onOpenChange:r,preventScrollRestoration:!1,children:[m.jsx(eI,{asChild:!0,children:m.jsx("div",{children:m.jsx(ve,{className:ye("bg-card hover:bg-card/50 rounded-r-none !pr-7 !py-6 fixed z-30 text-foreground right-0 shadow-sm shadow-foreground"),style:{top:`${s+10}px`},children:m.jsx(we,{animValue:.9,hoverAnimType:"scale",className:"",as:"div",children:o?m.jsx(Bf,{className:"!w-8 !h-8"}):m.jsx(Hf,{className:"!w-8 !h-8"})})})})}),m.jsx(oI,{className:"border-border z-[1000]  outline-none",children:m.jsxs(wx,{className:"w-full touch-auto overscroll-contain px-2 max-h-[60vh] overflow-auto",children:[m.jsxs(rI,{children:[m.jsx(iI,{children:i(e)}),m.jsx(sI,{children:i(t)})]}),n]})})]})};export{Jg as C,wI as D,Fm as I,Rn as L,EI as M,TI as P,r_ as R,Tg as S,CI as T,Nt as W,vl as X,_I as a,xI as b,bI as c,NI as d,RI as e,AI as f,DI as g,PI as h,Se as i,vi as j,_n as k,Vg as l,lg as m,MI as n,qt as o,vs as p,Jn as q,Bl as r,ku as s,ip as t,yI as u,vI as v,dv as w,II as x,i_ as y,Kc as z};
